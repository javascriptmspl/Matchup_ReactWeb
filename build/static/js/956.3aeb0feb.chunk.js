"use strict";(self.webpackChunkMatchup=self.webpackChunkMatchup||[]).push([[956],{4956:(e,s,n)=>{n.r(s),n.d(s,{default:()=>v});var t=n(5043),a=n(9456),i=n(3519),r=n(1072),l=n(1669),o=n(7459),c=n(579);const d=()=>{var e;const[s,n]=(0,t.useState)(0),a=localStorage.getItem("userData"),i=a?JSON.parse(a):null,r=(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e._id)||null;return(0,t.useEffect)(()=>{const e=async()=>{if(r)try{const e=await fetch(`${o.C}/notifications/unread-count/${r}`),s=await e.json();n(s.count||0)}catch(e){console.error("Error fetching unread count:",e),n(0)}};e();const s=setInterval(e,3e4);return()=>clearInterval(s)},[r]),(0,c.jsx)(l.A,{unreadCount:s})};n(9366);var u=n(1233),m=n(1889),h=n(5475);const x=e=>{var s,n,t,a,i,r;let{notification:l}=e;const d=null!==(s=l.senderUserId)&&void 0!==s&&s.mainAvatar?`${o.C}/assets/images/${l.senderUserId.mainAvatar}`:null!==(n=l.senderUserId)&&void 0!==n&&null!==(t=n.avatars)&&void 0!==t&&t.length?`${o.C}/assets/images/${l.senderUserId.avatars[0]}`:"/default-avatar.png";return(0,c.jsxs)("div",{className:"notification-item "+("UNREAD"===l.status?"unread":"read"),children:[(0,c.jsx)("div",{className:"notification-content",children:(0,c.jsxs)("div",{className:"notification-action",children:[(0,c.jsx)(h.N_,{to:`/metrimonial/user-profile/${null===(a=l.senderUserId)||void 0===a?void 0:a._id}`,children:(0,c.jsx)("img",{src:d,className:"profile-picture-notification",alt:(null===(i=l.senderUserId)||void 0===i?void 0:i.name)||"User"})}),(0,c.jsxs)("span",{children:[(0,c.jsx)("strong",{children:null===(r=l.senderUserId)||void 0===r?void 0:r.name})," ",l.message]})]})}),(0,c.jsx)("div",{className:"notification-meta",children:(0,c.jsx)("p",{className:"notification-timestamp",children:(0,c.jsx)(m.A,{createdAt:l.createdAt})})})]})},v=()=>{const e=(0,a.wA)(),{list:s,loading:n,error:l}=(0,a.d4)(e=>e.notifications),o=localStorage.getItem("userData"),m=JSON.parse(o).data._id;return(0,t.useEffect)(()=>{m&&e((0,u.bb)({userId:m,page:1,limit:11}))},[e,m]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(d,{}),(0,c.jsxs)(i.A,{children:[(0,c.jsxs)(r.A,{className:"align-items-center",children:[(0,c.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,c.jsx)("h2",{className:"notification-title-page",children:"Notifications"})}),(0,c.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,c.jsxs)("div",{className:"member__info--right member__info--right-notification d-flex justify-content-end align-items-center",children:[s.some(e=>"UNREAD"===e.status)&&(0,c.jsx)("button",{className:"btn btn-sm btn-outline-primary me-3",onClick:async()=>{try{await e((0,u.X0)(m)).unwrap()}catch(l){console.error("Error marking all notifications as read:",l)}},style:{fontSize:"14px",padding:"6px 12px"},children:"Mark all as read"}),(0,c.jsx)("div",{className:"member__info--customselect right w-100",children:(0,c.jsxs)("div",{className:"default-btn",children:[(0,c.jsx)("span",{children:"Order By:"}),(0,c.jsxs)("select",{className:"select__border--none",children:[(0,c.jsx)("option",{value:"newest",children:"Newest"}),(0,c.jsx)("option",{value:"oldest",children:"Oldest"})]})]})})]})})]}),n&&(0,c.jsx)("p",{children:"Loading notifications..."}),l&&(0,c.jsxs)("p",{style:{color:"red"},children:["Error: ",l]}),(0,c.jsx)("div",{className:"notification-modal-page",children:0===s.length?(0,c.jsx)("p",{children:"No notifications found."}):s.map(e=>(0,c.jsx)(x,{notification:e},e._id))})]})]})}},9366:(e,s,n)=>{n.d(s,{A:()=>r});var t=n(5043),a=n(579);class i extends t.Component{render(){const{select:e}=this.props;return(0,a.jsxs)("select",{defaultValue:e,children:[(0,a.jsx)("option",{value:"Newest",children:"Recent added"}),(0,a.jsx)("option",{value:"Popular",children:"Popular"}),(0,a.jsx)("option",{value:"Old",children:"Old"}),(0,a.jsx)("option",{value:"Recent",children:"Recent"})]})}}const r=i}}]);
//# sourceMappingURL=956.3aeb0feb.chunk.js.map