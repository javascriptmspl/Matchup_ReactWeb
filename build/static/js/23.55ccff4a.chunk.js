"use strict";(self.webpackChunkMatchup=self.webpackChunkMatchup||[]).push([[23],{7023:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var n=a(5043),t=a(3888),i=a(1669),c=a(9677),l=a(7598),o=a(5696),r=a(3768),d=a(579);const m="pk_test_51MU2jiKfFoFhc3tbllcV1mFImqKYh5An6DHJDGCUs7x4f6OZvvGAPF4Sf4Z1Tjsuvfqk94nV8fyaTsTxE5EbAG3P00gUH88kPB";const p=m?(0,c.c)(m):null,h=e=>{let{clientSecret:s,amount:a,onSuccess:t,onCancel:i,userId:c}=e;const m=(0,l.t2)(),p=(0,l.HH)(),[h,u]=(0,n.useState)(!1),[x,f]=(0,n.useState)(null);return(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m&&p){u(!0),f(null);try{const{error:e,paymentIntent:a}=await m.confirmPayment({elements:p,confirmParams:{return_url:window.location.origin+"/payment-success"},redirect:"if_required"});if(e)f(e.message),r.Ay.error(e.message);else if(a&&"succeeded"===a.status)try{const e=await(0,o.To)(a.id,c);if(e.isSuccess){const{payment:s,coinsAwarded:n,newBalance:i}=e.data;r.Ay.success("Payment successful! ".concat(n," coins awarded. New balance: ").concat(i),{duration:5e3}),t(a,e.data)}else r.Ay.error("Payment processed but failed to activate subscription. Please contact support."),t(a,null)}catch(s){console.error("Failed to confirm payment:",s),r.Ay.error("Payment successful but failed to activate subscription. Please contact support."),t(a,null)}}catch(a){f("An unexpected error occurred."),r.Ay.error("Payment failed. Please try again.")}finally{u(!1)}}},className:"stripe-payment-form",children:[(0,d.jsx)("div",{className:"payment-amount",children:(0,d.jsxs)("h3",{children:["Payment Amount: $",a]})}),(0,d.jsx)(l.He,{}),x&&(0,d.jsx)("div",{className:"error-message",style:{color:"red",marginTop:"10px"},children:x}),(0,d.jsxs)("div",{className:"payment-buttons",children:[(0,d.jsx)("button",{type:"submit",disabled:!m||h,className:"btn-pay",children:h?"Processing...":"Pay $".concat(a)}),(0,d.jsx)("button",{type:"button",onClick:i,className:"btn-cancel",disabled:h,children:"Cancel"})]})]})},u=e=>{let{isOpen:s,onClose:a,subscriptionPlan:t,userId:i}=e;const[c,m]=(0,n.useState)(null),[u,x]=(0,n.useState)(null),[f,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{s&&t&&i&&b()},[s,t,i]);const b=async()=>{y(!0);try{const e=await(0,o.f)(i,t);e.isSuccess?(m(e.data.clientSecret),x(e.data)):(console.error("Payment initialization failed:",e),r.Ay.error("Failed to initialize payment"))}catch(e){r.Ay.error("Error initializing payment. Please try again."),console.error("Payment initialization error:",e)}finally{y(!1)}},j=()=>{a(!1)};if(!s)return null;const P={clientSecret:c,appearance:{theme:"stripe",variables:{colorPrimary:"#0570de",colorBackground:"#ffffff",colorText:"#30313d",colorDanger:"#df1b41",fontFamily:"system-ui, sans-serif",spacingUnit:"4px",borderRadius:"8px"}}};return(0,d.jsx)("div",{className:"payment-modal-overlay",children:(0,d.jsxs)("div",{className:"payment-modal",children:[(0,d.jsxs)("div",{className:"payment-modal-header",children:[(0,d.jsx)("h2",{children:"Complete Your Payment"}),(0,d.jsx)("button",{className:"close-btn",onClick:j,children:"\xd7"})]}),(0,d.jsxs)("div",{className:"payment-modal-body",children:[f&&(0,d.jsx)("div",{className:"loading-spinner",children:(0,d.jsx)("p",{children:"Initializing payment..."})}),!f&&c&&(0,d.jsx)(l.S8,{stripe:p,options:P,children:(0,d.jsx)(h,{clientSecret:c,amount:(null===u||void 0===u?void 0:u.amount)||0,onSuccess:(e,s)=>{setTimeout(()=>{a(!0,s)},2e3)},onCancel:j,userId:i})}),!f&&!c&&(0,d.jsxs)("div",{className:"error-state",children:[(0,d.jsx)("p",{children:"Unable to initialize payment. Please try again."}),(0,d.jsx)("button",{onClick:j,className:"btn-cancel",children:"Close"})]})]})]})})};let x=[{daycount:"Silver",perMonth:"$15.00 Now And Then $30.00 Per Month.",price:"$20.00",btnText:"Select Plan",faciList:[{iconName:"fa-solid fa-circle-check",text:"View Members Directory"},{iconName:"fa-solid fa-circle-check",text:"View Members Profile"},{iconName:"fa-solid fa-circle-check",text:"Send Private Messages"},{iconName:"fa-solid fa-circle-xmark",text:"Add Media To Your Profile"}]},{daycount:"Gold",perMonth:"$15.00 Now And Then $30.00 Per Month.",price:"$30.00",btnText:"Select Plan",faciList:[{iconName:"fa-solid fa-circle-check",text:"View Members Directory"},{iconName:"fa-solid fa-circle-check",text:"View Members Profile"},{iconName:"fa-solid fa-circle-check",text:"Send Private Messages"},{iconName:"fa-solid fa-circle-check",text:"Add Media To Your Profile"}]}],f=[{daycount:"Choose you best coin plan",perMonth:"Elevate connections with our premier Best Coin Plan!",price:"Free",btnText:"Select Plan",faciList:[{iconName:"fa-solid fa-circle-check",text:"5 coins $8.99",offer:"save 45%"},{iconName:"fa-solid fa-circle-check",text:"30 coins $37.99",offer:"best value"},{iconName:"fa-solid fa-circle-check",text:"15 coins $22.99",offer:"save 48%"},{iconName:"fa-solid fa-circle-check",text:"2 coins $2.99",offer:"small plan"}]}];class y extends n.Component{constructor(e){super(e),this.handleSelectPlan=e=>{this.setState({selectedCoinPlan:e})},this.handleSubscriptionClick=(e,s)=>{s&&(s.preventDefault(),s.stopPropagation());const{userId:a}=this.state;console.log("Subscription clicked:",e),console.log("User ID:",a),a?(console.log("Opening payment modal for:",e.toLowerCase()),this.setState({isPaymentModalOpen:!0,selectedPlan:e.toLowerCase()},()=>{console.log("Modal state updated:",this.state.isPaymentModalOpen),console.log("Selected plan:",this.state.selectedPlan)})):r.Ay.error("Please login to subscribe")},this.handlePaymentModalClose=(e,s)=>{if(console.log("Payment modal closing - Success:",e),console.log("Confirmation data:",s),this.setState({isPaymentModalOpen:!1,selectedPlan:null}),e&&s){const{payment:e,coinsAwarded:a,newBalance:n}=s;r.Ay.success("\ud83c\udf89 Welcome to ".concat(e.subscriptionPlan.toUpperCase()," plan!\n")+"\ud83d\udcb0 ".concat(a," coins added to your account\n")+"\ud83d\udcca New balance: ".concat(n," coins\n")+"\ud83d\udcc5 Valid until: ".concat(new Date(e.subscriptionEndDate).toLocaleDateString()),{duration:8e3}),console.log("Subscription Details:",{plan:e.subscriptionPlan,amount:e.amount,coinsAwarded:a,newBalance:n,startDate:e.subscriptionStartDate,endDate:e.subscriptionEndDate})}else e&&r.Ay.success("Payment successful! Your subscription has been activated.")},this.state={selectedCoinPlan:null,isPaymentModalOpen:!1,selectedPlan:null,userId:null}}componentDidMount(){var e,s;const a=null===(e=JSON.parse(localStorage.getItem("userData")))||void 0===e||null===(s=e.data)||void 0===s?void 0:s._id;this.setState({userId:a}),console.log("Metrimonial Membership Page Loaded - User ID:",a)}render(){const{selectedCoinPlan:e,isPaymentModalOpen:s,selectedPlan:a,userId:c}=this.state;return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(i.A,{}),(0,d.jsx)(u,{isOpen:s,onClose:this.handlePaymentModalClose,subscriptionPlan:a,userId:c}),(0,d.jsxs)("div",{className:"membership padding-top padding-bottom",children:[(0,d.jsxs)("div",{className:"container",style:{maxWidth:"1358px"},children:[(0,d.jsxs)("div",{className:"section__header style-2 text-center",children:[(0,d.jsx)("h2",{children:"Membership Levels"}),(0,d.jsx)("p",{children:"Our metrimony platform is like a breath of fresh air. Clean and trendy design with ready to use features we are sure you will love."})]}),(0,d.jsx)("div",{className:"section__wrapper",children:(0,d.jsxs)("div",{className:"row g-4 justify-content-center row-cols-xl-4 row-cols-lg-3 row-cols-sm-2 row-cols-1",children:[f.map((s,a)=>(0,d.jsx)("div",{className:"col ".concat(e===a?"selected-coin-plan":""),onClick:()=>this.handleSelectPlan(a),children:(0,d.jsx)("div",{className:"membership__item",children:(0,d.jsxs)("div",{className:"membership__inner",children:[(0,d.jsxs)("div",{className:"membership__head",children:[(0,d.jsx)("h4",{children:s.daycount}),(0,d.jsx)("p",{children:s.perMonth})]}),(0,d.jsx)("div",{className:"membership__body",children:(0,d.jsx)("ul",{children:s.faciList.map((e,s)=>(0,d.jsxs)("li",{className:"pointer",style:{paddingTop:"21px",paddingBottom:"21px"},children:[(0,d.jsx)("i",{className:e.iconName}),(0,d.jsx)("span",{className:"px-2",children:e.text}),(0,d.jsx)("span",{className:"px-2",children:e.offer}),(0,d.jsx)("img",{src:"https://png.pngtree.com/png-clipart/20220823/original/pngtree-flying-gold-coin-png-png-image_8447452.png",alt:"",style:{width:"90px",height:"45px"}})]},s))})}),(0,d.jsx)("div",{className:"membership__footer",children:(0,d.jsx)("button",{type:"button",className:"default-btn reverse",style:{border:"none",width:"100%",cursor:"pointer"},onClick:()=>r.Ay.info("Coin plans coming soon!"),children:(0,d.jsx)("span",{children:s.btnText})})})]})})},a)),x.map((e,s)=>(0,d.jsx)("div",{className:"col",children:(0,d.jsx)("div",{className:"membership__item",children:(0,d.jsxs)("div",{className:"membership__inner",children:[(0,d.jsxs)("div",{className:"membership__head",children:[(0,d.jsx)("h4",{children:e.daycount}),(0,d.jsx)("p",{children:e.perMonth})]}),(0,d.jsxs)("div",{className:"membership__body",children:[(0,d.jsx)("h4",{children:e.price}),(0,d.jsx)("ul",{children:e.faciList.map((e,s)=>(0,d.jsxs)("li",{children:[(0,d.jsx)("i",{className:e.iconName})," ",(0,d.jsx)("span",{children:e.text})]},s))})]}),(0,d.jsx)("div",{className:"membership__footer",children:(0,d.jsx)("button",{type:"button",className:"default-btn reverse",style:{border:"none",width:"100%",cursor:"pointer"},onClick:s=>this.handleSubscriptionClick(e.daycount,s),children:(0,d.jsx)("span",{children:e.btnText})})})]})})},s))]})})]}),(0,d.jsx)("div",{className:"purchase_history_wrap"})]}),(0,d.jsx)(t.A,{})]})}}const b=y}}]);
//# sourceMappingURL=23.55ccff4a.chunk.js.map