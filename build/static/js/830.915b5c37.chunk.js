"use strict";(self.webpackChunkMatchup=self.webpackChunkMatchup||[]).push([[830],{2481:(e,s,o)=>{o.d(s,{A:()=>g});var l=o(5043),t=o(9456),a=o(2),i=o(5475),r=o(3768),n=o(3463),d=o(3829),c=o(8408),m=o(7459),u=o(870),h=o(2520),v=o(579);const g=e=>{var s,o,g,x,p,j,f,y,N;let{showModal:w,editIndex:b,ViewUser:C,setEditIndex:I,hideModal:S,calenderScheduleDAte:_,selectedUser:k,selectedMemberForEvent:A,userInfoDate:U,scheduledData:M}=e;const E=(0,t.wA)(),D=(0,t.d4)(e=>e.profile.userData),Y=localStorage.getItem("userData"),T=JSON.parse(Y),R=(0,t.d4)(e=>e);(0,t.d4)(e=>{var s,o;return(null===R||void 0===R||null===(s=R.activies)||void 0===s||null===(o=s.Activity)||void 0===o?void 0:o.data)||[]});(0,l.useEffect)(()=>{E((0,c.yB)({modeid:d.o4,id:T.data._id}))},[T.data._id]);const F={user:D,selectUser:null!==b?null===C||void 0===C?void 0:C.receiverUserId:A||(null===k||void 0===k?void 0:k.receiverUserId),scheduledData:M};return(0,v.jsx)(a.A,{show:w,onHide:S,centered:!0,children:(0,v.jsxs)("div",{className:"main",style:{position:"relative"},children:[(0,v.jsx)("span",{onClick:S,style:{position:"absolute",right:"20px",top:"8px",color:"#213366",cursor:"pointer"},children:(0,v.jsx)("i",{className:"fa fa-times fs-3 modal-cls","aria-hidden":"true"})}),(0,v.jsxs)("div",{className:"svg-top ",children:[(0,v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"330",height:"405",viewBox:"0 0 330 405",fill:"none",className:"sched-modal",children:[(0,v.jsx)("path",{d:"M192.069 338.654C43.1066 317.937 22.2553 364.484 0.00750924 404.24L7.50122e-09 20.0255C-0.000299446 8.96583 8.96523 0 20.0248 0H309.519C320.577 0 329.544 8.96583 329.544 20.0245L329.543 243.055C325.491 286.302 295.076 352.979 192.069 338.654Z",fill:"#D6B6F9"}),(0,v.jsx)("defs",{children:(0,v.jsxs)("linearGradient",{id:"gradient-col",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[(0,v.jsx)("stop",{offset:"0%",style:{stopColor:"#F093FB"}}),(0,v.jsx)("stop",{offset:"100%",style:{stopColor:"#f24570"}})]})})]}),(0,v.jsxs)("div",{className:"upperData matched-modal",children:[(0,v.jsx)("h3",{style:{zIndex:"999999"},children:"You\u2019re Matched"}),(0,v.jsx)("p",{children:"You and Desirae have both liked each other"}),(0,v.jsxs)("div",{className:"coll row",children:[(0,v.jsxs)("div",{className:"col-md-8 mod-person-lft col-8",children:[(0,v.jsxs)("p",{className:"fs-4 text-muted fw-600 per-txt",children:[" ",(null===D||void 0===D?void 0:D.name)||""]}),(0,v.jsxs)("p",{className:"fs-4 text-muted fw-600 per-dest",children:[" ",(null===D||void 0===D?void 0:D.occupation)||""]}),(0,v.jsxs)("p",{className:"fs-4 text-muted fw-600 location ",children:[(0,v.jsx)("span",{children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:(0,v.jsx)("path",{d:"M3.91737 0.696289C1.75734 0.696289 0 2.45151 0 4.61014C0 7.49576 3.61369 10.929 3.76886 11.0742C3.81171 11.1122 3.86501 11.1333 3.91737 11.1333C3.97067 11.1333 4.02588 11.1122 4.06682 11.0742C4.222 10.929 7.83569 7.50476 7.83569 4.61014C7.83569 2.45151 6.07834 0.696289 3.91737 0.696289ZM3.91737 6.37335C2.94444 6.37335 2.15242 5.58237 2.15242 4.61014C2.15242 3.63696 2.94444 2.84698 3.91737 2.84698C4.89124 2.84698 5.68233 3.63696 5.68233 4.61014C5.68233 5.58237 4.89124 6.37335 3.91737 6.37335Z",fill:"white"})})}),(null===D||void 0===D?void 0:D.address)||"New York"]})]}),(0,v.jsx)("div",{className:"col-md-4 col-4 modal-imgg-wrap",children:(0,v.jsx)("div",{className:"girl ",children:(0,v.jsx)("img",{src:null!==D&&void 0!==D&&D.mainAvatar?`${m.C}/assets/images/${null===D||void 0===D?void 0:D.mainAvatar}`:null!==D&&void 0!==D&&null!==(s=D.avatars)&&void 0!==s&&s[0]?`${m.C}/assets/images/${null===D||void 0===D?void 0:D.avatars[0]}`:n,alt:"dating thumb"})})})]}),(0,v.jsx)("div",{className:" col6 heart-svg",children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"23",viewBox:"0 0 24 23",fill:"none",children:(0,v.jsx)("path",{d:"M21.3406 2.97626C18.7864 0.422095 14.7424 0.178778 11.9449 2.30744C9.11644 0.208838 5.10345 0.422095 2.51825 2.97626C-0.278217 5.77375 -0.278217 10.3644 2.51825 13.1619L11.1239 21.7666L11.9139 22.5576L21.3406 13.1319C24.1681 10.3644 24.1681 5.80378 21.3406 2.97626ZM19.7897 11.611L14.1947 17.2059C13.9514 15.8072 13.2826 14.4395 12.6438 13.1319C11.154 10.061 9.87738 7.41575 12.7349 4.55723L12.9172 4.37501C14.8636 2.61082 17.9043 2.67188 19.7897 4.55723C21.7351 6.50263 21.7351 9.66556 19.7897 11.611Z",fill:"white"})})}),(0,v.jsxs)("div",{className:"row rt2",children:[(0,v.jsx)("div",{className:"col-md-4 col-4 modal-imgg-wrap",children:(0,v.jsx)("img",{className:"img2 rounded-50",src:null!==F&&void 0!==F&&null!==(o=F.selectUser)&&void 0!==o&&o.mainAvatar?`${m.C}/assets/images/${null===F||void 0===F||null===(g=F.selectUser)||void 0===g?void 0:g.mainAvatar}`:null!==F&&void 0!==F&&null!==(x=F.selectUser)&&void 0!==x&&null!==(p=x.avatars)&&void 0!==p&&p[0]?`${m.C}/assets/images/${null===F||void 0===F||null===(j=F.selectUser)||void 0===j?void 0:j.avatars[0]}`:n,alt:""})}),(0,v.jsxs)("div",{className:"col-md-8 mod-person-rt col-8",children:[(0,v.jsx)("p",{className:"fs-4 text-muted fw-600 per-txt",children:(null===F||void 0===F||null===(f=F.selectUser)||void 0===f?void 0:f.name)||"not found"}),(0,v.jsx)("p",{className:"fs-4 text-muted fw-600 per-dest",children:(null===F||void 0===F||null===(y=F.selectUser)||void 0===y?void 0:y.occupation)||""}),(0,v.jsxs)("p",{className:"fs-4 text-muted fw-600 location",children:[(0,v.jsx)("span",{className:"location2",children:(0,v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",children:(0,v.jsx)("path",{d:"M3.91737 0.696289C1.75734 0.696289 0 2.45151 0 4.61014C0 7.49576 3.61369 10.929 3.76886 11.0742C3.81171 11.1122 3.86501 11.1333 3.91737 11.1333C3.97067 11.1333 4.02588 11.1122 4.06682 11.0742C4.222 10.929 7.83569 7.50476 7.83569 4.61014C7.83569 2.45151 6.07834 0.696289 3.91737 0.696289ZM3.91737 6.37335C2.94444 6.37335 2.15242 5.58237 2.15242 4.61014C2.15242 3.63696 2.94444 2.84698 3.91737 2.84698C4.89124 2.84698 5.68233 3.63696 5.68233 4.61014C5.68233 5.58237 4.89124 6.37335 3.91737 6.37335Z",fill:"white"})})}),(null===F||void 0===F||null===(N=F.selectUser)||void 0===N?void 0:N.address)||""]})]})]})]}),(0,v.jsxs)("div",{className:"date-time-wrap",children:[(0,v.jsxs)("p",{className:"date-modal",children:[(0,v.jsx)("i",{class:"fas fa-calendar-alt"}),(null===M||void 0===M?void 0:M.date)||"02-02-2026"]}),(0,v.jsxs)("p",{className:"time-modal",children:[(0,v.jsx)("i",{class:"fas fa-clock"}),(null===M||void 0===M?void 0:M.time)||"05:00 PM"]}),(0,v.jsxs)("p",{className:"loc-modal",children:[(0,v.jsx)("i",{class:"fas fa-map-marker-alt"}),(null===M||void 0===M?void 0:M.venue)||"New York"]})]}),(0,v.jsxs)("div",{className:"main-bottom",children:[(0,v.jsx)(i.N_,{onClick:S,children:(0,v.jsx)("button",{className:"send-msg-btn",children:(0,v.jsx)("p",{className:"content",children:"Send a Message"})})}),(0,v.jsx)(i.N_,{children:(0,v.jsx)("button",{onClick:async e=>{var s,o;e.preventDefault();const l={senderUserId:(null===D||void 0===D?void 0:D._id)||(null===D||void 0===D?void 0:D.id)||T.data._id,receiverUserId:(null===F||void 0===F||null===(s=F.selectUser)||void 0===s?void 0:s._id)||(null===F||void 0===F||null===(o=F.selectUser)||void 0===o?void 0:o.id)||"",action_logs:"Scheduled via app",description:(null===M||void 0===M?void 0:M.description)||"1st meet",note:(null===M||void 0===M?void 0:M.note)||"User scheduled a date",mode:(null===M||void 0===M?void 0:M.mode)||"68d103ffaa4b176726e60424"};try{const e=await E((0,u.lh)(l)),s=(0,h.pH)(e);var t;if(!0===s.isSuccess)E((0,u.fd)(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.senderUserId)),r.Ay.success("Schedule date successfully updated"),S();else r.Ay.error("Failed to schedule event")}catch(a){console.error("Promise error during createEvent:",a),r.Ay.error("Failed to schedule event")}},className:"schedule-date",children:(0,v.jsx)("p",{className:"celender schedulename",children:"Submit"})})})]})]})]})})}},7748:(e,s,o)=>{o.d(s,{A:()=>i});var l=o(5043),t=o(9766),a=o(579);const i=function(){const[e,s]=(0,l.useState)("10:00");return(0,a.jsx)("div",{className:"Apps",children:(0,a.jsx)(t.TimePicker,{onChange:e=>{s(e)},value:e})})}},8858:(e,s,o)=>{o.r(s),o.d(s,{default:()=>K});var l=o(5043),t=o(9805),a=o(3360),i=o(1669),r=o(4258),n=o(2104),d=o(1468),c=o(739),m=o(1028),u=o(2833),h=o(7602),v=o(9311),g=o(1936),x=o(6829),p=o(8174),j=o(6219),f=o(2627),y=o(2794);const N=o.p+"static/media/marrage-chat-bg.2f7cb3016da30c3563dc.jpg";var w=o(3463),b=o(9456),C=o(5475),I=o(2),S=o(5826),_=(o(6555),o(579));const k=e=>{let{message:s,onClose:o}=e;return(0,_.jsxs)("div",{className:"position-fixed top-50 start-50 translate-middle",style:{backgroundColor:"#ffff",padding:"20px",borderRadius:"10px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.3)",textAlign:"center",width:"80%",maxWidth:"400px"},children:[(0,_.jsx)("p",{children:s}),(0,_.jsx)("button",{style:{color:"#f24570"},className:"btn btn-",onClick:o,children:"OK"})]})},A=e=>{let{showModal:s,hideModal:o}=e;const[t,a]=(0,l.useState)(null),i=["Do you prefer to be a protector or nurturer in your relationships?","What is your ideal date night?","How do you handle conflicts in a relationship?","What is your love language?","How important is physical affection in a relationship?"],r=[["Protector","Nurturer","Sometimes protector, sometimes nurturer","Don\u2019t Care"],["Dinner and a movie","Outdoor adventure","Cooking together at home","Netflix and chill"],["I confront the issue directly","I prefer to avoid conflicts","I compromise and find a middle ground"],["Words of affirmation","Acts of service","Receiving gifts","Quality time","Physical touch"],["Very important","Moderately important","Not important"]],[n,d]=(0,l.useState)(0),[c,m]=(0,l.useState)(0),[u,h]=(0,l.useState)(Array(r.length).fill());return(0,_.jsxs)(I.A,{show:s,onHide:o,centered:!0,children:[t&&(0,_.jsx)(k,{message:t.message,onClose:()=>a(null)}),(0,_.jsx)("span",{onClick:o,children:(0,_.jsx)("i",{className:"fa fa-times fs-3","aria-hidden":"true",style:{cursor:"pointer",float:"right",padding:"15px 25px 0 0"}})}),0===c&&(0,_.jsxs)("div",{className:"container px-3 pb-3 px-sm-5 pb-sm-5",children:[(0,_.jsxs)("div",{className:" ",children:[(0,_.jsx)("div",{className:"col-12",children:(0,_.jsx)("p",{className:"text-center text-dark fs-3",children:"Compatibility Quiz"})}),(0,_.jsx)("div",{className:"col-12 px-3 px-sm-5",children:(0,_.jsx)("p",{className:"text-center",children:"Answer at least 5 questions & find out how compatible you are with other users"})})]}),(0,_.jsxs)("div",{className:"compatibility-quiz-box mx-3",children:[(0,_.jsxs)("div",{className:"top-quiz mb-2",children:[(0,_.jsx)("p",{className:"top-quiz-req-que text-muted",children:`Required question ${n+1}/${i.length}`}),(0,_.jsx)("br",{}),(0,_.jsx)("p",{className:"top-quiz-que my-2",children:i[n]})]}),(0,_.jsx)("div",{className:"py-2",children:r[n].map((e,s)=>(0,_.jsx)("p",{className:"rounded-4 top-quiz-option pointer py-3 ps-4 "+(u[n]===e?"selected-option":""),onClick:()=>(e=>{const s=[...u];s[n]=r[n][e],h(s)})(s),style:{backgroundColor:u[n]===e?"#f24570":"whitesmoke",color:u[n]===e?"white":"black",fontSize:"1rem"},children:e},s))}),(0,_.jsxs)("div",{children:[n>0&&(0,_.jsx)("button",{className:"default-btn reverse mt-4",style:{float:"left"},onClick:()=>{n>0&&d(n-1)},children:(0,_.jsx)("span",{children:"Prev"})}),(0,_.jsx)("button",{className:"default-btn reverse mt-4 ",style:{float:"right"},onClick:()=>{if(n<i.length-1)if(void 0===u[n]){a({message:"Please answer the current question before moving to the next one."})}else d(n+1);else if(u.every(e=>void 0!==e))m(1);else{a({message:"Please answer all questions before submitting."})}},children:(0,_.jsx)("span",{children:n===i.length-1?"Submit":"Next"})})]})]})]}),1===c&&(0,_.jsxs)("div",{className:"pb-5",children:[(0,_.jsxs)("div",{className:"container px-5",children:[(0,_.jsx)("div",{className:"my-2",children:(0,_.jsx)("div",{style:{width:"150px",margin:"auto"},children:(0,_.jsx)(S.QF,{maxValue:100,strokeWidth:10,value:60,counterClockwise:!1,background:!1,backgroundPadding:10,text:"60%",styles:(0,S.Hf)({textColor:"#f24570",pathColor:"#f24570",trailColor:"whitesmoke"})})})}),(0,_.jsx)("div",{className:"my-2 mt-5",children:(0,_.jsx)("h6",{children:"Things you have in common : "})}),(0,_.jsxs)("div",{className:" ps-3 my-2 mt-3",children:[(0,_.jsx)("p",{children:"1. You both agree that when it comes to love, it always requires hard work!"}),(0,_.jsx)("p",{children:"2. You both value work-life balance over success!"})]})]}),(0,_.jsx)("hr",{className:"my-2"}),(0,_.jsxs)("div",{className:"container px-5",children:[(0,_.jsx)("p",{className:"text-dark fs-5 mt-2",children:"details"}),(0,_.jsx)("p",{className:"ps-3",children:"Your score suggests that there is likely a low-moderate level of potential compatibility between you and this person when it comes to several important elements of successful relationships. It is a long-established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English."})]})]})]})},U=[{text:"Started a beautiful journey together",activity:"2 days ago"},{text:"Celebrated the first month of happiness",activity:"2 days ago"},{text:"Shared special moments with each other's families",activity:"2 days ago"},{text:"Embarked on a romantic trip together",activity:"2 days ago"},{text:"Decided to share a home and move in together",activity:"2 days ago"},{text:"Took a step forward and got engaged",activity:"2 days ago"},{text:"Tied the knot and became a married couple",activity:"2 days ago"},{text:"Welcomed their first bundle of joy into the world",activity:"2 days ago"},{text:"Celebrated the joyous 5-year milestone together",activity:"2 days ago"},{text:"Still going strong after a decade of love!",activity:"2 days ago"}],M=e=>{let{showModal:s,hideModal:o,selectedUser:t}=e;const[i,r]=(0,l.useState)(5),n=U.length;return(0,_.jsxs)(I.A,{className:"me-2",show:s,onHide:o,centered:!0,size:"lg",children:[(0,_.jsx)("span",{onClick:o,children:(0,_.jsx)("i",{className:"fa fa-times fs-3","aria-hidden":"true",style:{cursor:"pointer",color:"white",float:"right",right:"0px",padding:"15px 25px 0 0",position:"absolute"}})}),(0,_.jsx)("div",{className:"activity ",children:(0,_.jsxs)("div",{className:"container",children:[(0,_.jsxs)("div",{class:"jumbotron p-lg-4 p-2 rounded-2",children:[(0,_.jsx)("p",{class:"display-5",children:"Relationship Milestone Tracker"}),(0,_.jsx)("p",{class:"lead",children:"Track and celebrate the special moments in your relationship journey."})]}),(0,_.jsx)("div",{className:"row g-4 pb-2",children:(0,_.jsx)(a.Ay,{autoHide:!0,style:{position:"relative",height:"530px"},children:(0,_.jsx)("div",{className:"col-lg-12",children:(0,_.jsx)("div",{className:"group__bottom--area",children:(0,_.jsx)("div",{className:"group__bottom--body bg-white",children:(0,_.jsxs)("div",{className:"group__bottom--group",children:[(0,_.jsx)("div",{className:"row g-4 justify-content-center mx-12-none row-cols-1",children:U.slice(0,i).map((e,s)=>(0,_.jsx)("div",{className:"col",children:(0,_.jsx)("div",{className:"activity__item",children:(0,_.jsxs)("div",{className:"activity__inner",children:[(0,_.jsx)("div",{className:"activity__thumb",children:(0,_.jsx)(C.N_,{to:"/member-single",children:(0,_.jsx)("img",{src:t?t.avatars:null,alt:`${e.imgAlt}`})})}),(0,_.jsxs)("div",{className:"activity__content",children:[(0,_.jsxs)("h5",{children:[(0,_.jsx)(C.N_,{to:"/dating/members",children:t?t.name:null}),(0,_.jsx)("span",{children:"and "})," "," You"," ",(0,_.jsx)("span",{children:e.text})]}),(0,_.jsx)("p",{children:e.activity})]})]})})},s))}),(0,_.jsx)("div",{className:"text-center mt-5",children:i<n&&(0,_.jsx)("a",{href:"#",className:"default-btn reverse",onClick:()=>{const e=i+5;r(Math.min(e,n))},children:(0,_.jsxs)("span",{children:[(0,_.jsx)("i",{className:"fa-solid fa-spinner"})," ","Load More"]})})})]})})})})})})]})})]})};var E=o(4282),D=o(3216),Y=o(4329);const T=e=>{let{showModal:s,hideModal:o,selectedUser:l}=e;console.log("selectedUser111",l);const t=(0,b.wA)();(0,D.Zp)();return(0,_.jsxs)(I.A,{show:s,onHide:o,centered:!0,children:[(0,_.jsx)(I.A.Header,{closeButton:!0,children:(0,_.jsx)(I.A.Title,{children:"Block Confirmation"})}),(0,_.jsx)(I.A.Body,{children:(0,_.jsxs)("div",{className:"alert alert-danger",children:["Are you sure want to block ",(0,_.jsx)("span",{className:"fs-5",children:l?l.name:null})]})}),(0,_.jsxs)(I.A.Footer,{style:{justifyContent:"space-between"},children:[(0,_.jsx)(E.A,{variant:"default",style:{border:"1px solid #d5d5d5c2"},onClick:o,children:"Cancel"}),(0,_.jsx)(E.A,{variant:"danger",onClick:()=>{var e;const s=null===l||void 0===l||null===(e=l.receiverUserId)||void 0===e?void 0:e._id;s&&t((0,Y.rn)(s)).unwrap().then(()=>{o()}).catch(e=>{console.error("Block user failed:",e)})},children:"Block"})]})]})};var R=o(3814);const F=e=>{let{showModal:s,hideModal:o}=e;const[t,a]=(0,l.useState)(""),[i,r]=(0,l.useState)("");return(0,_.jsxs)(I.A,{show:s,onHide:o,centered:!0,children:[(0,_.jsx)("span",{onClick:o,children:(0,_.jsx)("i",{className:"fa fa-times fs-3","aria-hidden":"true",style:{cursor:"pointer",float:"right",padding:"15px 25px 0 0"}})}),(0,_.jsx)("div",{className:"container px-5 pb-5",children:(0,_.jsxs)("div",{className:"row",children:[(0,_.jsx)("div",{className:"col-12",children:(0,_.jsx)("p",{className:"text-center text-dark fs-3",children:"Report User"})}),(0,_.jsx)("div",{className:"col-12 px-5",children:(0,_.jsx)("p",{className:"text-center",children:"Are you sure you want to report this user?"})}),(0,_.jsxs)(R.A.Group,{controlId:"reportReason",children:[(0,_.jsx)(R.A.Label,{children:"Select a reason:"}),(0,_.jsxs)(R.A.Control,{className:"custom-reportUser-modal",as:"select",value:t,onChange:e=>a(e.target.value),children:[(0,_.jsx)("option",{value:"",disabled:!0,children:"Select a reason..."}),["Inappropriate Content","Harassment","Fake Profile","Spam","Other (Please Specify)"].map(e=>(0,_.jsx)("option",{value:e,children:e},e))]})]}),(0,_.jsx)("span",{className:"mt-4"}),(0,_.jsxs)(R.A.Group,{controlId:"additionalDetails",children:[(0,_.jsx)(R.A.Label,{children:"Additional Details (optional):"}),(0,_.jsx)(R.A.Control,{className:"custom-reportUser-modal",as:"textarea",rows:3,value:i,onChange:e=>r(e.target.value),placeholder:"Provide more details about the report..."})]}),(0,_.jsx)("div",{className:"container",children:(0,_.jsxs)("div",{className:"row share-user-profile-modal-svg-div",style:{justifyContent:"space-between"},children:[(0,_.jsx)("div",{className:"col-6 text-center mt-4",children:(0,_.jsx)(E.A,{variant:"default",onClick:o,style:{border:"1px solid #d5d5d5c2"},children:"Cancel"})}),(0,_.jsx)("div",{className:"col-6 text-center mt-4",children:(0,_.jsx)(E.A,{variant:"danger",onClick:()=>{o()},children:"Report User"})})]})})]})})]})};var $=o(3768),L=o(2161),z=o(7748);const B=e=>{let{showModal:s,hideModal:o}=e;const[t,a]=(0,l.useState)(!1),[i,r]=(0,l.useState)(new Date),[n,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(new Date),u=()=>{d(!n)},[h,v]=(0,l.useState)("10:00"),g=[{address:"Empire State Building, 20 W 34th St New York, NY 10001"},{address:"Times Square , Manhattan, NY 10036"},{address:"Statue of Liberty,  New York, NY 10004"},{address:"Brooklyn Bridge,  New York, NY 10038"},{address:"The Metropolitan Museum of Art,  1000 5th Ave, New York, NY 10028"},{address:"Grand Central Terminal,  89 E 42nd St, New York, NY 10017"},{address:"Central Park,  59th St to 110th St, New York, NY 10022"}],x=e=>{let{selectedVenue:s,onClose:o}=e;return(0,_.jsxs)("div",{className:"popup-venue",children:[(0,_.jsx)("span",{className:"close",onClick:o,children:"\xd7"}),(0,_.jsxs)("p",{children:[" ",(0,_.jsx)("i",{class:"fa-solid fa-location-dot fa-xl",style:{color:"#B197FC"}})," ",s.address]})]})},[p,j]=(0,l.useState)(null),[f,y]=(0,l.useState)(!1),N=()=>{const e=Math.floor(Math.random()*g.length);j(g[e]),y(!0)};return(0,_.jsx)(I.A,{show:s,onHide:o,centered:!0,children:n?t?(0,_.jsx)("div",{className:"clockArea"}):(0,_.jsx)("div",{className:"calenderArea",children:(0,_.jsx)(L.Ay,{dateFormat:"DD/MM/YYYY",onChange:e=>{r(e),d(!1)},value:i})}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"main-calander",style:{position:"relative",padding:"20px"},children:[(0,_.jsx)("span",{onClick:o,style:{position:"absolute",right:"10px",top:"5px"},children:(0,_.jsx)("i",{className:"fa fa-times fs-3","aria-hidden":"true"})}),(0,_.jsxs)("div",{className:"Data-1",children:[(0,_.jsx)("h5",{className:"fs-4 text-muted fw-700",children:"Schedule Your Virtual Date for Meaningful Connections!"}),(0,_.jsxs)("div",{className:"settime",children:[(0,_.jsx)(z.A,{}),(0,_.jsx)("span",{className:"clock-icon",onClick:e=>{v(e)},value:h,children:(0,_.jsx)("i",{class:"fa-solid fa-clock fa-xl",style:{color:"#B197FC"}})})]}),(0,_.jsxs)("div",{className:"setdate",children:[(0,_.jsx)("input",{className:"date",type:"",dateFormat:"DD/MM/YYYY",placeholder:"Choose Date",value:i.toLocaleDateString(),onClick:u}),(0,_.jsx)("span",{className:"calander-icon",onClick:u,children:(0,_.jsx)("i",{class:"fa-regular fa-calendar-days fa-xl",style:{color:"#B197FC"}})})]}),(0,_.jsxs)("div",{className:"setVenue",children:[(0,_.jsx)("input",{className:"date",type:"",placeholder:"Choose Venue",onClick:N}),(0,_.jsx)("div",{className:"Apps",children:f&&p&&(0,_.jsx)(x,{selectedVenue:p,onClose:()=>{y(!1)}})}),(0,_.jsx)("span",{className:"calander-icon",onClick:N,children:(0,_.jsx)("i",{class:"fa-solid fa-location-dot fa-xl",style:{color:"#B197FC"}})})]})]})]}),(0,_.jsx)("div",{className:"btn",onClick:e=>{e.preventDefault();try{$.Ay.success("schedule date successfully updated"),o(o)}catch(s){console.error("Error updating Contact profile:",s),$.Ay.error("Failed to update Contact info")}},children:(0,_.jsx)("button",{className:"date-btn",children:(0,_.jsx)("p",{className:"date-content",children:"Schedule Date"})})})]})})};var H=o(8331),O=o(2942);const W=e=>(0,_.jsx)("div",{className:"",children:(0,_.jsx)(O.OG,{visible:!0,height:"100",width:"100",color:"#f24570",secondaryColor:"#FCD9E2",radius:"12.5",ariaLabel:"mutating-dots-loading",wrapperStyle:{margin:"auto",position:"fixed",top:"50%",left:"60%",transform:"translate(-50%, -50%)",zIndex:9999},wrapperClass:""})});var P=o(9866),q=o(2481);const V=e=>{let{show:s,onHide:o}=e;return(0,_.jsxs)(I.A,{show:s,onHide:o,centered:!0,className:"incoming-call-modal",children:[(0,_.jsx)(I.A.Header,{closeButton:!0,children:(0,_.jsx)(I.A.Title,{children:"Incoming Call"})}),(0,_.jsx)(I.A.Body,{children:(0,_.jsxs)("div",{className:"call-info",children:[(0,_.jsxs)("p",{children:[(0,_.jsx)("strong",{children:"John Doe"})," is calling..."]}),(0,_.jsx)("p",{children:"Incoming Call - Audio"})]})}),(0,_.jsxs)(I.A.Footer,{children:[(0,_.jsx)(E.A,{variant:"success",onClick:()=>console.log("Answer call"),children:"Answer"}),(0,_.jsx)(E.A,{variant:"danger",onClick:o,children:"Decline"})]})]})},J=e=>{let{show:s,onHide:o}=e;return(0,_.jsxs)(I.A,{show:s,onHide:o,centered:!0,className:"video-call-modal",children:[(0,_.jsx)(I.A.Header,{closeButton:!0,children:(0,_.jsx)(I.A.Title,{children:"Video Call"})}),(0,_.jsxs)(I.A.Body,{children:[(0,_.jsxs)("div",{className:"video-call-container",children:[(0,_.jsx)("div",{className:"video-feed",children:(0,_.jsx)("p",{children:"Your video feed will appear here"})}),(0,_.jsx)("div",{className:"video-feed",children:(0,_.jsx)("p",{children:"John Doe's video feed will appear here"})})]}),(0,_.jsx)("div",{className:"call-info",children:(0,_.jsxs)("p",{children:[(0,_.jsx)("strong",{children:"John Doe"})," is calling..."]})})]}),(0,_.jsxs)(I.A.Footer,{children:[(0,_.jsx)(E.A,{variant:"success",onClick:()=>console.log("Start Video Call"),children:"Start Video Call"}),(0,_.jsx)(E.A,{variant:"danger",onClick:o,children:"Decline"})]})]})};var G=o(7459);const Z="http://38.242.230.126:4457";function K(){var e;const s=(0,b.wA)(),[o,I]=(0,l.useState)(""),[S,k]=(0,l.useState)([]);console.log("chatMessages",S);const[U,E]=(0,l.useState)({}),[D,R]=(0,l.useState)(!1),[$,L]=(0,l.useState)([]),[z,O]=(0,l.useState)(null),K=(0,l.useRef)(null),[Q,X]=(0,l.useState)(!1),[ee,se]=(0,l.useState)(!1),[oe,le]=(0,l.useState)(!1),[te,ae]=(0,l.useState)(!1),[ie,re]=(0,l.useState)(!1),[ne,de]=(0,l.useState)(!1),[ce,me]=(0,l.useState)(new Date),[ue,he]=(0,l.useState)(!1),[ve,ge]=(0,l.useState)(!1),[xe,pe]=(0,l.useState)(null),[je,fe]=(0,l.useState)(!1),[ye,Ne]=(0,l.useState)(""),[we,be]=(0,l.useState)([]),[Ce,Ie]=(0,l.useState)(!0),[Se,_e]=(0,l.useState)(!0),[ke,Ae]=(0,l.useState)(null),[Ue]=(0,l.useState)([]),[Me,Ee]=(0,l.useState)(null),[De,Ye]=(0,l.useState)(!1),[Te,Re]=(0,l.useState)(null),[Fe,$e]=(0,l.useState)(!1),[Le,ze]=(0,l.useState)([]),[Be,He]=(0,l.useState)(null),[Oe,We]=(0,l.useState)([]),Pe=Le.find(e=>e.roomId===Me),qe=null===Pe||void 0===Pe||null===(e=Pe.otherUser)||void 0===e?void 0:e.name;console.log("replyingToMessage",Oe);const[Ve,Je]=(0,l.useState)({page:1,limit:50,total:0,pages:0}),[Ge,Ze]=(0,l.useState)(!1),[Ke,Qe]=(0,l.useState)(!1),Xe=(0,b.d4)(e=>e.block.blockedUsers),es=Array.isArray(Xe)?Xe:[],ss=(e,s)=>{try{const o=`chat_history_${e}`,l={messages:s,timestamp:(new Date).toISOString(),userId:null===is||void 0===is?void 0:is._id};localStorage.setItem(o,JSON.stringify(l)),console.log("\ud83d\udcbe Saved chat history to localStorage for room:",e,"Messages:",s.length)}catch(o){console.error("\u274c Failed to save chat to localStorage:",o)}},os=e=>{try{const s=`chat_history_${e}`,o=localStorage.getItem(s);if(o){const l=JSON.parse(o),t=new Date-new Date(l.timestamp),a=864e5;if(l.userId===(null===is||void 0===is?void 0:is._id)&&t<a)return console.log("\ud83d\udcc2 Loaded chat history from localStorage for room:",e,"Messages:",l.messages.length),l.messages;localStorage.removeItem(s),console.log("\ud83d\uddd1\ufe0f Removed old/invalid chat data for room:",e)}}catch(s){console.error("\u274c Failed to load chat from localStorage:",s)}return[]},ls=(0,b.d4)(e=>e.profile.userData),ts=localStorage.getItem("userData"),as=JSON.parse(ts),is=null===as||void 0===as?void 0:as.data,rs=(0,b.d4)(e=>e);let ns=(0,b.d4)(e=>{var s,o;return(null===rs||void 0===rs||null===(s=rs.activies)||void 0===s||null===(o=s.Activity)||void 0===o?void 0:o.data)||[]});const ds=()=>{var e;return!(null===xe||void 0===xe||null===(e=xe.receiverUserId)||void 0===e||!e._id)&&es.some(e=>{var s,o;return(null===e||void 0===e||null===(s=e.blocked)||void 0===s?void 0:s._id)===(null===xe||void 0===xe||null===(o=xe.receiverUserId)||void 0===o?void 0:o._id)})},cs=async()=>{var e;if(null!==xe&&void 0!==xe&&null!==(e=xe.receiverUserId)&&void 0!==e&&e._id)try{var o,l;console.log(`Unblocking user from chat: ${null===xe||void 0===xe||null===(o=xe.receiverUserId)||void 0===o?void 0:o._id}`),await s((0,Y.kV)(null===xe||void 0===xe||null===(l=xe.receiverUserId)||void 0===l?void 0:l._id)).unwrap(),null!==is&&void 0!==is&&is._id&&s((0,Y.zw)(is._id))}catch(t){console.error("Failed to unblock user:",t)}},[ms,us]=(0,l.useState)(!1),[hs,vs]=(0,l.useState)(!1),gs=(0,l.useRef)(null),xs=()=>us(!0),ps=()=>us(!1),js=()=>vs(!0),fs=()=>vs(!1);(0,l.useEffect)(()=>{null!==is&&void 0!==is&&is._id&&s((0,Y.zw)(is._id))},[s,null===is||void 0===is?void 0:is._id]),(0,l.useEffect)(()=>{if(null!==is&&void 0!==is&&is._id)return(()=>{try{Object.keys(localStorage).filter(e=>e.startsWith("chat_history_")).forEach(e=>{try{const s=localStorage.getItem(e);if(s){const o=JSON.parse(s);(new Date-new Date(o.timestamp)>=864e5||o.userId!==(null===is||void 0===is?void 0:is._id))&&(localStorage.removeItem(e),console.log("\ud83d\uddd1\ufe0f Cleared old chat cache:",e))}}catch(s){localStorage.removeItem(e),console.log("\ud83d\uddd1\ufe0f Removed corrupted chat data:",e)}})}catch(e){console.error("\u274c Failed to clear old chat cache:",e)}})(),gs.current=(0,n.Ay)(Z,{query:{userId:is._id}}),gs.current.on("connect",()=>{console.log("Connected to chat server"),Qe(!0)}),gs.current.on("disconnect",()=>{console.log("Disconnected from chat server"),Qe(!1)}),gs.current.on("user_connected",e=>{console.log("User connected:",e),e.roomId===Me&&console.log("Other user joined the current room")}),gs.current.on("user_disconnected",e=>{console.log("User disconnected:",e),e.roomId===Me&&console.log("Other user left the current room")}),gs.current.on("room_created",e=>{console.log("Room created:",e)}),gs.current.on("room_list",e=>{console.log("My rooms:",e),ze(e||[])}),gs.current.on("room_joined",e=>{console.log("Room joined:",e),console.log("Current user ID:",is._id,"joined room:",e.roomId),e.roomId&&(console.log("Requesting chat history for joined room:",e.roomId),gs.current.emit("get_chat",{roomId:e.roomId,page:1,limit:50}))}),gs.current.on("new_message",e=>{var s,o,l;(console.log("New message received:",e),console.log("Current room:",Me),console.log("Message room ID:",e.roomId),console.log("Message data:",e.message),console.log("Message sender ID:",null===(s=e.message.senderId)||void 0===s?void 0:s._id),console.log("Current user ID:",is._id),(null===(o=e.message.senderId)||void 0===o?void 0:o._id)!==is._id&&(console.log("Message from other user - resetting restriction"),Ze(!1)),E(s=>{const o=[...s[e.roomId]||[],e.message];return ss(e.roomId,o),{...s,[e.roomId]:o}}),ze(s=>s.map(s=>s.roomId===e.roomId?{...s,lastMessage:{content:e.message.content||e.message.message,createdAt:e.message.createdAt||(new Date).toISOString(),senderId:e.message.senderId},updatedAt:(new Date).toISOString()}:s)),e.roomId===Me)?(console.log("Updating current chat messages"),(null===(l=e.message.senderId)||void 0===l?void 0:l._id)===is._id?k(s=>{const o=s.filter(e=>!e.isTemporary);return console.log("Removing temporary messages and adding real message"),[...o,e.message]}):k(s=>[...s,e.message]),Ss()):console.log("Message not for current room, storing in cache")}),gs.current.on("message_edited",e=>{console.log("Message edited:",e),E(s=>{var o;return{...s,[e.roomId]:(null===(o=s[e.roomId])||void 0===o?void 0:o.map(s=>s._id===e.message._id?e.message:s))||[]}}),e.roomId===Me&&k(s=>s.map(s=>s._id===e.message._id?e.message:s))}),gs.current.on("message_deleted",e=>{console.log("Message deleted:",e),E(s=>{var o;return{...s,[e.roomId]:(null===(o=s[e.roomId])||void 0===o?void 0:o.filter(s=>s._id!==e.messageId))||[]}}),e.roomId===Me&&k(s=>s.filter(s=>s._id!==e.messageId))}),gs.current.on("message_replied",e=>{var s,o;console.log("Message replied:",e),console.log("Reply sender ID:",null===(s=e.message.senderId)||void 0===s?void 0:s._id),console.log("Current user ID:",is._id),(null===(o=e.message.senderId)||void 0===o?void 0:o._id)!==is._id&&(console.log("Reply from other user - resetting restriction"),Ze(!1)),E(s=>{const o=[...s[e.roomId]||[],e.message];return ss(e.roomId,o),{...s,[e.roomId]:o}}),ze(s=>s.map(s=>s.roomId===e.roomId?{...s,lastMessage:{content:e.message.content||e.message.message,createdAt:e.message.createdAt||(new Date).toISOString(),senderId:e.message.senderId},updatedAt:(new Date).toISOString()}:s)),e.roomId===Me&&(console.log("Updating current chat messages with reply"),k(s=>[...s,e.message]),Ss())}),gs.current.on("chat_history",e=>{var s;if(console.log("Chat history received for room:",e.roomId,"Messages:",(null===(s=e.messages)||void 0===s?void 0:s.length)||0),console.log("Current room:",Me),console.log("Messages data:",e.messages),console.log("Pagination data:",e.pagination),e.messages&&e.messages.length>0){e.messages.some(e=>{var s;return(null===(s=e.senderId)||void 0===s?void 0:s._id)!==is._id})&&(console.log("Both users have exchanged messages - enabling unlimited chat"),Ze(!1))}e.pagination&&(Je(e.pagination),console.log("Updated pagination:",e.pagination));const o=!e.pagination||1===e.pagination.page;var l;(E(s=>{const l=s[e.roomId]||[],t=e.messages||[];let a;if(o)a=t;else{a=[...t,...l].filter((e,s,o)=>s===o.findIndex(s=>s._id===e._id))}return ss(e.roomId,a),{...s,[e.roomId]:a}}),e.roomId===Me)?(console.log("Updating current chat messages with:",(null===(l=e.messages)||void 0===l?void 0:l.length)||0,"messages"),k(o?e.messages||[]:s=>[...e.messages||[],...s].filter((e,s,o)=>s===o.findIndex(s=>s._id===e._id))),_e(!1),setTimeout(()=>Ss(),100)):console.log("Room ID mismatch - not updating current chat")}),gs.current.on("room_found",e=>{console.log("Room found via fallback:",e),e&&e.roomId&&(Ee(e.roomId),_e(!1),gs.current.emit("get_chat",{roomId:e.roomId,page:1,limit:50}))}),gs.current.on("user_typing",e=>{e.roomId===Me&&e.userId!==is._id&&(Re(e.userName),Ye(!0))}),gs.current.on("user_stopped_typing",e=>{e.roomId===Me&&e.userId!==is._id&&(Ye(!1),Re(null))}),gs.current.on("error",e=>{var s;(console.error("Socket error:",e),e.message&&e.message.includes("E11000 duplicate key error"))&&(console.log("Room already exists, trying to find existing room"),null===xe||void 0===xe||null===(s=xe.receiverUserId)||void 0===s||!s._id||Fe||Me?console.log("Skipping room search - already have room or creating one"):setTimeout(()=>{gs.current.emit("get_my_rooms",{userId:is._id})},500));e.message&&e.message.includes("not_allowed_more_messages")&&(console.log("Message sending restricted:",e.message),Ze(!0),k(e=>e.filter(e=>!e.isTemporary)),E(e=>{var s;return{...e,[Me]:(null===(s=e[Me])||void 0===s?void 0:s.filter(e=>!e.isTemporary))||[]}}),alert("You have reached the message limit. Please wait for the other user to respond to continue the conversation.")),e.message&&e.message.includes("chat_history")&&(console.log("Chat history error:",e.message),_e(!1))}),gs.current.emit("get_my_rooms",{userId:is._id}),()=>{gs.current&&gs.current.disconnect()}},[null===is||void 0===is?void 0:is._id,Me]),(0,l.useEffect)(()=>{if(Me&&gs.current)if(console.log("Room changed to:",Me),console.log("All messages cache:",U),U[Me]&&U[Me].length>0){const e=U[Me].filter(e=>!e.isTemporary);console.log("Loading cached messages for room:",Me,"Count:",e.length),k(e),_e(!1),setTimeout(()=>Ss(),100)}else{const e=os(Me);e.length>0?(console.log("\ud83d\udcc2 Loading messages from localStorage for room:",Me,"Count:",e.length),k(e),E(s=>({...s,[Me]:e})),_e(!1),setTimeout(()=>Ss(),100),gs.current.emit("join_room",{roomId:Me})):(console.log("No cached messages, joining room and fetching chat history:",Me),gs.current.emit("join_room",{roomId:Me}))}else console.log("No current room, clearing messages"),k([])},[Me,U]),(0,l.useEffect)(()=>{let e;return o.trim()&&Me&&gs.current&&(gs.current.emit("typing_start",{roomId:Me}),clearTimeout(e),e=setTimeout(()=>{gs.current&&gs.current.emit("typing_stop",{roomId:Me})},1e3)),()=>clearTimeout(e)},[o,Me]);const ys=()=>{le(!1),setTimeout(()=>{he(!0)},500)},Ns=()=>{le(!1),setTimeout(()=>{ae(!0)},500)},ws=()=>{R(!D)},bs=e=>{const{emoji:s}=e;I(e=>e+s)},Cs=e=>{const s=e.target.files;if(s.length>0){const e=s[0];O(e)}},Is=async e=>{var s;(null===xe||void 0===xe||null===(s=xe.receiverUserId)||void 0===s?void 0:s._id)!==e.receiverUserId._id&&(_e(!0),pe(e),Ee(null),k([]),Ye(!1),Re(null),$e(!1),(e=>{if(!gs.current||null===is||void 0===is||!is._id||!e)return void _e(!1);gs.current.off("rooms_list"),gs.current.off("room_created"),gs.current.off("room_error"),$e(!0);const s=function(){const s=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(s=>{var o;return(null===s||void 0===s||null===(o=s.otherUser)||void 0===o?void 0:o._id)===e});null!==s&&void 0!==s&&s.roomId?(Ee(s.roomId),gs.current.emit("join_room",{roomId:s.roomId}),_e(!1),$e(!1),t()):gs.current.emit("create_room",{userId:is._id,toUserId:e})},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=e.roomId||e._id||e.id;s&&(Ee(s),gs.current.emit("join_room",{roomId:s})),_e(!1),$e(!1),t()},l=e=>{var s;if(console.log("Room error:",e),null!==e&&void 0!==e&&null!==(s=e.message)&&void 0!==s&&s.includes("E11000 duplicate key error"))return console.log("Room already exists, searching for it..."),void gs.current.emit("get_my_rooms",{userId:is._id});_e(!1),$e(!1),t()},t=()=>{gs.current.off("rooms_list",s),gs.current.off("room_created",o),gs.current.off("room_error",l)};gs.current.on("rooms_list",s),gs.current.on("room_created",o),gs.current.on("room_error",l),gs.current.emit("get_my_rooms",{userId:is._id})})(e.receiverUserId._id))},Ss=()=>{K.current&&K.current.scrollToBottom()},_s=()=>{if(console.log("Attempting to send message:",{inputMessage:o.trim(),currentRoom:Me,socketConnected:!!gs.current,messageRestricted:Ge}),!o.trim())return void console.log("No message to send");if(!Me)return console.log("No current room set"),void alert("Please select a user first");if(!gs.current)return console.log("Socket not connected"),void alert("Connection lost. Please refresh the page.");const e={roomId:Me,message:o.trim(),replyToId:(null===Oe||void 0===Oe?void 0:Oe._id)||null};console.log("Sending message:",e),gs.current.emit("send_message",e);const s={_id:`temp_${Date.now()}`,content:o.trim(),senderId:{_id:is._id,name:is.name},roomId:Me,createdAt:(new Date).toISOString(),isTemporary:!0,replyTo:Oe};k(e=>[...e,s]),console.log("Message sent successfully"),I(""),L([]),O(null),R(!1),We(null),gs.current&&gs.current.emit("typing_stop",{roomId:Me}),setTimeout(()=>Ss(),100)},ks=(e,s)=>{gs.current&&e&&s.trim()&&(console.log("Editing message:",{messageId:e,newContent:s}),gs.current.emit("edit_message",{messageId:e,newContent:s.trim()}),He(null))},As=e=>{We(e),setTimeout(()=>{const e=document.querySelector('input[type="text"]');e&&e.focus()},100)},Us=()=>{if(!gs.current||!Me||Se)return;const e=Ve.page+1;e<=Ve.pages&&(console.log("Loading more messages, page:",e),gs.current.emit("get_chat",{roomId:Me,page:e,limit:Ve.limit}))},Ms=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;gs.current&&e?(console.log("\ud83d\udd04 Requesting chat history for room:",e,"page:",s,"limit:",o),_e(!0),gs.current.emit("get_chat",{roomId:e,page:s,limit:o})):console.error("Socket not connected or room ID missing")},Es=()=>{Me?(console.log("\ud83d\udd04 Refreshing chat history for current room:",Me),Ms(Me,1,50)):console.log("\u274c No current room to refresh")},Ds=()=>{console.log("\ud83e\uddea Testing chat history functionality:"),console.log("- Current room:",Me),console.log("- Socket connected:",!!gs.current),console.log("- Current messages count:",S.length),console.log("- Pagination:",Ve),console.log("- Cached messages in localStorage:",Me?os(Me).length:0),Me&&gs.current?(console.log("\u2705 All conditions met, requesting chat history..."),Ms(Me,1,10)):console.log("\u274c Cannot test - missing room or socket connection")},Ys=()=>{if(console.log("\ud83e\uddea Testing chat persistence:"),console.log("- Current room:",Me),Me){const e=os(Me);console.log("- Cached messages count:",e.length),console.log("- Cached messages:",e);const s=Object.keys(localStorage).filter(e=>e.startsWith("chat_history_"));console.log("- All chat cache keys:",s),s.forEach(e=>{var s;const o=JSON.parse(localStorage.getItem(e));console.log(`- ${e}:`,{messageCount:(null===(s=o.messages)||void 0===s?void 0:s.length)||0,timestamp:o.timestamp,userId:o.userId})})}else console.log("\u274c No current room to test persistence")},Ts=()=>{const e=Object.keys(localStorage).filter(e=>e.startsWith("chat_history_"));e.forEach(e=>localStorage.removeItem(e)),console.log("\ud83d\uddd1\ufe0f Cleared all chat cache:",e.length,"entries")};l.useEffect(()=>{"undefined"!==typeof window&&(window.testChatHistory=Ds,window.testPersistence=Ys,window.requestChatHistory=Ms,window.clearAllChatCache=Ts,console.log("\ud83d\udd27 Chat history functions available in console:"),console.log("- window.testChatHistory() - Test the functionality"),console.log("- window.testPersistence() - Test localStorage persistence"),console.log("- window.requestChatHistory(roomId, page, limit) - Request history for specific room"),console.log("- window.clearAllChatCache() - Clear all cached chat data"))},[Me,gs.current]);const Rs=e=>{"Enter"===e.key&&(e.preventDefault(),_s())},Fs=[{id:1,name:"",imgUrl:m},{id:2,name:"",imgUrl:c},{id:3,name:"",imgUrl:u},{id:4,name:"",imgUrl:h},{id:5,name:"",imgUrl:v},{id:6,name:"",imgUrl:g},{id:7,name:"",imgUrl:x},{id:8,name:"",imgUrl:p},{id:9,name:"",imgUrl:j},{id:10,name:"",imgUrl:f},{id:11,name:"",imgUrl:y}],$s=e=>{const s=e.target.value;Ne(s),(e=>{const s=d.D.filter(s=>{var o;return null===(o=s.name)||void 0===o?void 0:o.toLowerCase().includes(null===e||void 0===e?void 0:e.toLowerCase())});be(s)})(s)},[Ls,zs]=(0,l.useState)([]);(0,l.useEffect)(()=>{const e=()=>{fe(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,l.useEffect)(()=>{Ce&&setTimeout(()=>{Ie(!1)},500)},[Ce,Se,xe]),(0,l.useEffect)(()=>{Se&&xe&&setTimeout(()=>{_e(!1)},100)},[xe,Se]);const Bs=Array.isArray(ns)?ns.filter((e,s,o)=>{var l;return(null===e||void 0===e||null===(l=e.receiverUserId)||void 0===l?void 0:l._id)&&s===o.findIndex(s=>{var o,l;return(null===s||void 0===s||null===(o=s.receiverUserId)||void 0===o?void 0:o._id)===(null===e||void 0===e||null===(l=e.receiverUserId)||void 0===l?void 0:l._id)})}):[],Hs=l.useMemo(()=>{const e=Bs.map(e=>({...e,receiverUserId:{...e.receiverUserId}}));return Le.forEach(s=>{const o=e.findIndex(e=>{var o,l;return(null===e||void 0===e||null===(o=e.receiverUserId)||void 0===o?void 0:o._id)===(null===s||void 0===s||null===(l=s.otherUser)||void 0===l?void 0:l._id)});-1===o&&null!==s&&void 0!==s&&s.otherUser?e.push({receiverUserId:{...s.otherUser,lastMessage:s.lastMessage,roomId:s.roomId,updatedAt:s.updatedAt}}):-1!==o&&null!==s&&void 0!==s&&s.lastMessage&&(e[o]={...e[o],receiverUserId:{...e[o].receiverUserId,lastMessage:s.lastMessage,roomId:s.roomId,updatedAt:s.updatedAt}})}),e.sort((e,s)=>{var o,l,t,a,i,r;const n=new Date((null===e||void 0===e||null===(o=e.receiverUserId)||void 0===o?void 0:o.updatedAt)||(null===e||void 0===e||null===(l=e.receiverUserId)||void 0===l||null===(t=l.lastMessage)||void 0===t?void 0:t.createdAt)||0);return new Date((null===s||void 0===s||null===(a=s.receiverUserId)||void 0===a?void 0:a.updatedAt)||(null===s||void 0===s||null===(i=s.receiverUserId)||void 0===i||null===(r=i.lastMessage)||void 0===r?void 0:r.createdAt)||0)-n})},[Bs,Le]),Os=()=>(0,_.jsxs)("div",{children:[(0,_.jsxs)(t.Hp,{className:"rounded mb-3 px-lg-3",children:[(0,_.jsx)("input",{className:"form-control headerChat",placeholder:"Search",type:"search",style:{height:50},onChange:$s}),(0,_.jsx)("span",{className:"input-group-text border-0 pointer",id:"search-addon",style:{backgroundColor:"rgb(242, 69, 112)",color:"#FFFF"},children:(0,_.jsx)(t.$u,{fas:!0,icon:"search"})})]}),(0,_.jsx)(a.ur,{className:"chat-list-wrap",autoHide:!0,style:{position:"relative",height:"68vh",padding:"0 0 0 10px"},children:(0,_.jsx)(t.xt,{listUnStyled:!0,className:"mb-0 m-3",children:we.length>0?Hs.map((e,s)=>{var o,l,t,a,i,r,n,d,c,m,u,h,v,g,x,p,j,f;return(0,_.jsx)("li",{className:"p-2 border-bottom "+((null===xe||void 0===xe||null===(o=xe.receiverUserId)||void 0===o?void 0:o._id)===(null===e||void 0===e||null===(l=e.receiverUserId)||void 0===l?void 0:l._id)?"bg-light":""),onClick:()=>Is(e),style:{cursor:"pointer",backgroundColor:(null===xe||void 0===xe||null===(t=xe.receiverUserId)||void 0===t?void 0:t._id)===(null===e||void 0===e||null===(a=e.receiverUserId)||void 0===a?void 0:a._id)?"#f8f9fa":"transparent"},children:(0,_.jsxs)("a",{href:"#!",className:"d-flex justify-content-between",children:[(0,_.jsxs)("div",{className:"d-flex flex-row",children:[(0,_.jsxs)("div",{children:[(0,_.jsx)("img",{src:null!==e&&void 0!==e&&null!==(i=e.receiverUserId)&&void 0!==i&&i.mainAvatar?`${G.C}/assets/images/${null===e||void 0===e||null===(r=e.receiverUserId)||void 0===r?void 0:r.mainAvatar}`:null!==e&&void 0!==e&&null!==(n=e.receiverUserId)&&void 0!==n&&null!==(d=n.avatars)&&void 0!==d&&d[0]?`${G.C}/assets/images/${null===e||void 0===e||null===(c=e.receiverUserId)||void 0===c?void 0:c.avatars[0]}`:w,alt:"avatar",className:"d-flex align-self-center me-3 image21",style:{borderRadius:"50%",maxWidth:"55px"},onLoad:()=>{console.log("Avatar image loaded successfully")},onError:s=>{console.log("Avatar image failed to load:",s.target.src),console.log("User data:",null===e||void 0===e?void 0:e.receiverUserId),s.target.src=w}}),(0,_.jsx)("span",{className:"badge bg-success badge-dot"})]}),(0,_.jsxs)("div",{className:"pt-1",children:[(0,_.jsx)("p",{className:"fw-bold mb-0",children:null===e||void 0===e||null===(m=e.receiverUserId)||void 0===m?void 0:m.name}),(0,_.jsx)("p",{className:"small text-muted",style:{fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif"},children:Ps((null===e||void 0===e||null===(u=e.receiverUserId)||void 0===u||null===(h=u.lastMessage)||void 0===h?void 0:h.content)||(null===e||void 0===e||null===(v=e.receiverUserId)||void 0===v?void 0:v.content)||"No messages yet")})]})]}),(0,_.jsxs)("div",{className:"pt-1",children:[(0,_.jsx)("p",{className:"small text-muted mb-1",children:null!==e&&void 0!==e&&null!==(g=e.receiverUserId)&&void 0!==g&&null!==(x=g.lastMessage)&&void 0!==x&&x.createdAt?new Date(e.receiverUserId.lastMessage.createdAt).toLocaleTimeString():null===e||void 0===e||null===(p=e.receiverUserId)||void 0===p?void 0:p.timestamp}),(null===e||void 0===e||null===(j=e.receiverUserId)||void 0===j?void 0:j.unreadCount)&&(0,_.jsx)("span",{className:"badge bg-danger rounded-pill float-end",children:null===e||void 0===e||null===(f=e.receiverUserId)||void 0===f?void 0:f.unreadCount})]})]})},s)}):Hs.map((e,s)=>{var o,l,t,a,i,r,n,d,c,m,u,h,v,g,x,p,j,f;return(0,_.jsx)("li",{className:"p-2 border-bottom "+((null===xe||void 0===xe||null===(o=xe.receiverUserId)||void 0===o?void 0:o._id)===(null===e||void 0===e||null===(l=e.receiverUserId)||void 0===l?void 0:l._id)?"bg-light":""),onClick:()=>Is(e),style:{cursor:"pointer",backgroundColor:(null===xe||void 0===xe||null===(t=xe.receiverUserId)||void 0===t?void 0:t._id)===(null===e||void 0===e||null===(a=e.receiverUserId)||void 0===a?void 0:a._id)?"#f8f9fa":"transparent"},children:(0,_.jsxs)("a",{href:"#!",className:"d-flex justify-content-between",children:[(0,_.jsxs)("div",{className:"d-flex flex-row align-items-center",style:{gap:"15px"},children:[(0,_.jsxs)("div",{style:{width:"60px",height:"60px"},children:[(0,_.jsx)("img",{src:null!==e&&void 0!==e&&null!==(i=e.receiverUserId)&&void 0!==i&&i.mainAvatar?`${G.C}/assets/images/${null===e||void 0===e||null===(r=e.receiverUserId)||void 0===r?void 0:r.mainAvatar}`:null!==e&&void 0!==e&&null!==(n=e.receiverUserId)&&void 0!==n&&null!==(d=n.avatars)&&void 0!==d&&d[0]?`${G.C}/assets/images/${null===e||void 0===e||null===(c=e.receiverUserId)||void 0===c?void 0:c.avatars[0]}`:w,alt:"avatar",className:"d-flex align-self-center me-3 image21 chat-profile",style:{borderRadius:"50%",objectFit:"cover"}}),(0,_.jsx)("span",{className:"badge bg-success badge-dot"})]}),(0,_.jsxs)("div",{className:"pt-1",children:[(0,_.jsx)("p",{className:"fw-bold mb-0",children:null===e||void 0===e||null===(m=e.receiverUserId)||void 0===m?void 0:m.name}),(0,_.jsx)("p",{className:"small text-muted",style:{fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif"},children:Ps((null===e||void 0===e||null===(u=e.receiverUserId)||void 0===u||null===(h=u.lastMessage)||void 0===h?void 0:h.content)||(null===e||void 0===e||null===(v=e.receiverUserId)||void 0===v?void 0:v.content)||"No messages yet")})]})]}),(0,_.jsxs)("div",{className:"pt-1",children:[(0,_.jsx)("p",{className:"small text-muted mb-1",children:null!==e&&void 0!==e&&null!==(g=e.receiverUserId)&&void 0!==g&&null!==(x=g.lastMessage)&&void 0!==x&&x.createdAt?new Date(e.receiverUserId.lastMessage.createdAt).toLocaleTimeString():null===e||void 0===e||null===(p=e.receiverUserId)||void 0===p?void 0:p.timestamp}),(null===e||void 0===e||null===(j=e.receiverUserId)||void 0===j?void 0:j.unreadCount)&&(0,_.jsx)("span",{className:"badge bg-danger rounded-pill float-end",children:null===e||void 0===e||null===(f=e.receiverUserId)||void 0===f?void 0:f.unreadCount})]})]})},s)})})})]}),Ws=e=>{if(!e)return"";const s=new Date(e),o=new Date,l=s.toDateString()===o.toDateString();return s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})+(l?" | Today":` | ${s.toLocaleDateString()}`)},Ps=e=>e?(0,_.jsx)("span",{style:{fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif",fontSize:"inherit",lineHeight:"inherit"},children:e}):"",qs=()=>{var e,s,l,i,n,d,c;return(0,_.jsx)("div",{style:{position:"relative"},children:xe?(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{className:"row row12 py-1 mb-2 shadow bottom",children:[(0,_.jsx)("div",{className:"col-7 chat-dp",children:(0,_.jsxs)("div",{className:"row chat-status",children:[(0,_.jsx)("div",{className:"col-4 col-lg-2",children:(0,_.jsx)("img",{src:null!==xe&&void 0!==xe&&null!==(e=xe.receiverUserId)&&void 0!==e&&e.mainAvatar?`${G.C}/assets/images/${null===xe||void 0===xe||null===(s=xe.receiverUserId)||void 0===s?void 0:s.mainAvatar}`:null!==xe&&void 0!==xe&&null!==(l=xe.receiverUserId)&&void 0!==l&&null!==(i=l.avatars)&&void 0!==i&&i[0]?`${G.C}/assets/images/${null===xe||void 0===xe||null===(n=xe.receiverUserId)||void 0===n?void 0:n.avatars[0]}`:w,alt:"avatar",className:"d-flex align-self-center image21",style:{borderRadius:"50%",maxWidth:"55px"},onError:e=>{console.log("Header avatar image failed to load:",e.target.src),e.target.src=w}})}),(0,_.jsx)("div",{className:"col-8 py-2 col-lg-8",children:(0,_.jsxs)("h6",{children:[null===xe||void 0===xe||null===(d=xe.receiverUserId)||void 0===d?void 0:d.name,(0,_.jsx)("br",{}),(0,_.jsx)("small",{style:{color:Ke?"green":"orange",fontSize:"0.9rem",marginTop:"-10px"},children:De?`${Te||"User"} is typing...`:Ke?Me?"Connected":"Connected - No room":"Connecting..."}),(0,_.jsx)("br",{}),(0,_.jsxs)("small",{style:{fontSize:"0.7rem",color:"#666"},children:["Room: ",Me?Me.substring(0,8)+"...":"None"]})]})})]})}),(0,_.jsx)("div",{className:"col-5 chat-opt",children:(0,_.jsxs)("div",{className:"float-end me-2 con-info",children:[(0,_.jsx)(C.N_,{className:"float-end fs-4 text-muted my-2 me-2",onClick:Es,title:"Refresh chat history",style:{cursor:Se?"not-allowed":"pointer",opacity:Se?.5:1},children:(0,_.jsx)("i",{className:"fa fa-refresh","aria-hidden":"true"})}),(0,_.jsxs)(C.N_,{className:"float-end header__more fs-3 my-2 text-muted",children:[(0,_.jsx)("span",{to:"#",className:"pointer",style:{fontWeight:"700"},"data-bs-toggle":"dropdown",children:(0,_.jsx)("i",{class:"fa fa-ellipsis-v","aria-hidden":"true"})}),(0,_.jsxs)("ul",{className:"dropdown-menu",style:{width:"200px"},children:[(0,_.jsx)("li",{children:(0,_.jsxs)(C.N_,{className:"dropdown-item py-2",onClick:()=>le(!0),children:[(0,_.jsx)("i",{className:"fa-solid fa-circle-info me-3","aria-hidden":"true",title:"date Schedule"})," ","Schedule Date"]})}),(0,_.jsx)("li",{children:(0,_.jsxs)(C.N_,{className:"dropdown-item py-2",onClick:()=>X(!0),children:[(0,_.jsx)("i",{className:"fa fa-question-circle-o me-3","aria-hidden":"true",title:"Check Compatibility"})," ","Compatibility"]})}),(0,_.jsx)("li",{children:(0,_.jsxs)(C.N_,{className:"dropdown-item py-2",onClick:()=>ge(!0),children:[(0,_.jsx)("i",{class:"fa fa-history me-3","aria-hidden":"true"})," ","Track Milestone"]})}),(0,_.jsx)("li",{children:(0,_.jsxs)(C.N_,{className:"dropdown-item py-2",onClick:()=>re(!0),children:[(0,_.jsx)("i",{class:"fa fa-ban me-3","aria-hidden":"true"})," ","Block"]})}),(0,_.jsx)("li",{children:(0,_.jsxs)(C.N_,{className:"dropdown-item py-2",onClick:()=>de(!0),children:[(0,_.jsx)("i",{class:"fa fa-flag me-3","aria-hidden":"true"})," ","Report"]})})]})]}),(0,_.jsx)(C.N_,{className:"float-end fs-4 text-muted my-2",onClick:xs,children:(0,_.jsx)("i",{className:"fa fa-phone","aria-hidden":"true"})}),(0,_.jsx)(V,{show:ms,onHide:ps}),(0,_.jsx)(C.N_,{className:"float-end fs-4 text-muted my-2",onClick:js,children:(0,_.jsx)("i",{class:"fa fa-video-camera","aria-hidden":"true"})}),(0,_.jsx)(J,{show:hs,onHide:fs})]})})]}),(0,_.jsxs)("div",{className:"message-box",children:[(0,_.jsx)(a.ur,{autoHide:!0,className:"msg-wrap",style:{position:"relative",height:"65vh"},id:"chat-container",ref:K,children:Se?(0,_.jsx)(W,{}):0===S.length?(0,_.jsxs)("div",{className:"text-center p-4",children:[(0,_.jsx)("p",{className:"text-muted",children:"No messages yet. Start a conversation!"}),(0,_.jsxs)("small",{className:"text-muted",children:["Room: ",Me?Me.substring(0,8)+"...":"None"," | Messages: ",S.length]})]}):S.map(e=>{var s,o,l,t,a,i,r,n,d,c;return(0,_.jsx)("div",{className:"px-3 px-md-5 d-flex flex-row justify-content-"+((null===(s=e.senderId)||void 0===s?void 0:s._id)===is._id?"end":"start"),children:(null===(o=e.senderId)||void 0===o?void 0:o._id)===is._id?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{style:{maxWidth:"70%"},children:[e.replyTo&&(0,_.jsxs)("div",{className:"small p-2 me-3 mb-1 rounded-3 bg-light border-start border-3 border-primary",children:[(0,_.jsx)("p",{className:"mb-1 text-muted small",children:qe||"You replied"}),(0,_.jsx)("p",{className:"mb-0 small",style:{fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif"},children:Ps(e.replyTo.content)})]}),e.file?(0,_.jsx)("img",{src:URL.createObjectURL(e.file),alt:`file ${e._id}`,style:{borderRadius:"50%",maxWidth:"55px"}}):(null===Be||void 0===Be?void 0:Be._id)===e._id?(0,_.jsxs)("div",{className:"d-flex flex-column me-3 mb-1",children:[(0,_.jsx)("input",{type:"text",className:"form-control form-control-sm mb-2",defaultValue:e.content,onKeyDown:s=>{"Enter"===s.key?ks(e._id,s.target.value):"Escape"===s.key&&He(null)},autoFocus:!0}),(0,_.jsxs)("div",{className:"d-flex gap-2",children:[(0,_.jsx)("button",{className:"btn btn-sm btn-success",onClick:s=>{const o=s.target.parentElement.previousElementSibling;ks(e._id,o.value)},children:"Save"}),(0,_.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>He(null),children:"Cancel"})]})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"d-flex align-items-start",children:[(0,_.jsxs)("p",{className:"small p-2 me-3 mb-1 rounded-3 flex-grow-1",style:{backgroundColor:"#f24570",color:"#ffffff",fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif"},children:[Ps(e.content),e.isEdited&&(0,_.jsx)("span",{className:"text-muted small ms-2",children:"(edited)"})]}),(0,_.jsxs)("div",{className:"dropdown",children:[(0,_.jsx)("button",{className:"btn btn-sm btn-link text-muted p-1",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"\u22ee"}),(0,_.jsxs)("ul",{className:"dropdown-menu",children:[(0,_.jsx)("li",{children:(0,_.jsx)("button",{className:"dropdown-item",onClick:()=>He(e),children:"Edit"})}),(0,_.jsx)("li",{children:(0,_.jsx)("button",{className:"dropdown-item",onClick:()=>{return s=e._id,void(gs.current&&s&&window.confirm("Are you sure you want to delete this message?")&&(console.log("Deleting message:",s),gs.current.emit("delete_message",{messageId:s})));var s},children:"Delete"})}),(0,_.jsx)("li",{children:(0,_.jsx)("button",{className:"dropdown-item",onClick:()=>As(e),children:"Reply"})})]})]})]}),(0,_.jsx)("p",{className:"small me-3 mb-3 rounded-3 text-muted",children:Ws(e.createdAt)})]})]}),(0,_.jsx)("img",{src:null!==ls&&void 0!==ls&&ls.mainAvatar?`${G.C}/assets/images/${null===ls||void 0===ls?void 0:ls.mainAvatar}`:null!==ls&&void 0!==ls&&null!==(l=ls.avatars)&&void 0!==l&&l[0]?`${G.C}/assets/images/${null===ls||void 0===ls||null===(t=ls.avatars)||void 0===t?void 0:t[0]}`:w,alt:`avatar ${e._id}`,style:{borderRadius:"50%",width:"45px",height:"45px",maxWidth:"45px"},onError:e=>{console.log("Message avatar image failed to load:",e.target.src),e.target.src=w}})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("img",{src:null!==xe&&void 0!==xe&&null!==(a=xe.receiverUserId)&&void 0!==a&&a.mainAvatar?`${G.C}/assets/images/${null===xe||void 0===xe||null===(i=xe.receiverUserId)||void 0===i?void 0:i.mainAvatar}`:null!==xe&&void 0!==xe&&null!==(r=xe.receiverUserId)&&void 0!==r&&null!==(n=r.avatars)&&void 0!==n&&n[0]?`${G.C}/assets/images/${null===xe||void 0===xe||null===(d=xe.receiverUserId)||void 0===d?void 0:d.avatars[0]}`:w,alt:`avatar ${e._id}`,style:{borderRadius:"50%",width:"45px",height:"45px",maxWidth:"45px"},onError:e=>{console.log("Other user message avatar failed to load:",e.target.src),e.target.src=w}}),(0,_.jsxs)("div",{style:{maxWidth:"70%"},children:[e.replyTo&&(0,_.jsxs)("div",{className:"small p-2 ms-3 mb-1 rounded-3 bg-light border-start border-3 border-primary",children:[(0,_.jsxs)("p",{className:"mb-1 text-muted small",children:["Replied to ",(null===(c=e.senderId)||void 0===c?void 0:c.namess)||"You"]}),(0,_.jsx)("p",{className:"mb-0 small",style:{fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif"},children:Ps(e.replyTo.content)})]}),e.file?(0,_.jsx)("img",{src:URL.createObjectURL(e.file),alt:`file ${e._id}`,style:{maxWidth:"100%",height:"auto",borderRadius:"8px"}}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"d-flex align-items-start",children:[(0,_.jsxs)("p",{className:"small p-2 ms-3 mb-1 rounded-3 flex-grow-1",style:{backgroundColor:"#f5f6f7",color:"#000000",fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif"},children:[Ps(e.content),e.isEdited&&(0,_.jsx)("span",{className:"text-muted small ms-2",children:"(edited)"})]}),(0,_.jsxs)("div",{className:"dropdown",children:[(0,_.jsx)("button",{className:"btn btn-sm btn-link text-muted p-1",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"\u22ee"}),(0,_.jsx)("ul",{className:"dropdown-menu",children:(0,_.jsx)("li",{children:(0,_.jsx)("button",{className:"dropdown-item",onClick:()=>As(e),children:"Reply"})})})]})]}),(0,_.jsx)("p",{className:"small ms-3 mb-3 rounded-3 text-muted float-end",children:Ws(e.createdAt)})]})]})]})},e._id||e.id)})}),Ve.page<Ve.pages&&(0,_.jsx)("div",{className:"text-center py-2",children:(0,_.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:Us,disabled:Se,children:Se?"Loading...":"Load More Messages"})})]}),Oe&&(0,_.jsx)("div",{className:"px-3 py-2 bg-light border-top",children:(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,_.jsxs)("div",{className:"small",children:[(0,_.jsxs)("span",{className:"text-muted",children:["Replying to the3 ",(null===(c=Oe.senderId)||void 0===c?void 0:c.namesss)||"Unknownsss3",":"]}),(0,_.jsx)("div",{className:"text-truncate",style:{maxWidth:"300px",fontFamily:"'Apple Color Emoji', 'Segoe UI Emoji', 'Noto Color Emoji', 'Android Emoji', 'EmojiSymbols', 'EmojiOne Mozilla', 'Twemoji Mozilla', 'Segoe UI Symbol', sans-serif"},children:Ps(Oe.content)})]}),(0,_.jsx)("button",{className:"btn btn-sm btn-link text-muted p-0",onClick:()=>We(null),children:"\u2715"})]})}),(0,_.jsxs)("div",{className:" inputChat text-muted d-flex  align-items-center  py-1 mt-4",style:{float:"right",backgroundColor:"#e9ecef"},children:[(0,_.jsxs)("div",{className:"header__more px-3",children:[(0,_.jsxs)("span",{to:"#",className:"pointer ",style:{fontWeight:"700"},"data-bs-toggle":"dropdown",children:[(0,_.jsx)("i",{class:"fa fa-paperclip fs-5","aria-hidden":"true"})," "]}),(0,_.jsxs)("ul",{className:"dropdown-menu",children:[(0,_.jsx)("li",{children:(0,_.jsxs)("label",{className:"dropdown-item py-2",children:[(0,_.jsx)("i",{className:"fa fa-picture-o me-2","aria-hidden":"true"})," ","File",(0,_.jsx)("input",{type:"file",style:{display:"none"},onChange:Cs,id:"fileInput"})]})}),(0,_.jsx)("li",{children:(0,_.jsxs)(C.N_,{className:"dropdown-item py-2",children:[(0,_.jsx)("i",{class:"fa fa-map-marker me-2","aria-hidden":"true"})," ","Location"]})})]})]}),(0,_.jsxs)("div",{className:"header__more",children:[(0,_.jsxs)("span",{to:"#",className:"pointer",style:{fontWeight:"600"},"data-bs-toggle":"dropdown",children:[(0,_.jsx)("i",{className:"fa-solid fa-gift fa-xl","aria-hidden":"true"})," "]}),(0,_.jsx)("ul",{className:"dropdown-menu p-3",style:{width:"300px"},children:Fs.map(e=>(0,_.jsxs)("li",{style:{display:"inline"},children:[(0,_.jsx)("span",{role:"img","aria-label":"gift icon","aria-hidden":"true",children:(0,_.jsx)("img",{className:"m-1 pointer",src:e.imgUrl,alt:e.name,style:{width:"80px",height:"80px"}})}),e.name]},e.id))})]}),ds()?(0,_.jsxs)("div",{className:"blocked-user-message",style:{padding:"20px",textAlign:"center",backgroundColor:"#f8d7da",borderRadius:"10px",margin:"10px 0"},children:[(0,_.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,_.jsx)("i",{className:"fa-solid fa-ban",style:{fontSize:"24px",color:"#721c24",marginRight:"10px"}}),(0,_.jsx)("span",{style:{color:"#721c24",fontWeight:"600",fontSize:"16px"},children:"You have blocked this user"})]}),(0,_.jsxs)("button",{className:"btn btn-danger btn-sm",onClick:cs,style:{padding:"8px 20px",fontWeight:"500"},children:[(0,_.jsx)("i",{className:"fa-solid fa-unlock",style:{marginRight:"8px"}}),"Unblock User"]})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)("div",{className:"input-vox-chat",children:[(0,_.jsx)("input",{type:"text",className:"form-control form-control-lg message-input",id:"exampleFormControlInput2",placeholder:Ge?"Message limit reached. Wait for response.":Me?"Type message":"Select a user to start chatting",value:o,onChange:e=>I(e.target.value),onKeyDown:Rs,disabled:!Me||Ge,style:{opacity:Me&&!Ge?1:.6}}),(0,_.jsxs)("div",{className:"smile-message-input",children:[(0,_.jsxs)("span",{className:"pointer",style:{fontWeight:"600"},"data-bs-toggle":"dropdown",onClick:ws,children:[(0,_.jsx)("i",{class:"fa-solid fa-face-smile fa-xl"})," "]}),(0,_.jsx)("div",{className:"dropdown-menu",children:(0,_.jsx)(r.Ay,{onEmojiClick:bs})})]})]}),(0,_.jsx)("button",{className:"send-btn fs-4",onClick:_s,disabled:!o.trim()||!Me||Ge,style:{opacity:Ge?.5:1,cursor:Ge?"not-allowed":"pointer"},title:Ge?"Message limit reached. Wait for response.":"Send message",children:(0,_.jsx)(t.$u,{fas:!0,icon:"paper-plane"})})]})]})]}):(0,_.jsx)("div",{style:{width:"60%",margin:"0 auto"},children:(0,_.jsx)("img",{src:N,alt:"chat background",className:"chat-banner"})})})};return(0,_.jsxs)("div",{className:"chat-main-wrap",children:[(0,_.jsx)("style",{dangerouslySetInnerHTML:{__html:'\n          .chat-main-wrap .message-content,\n          .chat-main-wrap .small,\n          .chat-main-wrap p {\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', \'Roboto\', \'Helvetica Neue\', Arial, \'Apple Color Emoji\', \'Segoe UI Emoji\', \'Noto Color Emoji\', \'Android Emoji\', \'EmojiSymbols\', \'EmojiOne Mozilla\', \'Twemoji Mozilla\', \'Segoe UI Symbol\', sans-serif !important;\n          \n            font-feature-settings: "liga", "clig", "kern", "calt", "ccmp", "cv01", "cv02", "cv03", "cv04", "cv05", "cv06", "cv07", "cv08", "cv09", "cv10", "cv11", "cv12", "cv13", "cv14", "cv15", "cv16", "cv17", "cv18", "cv19", "cv20", "cv21", "cv22", "cv23", "cv24", "cv25", "cv26", "cv27", "cv28", "cv29", "cv30", "cv31", "cv32", "cv33", "cv34", "cv35", "cv36", "cv37", "cv38", "cv39", "cv40", "cv41", "cv42", "cv43", "cv44", "cv45", "cv46", "cv47", "cv48", "cv49", "cv50", "cv51", "cv52", "cv53", "cv54", "cv55", "cv56", "cv57", "cv58", "cv59", "cv60", "cv61", "cv62", "cv63", "cv64", "cv65", "cv66", "cv67", "cv68", "cv69", "cv70", "cv71", "cv72", "cv73", "cv74", "cv75", "cv76", "cv77", "cv78", "cv79", "cv80", "cv81", "cv82", "cv83", "cv84", "cv85", "cv86", "cv87", "cv88", "cv89", "cv90", "cv91", "cv92", "cv93", "cv94", "cv95", "cv96", "cv97", "cv98", "cv99", "cv100" !important;\n          }\n        '}}),(0,_.jsx)(i.A,{}),Ce?(0,_.jsx)(H.A,{}):(0,_.jsxs)(t.Dj,{fluid:!0,className:"custom-fluid",children:[(0,_.jsx)(t.gU,{children:(0,_.jsx)(t.m6,{md:"12",style:{paddingLeft:"0",paddingRight:"0"},children:(0,_.jsx)(t.kv,{id:"chat3",style:{borderRadius:"0"},children:(0,_.jsx)(t.ee,{className:"p-0",children:(0,_.jsxs)(t.gU,{children:[(0,_.jsxs)(t.m6,{md:"5",lg:"4",xl:"3",className:"mb-4 mb-md-0 p-0",style:{borderRight:"2px solid lightgray"},children:[je&&!xe&&Os(),!je&&Os()]}),(0,_.jsxs)(t.m6,{md:"7",lg:"8",xl:"9",className:"p-0",children:[!je&&!xe&&qs(),xe&&qs()]})]})})})})}),(0,_.jsx)(A,{showModal:Q,hideModal:()=>X(!1)}),(0,_.jsx)(M,{showModal:ve,hideModal:()=>ge(!1),selectedUser:xe}),(0,_.jsx)(T,{showModal:ie,hideModal:()=>re(!1),selectedUser:xe}),(0,_.jsx)(F,{showModal:ne,hideModal:()=>de(!1),selectedUser:xe}),(0,_.jsx)(B,{showModal:oe,hideModal:()=>le(!1),calenderDate:Ns,clockTime:ys}),(0,_.jsx)(P.A,{showModal:oe,hideModal:()=>le(!1),calenderDate:Ns,NotifyScheduleData:e=>{zs(e),le(!1),setTimeout(()=>{se(!0)},500)},clockTime:ys}),(0,_.jsx)(q.A,{showModal:ee,hideModal:()=>se(!1),calenderScheduleDAte:()=>{se(!1),setTimeout(()=>{le(!0)},500)},selectedUser:xe,editIndex:ke,ViewUser:Ue,setEditIndex:Ae,userInfoDate:e=>{setTimeout(()=>{se(!0)},500)},scheduledData:Ls})]})]})}},9866:(e,s,o)=>{o.d(s,{A:()=>u});var l=o(5043),t=o(2),a=o(3768),i=o(2161),r=o(7748),n=o(579);const d=[{address:"Empire State Building, 20 W 34th St, New York, NY 10001"},{address:"Times Square, Manhattan, NY 10036"},{address:"Statue of Liberty, New York, NY 10004"},{address:"Brooklyn Bridge, New York, NY 10038"},{address:"The Metropolitan, 1000 5th Ave, New York, NY 10028"},{address:"Grand Central Terminal, 89 E 42nd St, New York, NY 10017"},{address:"Central Park, 59th St to 110th St, New York, NY 10022"},{address:"The High Line, New York, NY 10011"},{address:"Rockefeller Center, 45 Rockefeller Plaza, New York, NY 10111"},{address:"Museum of Modern Art (MoMA), 11 W 53rd St, New York, NY 10019"},{address:"One World Observatory, 285 Fulton St, New York, NY 10007"},{address:"Brooklyn Botanic Garden, 990 Washington Ave, Brooklyn, NY 11225"},{address:"Chelsea Market, 75 9th Ave, New York, NY 10011"},{address:"The Plaza Hotel, 768 5th Ave, New York, NY 10019"},{address:"Katz's Delicatessen, 205 E Houston St, New York, NY 10002"},{address:"Joe's Pizza, 7 Carmine St, New York, NY 10014"},{address:"The St. Regis New York, Two East 55th Street at Fifth Avenue, New York, NY 10022"},{address:"Serendipity 3, 225 E 60th St, New York, NY 10022"},{address:"Gramercy Tavern, 42 E 20th St, New York, NY 10003"}],c=e=>{let{venuesList:s,handleVenueSelection:o,handleClosePopup:l}=e;return(0,n.jsx)("div",{className:"popup-venue-list",children:s.map((e,s)=>(0,n.jsx)("div",{onClick:()=>o(e),children:(0,n.jsx)("p",{children:e.address})},s))})},m=e=>{let{onVenueChange:s}=e;const[o,t]=(0,l.useState)(d),[a,i]=(0,l.useState)(null),[r,m]=(0,l.useState)(!1),u=()=>{m(!r)};return(0,n.jsxs)("div",{className:"setVenue",children:[(0,n.jsx)("input",{className:"date",type:"",placeholder:"Choose Venue",value:a?a.address:"",readOnly:!0,onClick:u}),(0,n.jsx)("div",{className:"Apps",children:r&&(0,n.jsx)(c,{venuesList:o,handleVenueSelection:e=>{i(e),s(e.address),m(!1)},handleClosePopup:()=>{m(!1)}})}),(0,n.jsx)("span",{className:"calander-icon",onClick:u,children:(0,n.jsx)("i",{className:"fa-solid fa-location-dot fa-xl",style:{color:"#B197FC"}})})]})},u=e=>{let{showModal:s,hideModal:o,NotifyScheduleData:d}=e;const[c,u]=(0,l.useState)(!1),[h,v]=(0,l.useState)(new Date),[g,x]=(0,l.useState)(!1),[p,j]=(0,l.useState)(new Date),[f,y]=(0,l.useState)(!1),[N,w]=(0,l.useState)(""),b=()=>{x(!g)},[C,I]=(0,l.useState)("10:00");return(0,n.jsx)(t.A,{show:s,onHide:o,centered:!0,children:g?c?(0,n.jsx)("div",{className:"clockArea"}):(0,n.jsx)("div",{className:"calenderArea",children:(0,n.jsx)(i.Ay,{dateFormat:"DD/MM/YYYY",onChange:e=>{v(e),x(!1)},value:h})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"main-calander",style:{position:"relative",padding:"20px"},children:[(0,n.jsx)("span",{onClick:o,style:{position:"absolute",right:"25px",top:"10px",cursor:"pointer",color:"#213366"},children:(0,n.jsx)("i",{className:"fa fa-times fs-3","aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"Data-1 cstm-modal",children:[(0,n.jsx)("h5",{className:"fs-4 text-muted fw-700",children:"Schedule Your Virtual Date for Meaningful Connections!"}),(0,n.jsxs)("div",{className:"settime",children:[(0,n.jsx)(r.A,{}),(0,n.jsx)("span",{className:"clock-icon",onClick:e=>{I(e)},value:C,children:(0,n.jsx)("i",{class:"fa-solid fa-clock fa-xl",style:{color:"#B197FC"}})})]}),(0,n.jsxs)("div",{className:"setdate",children:[(0,n.jsx)("input",{className:"date",type:"",dateFormat:"DD/MM/YYYY",placeholder:"Choose Date",value:h.toLocaleDateString(),onClick:b}),(0,n.jsx)("span",{className:"calander-icon",onClick:b,children:(0,n.jsx)("i",{class:"fa-regular fa-calendar-days fa-xl",style:{color:"#B197FC"}})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(m,{onVenueChange:e=>{w(e)}})})]})]}),(0,n.jsx)("div",{className:"sched-button",onClick:e=>{e.preventDefault(),d(),(e=>{e.preventDefault();try{const e={date:h.toLocaleDateString(),time:p.toLocaleTimeString(),venue:N};d(e),a.Ay.success("schedule date successfully updated"),o(o)}catch(s){console.error("Error updating Contact profile:",s),a.Ay.error("Failed to update Contact info")}})(e)},children:(0,n.jsx)("button",{className:"date-btn",children:(0,n.jsx)("p",{className:"date-content",children:"Schedule Date"})})})]})})}}}]);
//# sourceMappingURL=830.915b5c37.chunk.js.map