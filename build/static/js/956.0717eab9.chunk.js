"use strict";(self.webpackChunkMatchup=self.webpackChunkMatchup||[]).push([[956],{4956:(e,s,n)=>{n.r(s),n.d(s,{default:()=>v});var t=n(5043),a=n(9456),i=n(3519),c=n(1072),r=n(1669),l=n(7459),o=n(579);const d=()=>{var e;const[s,n]=(0,t.useState)(0),a=localStorage.getItem("userData"),i=a?JSON.parse(a):null,c=(null===i||void 0===i||null===(e=i.data)||void 0===e?void 0:e._id)||null;return(0,t.useEffect)(()=>{const e=async()=>{if(c)try{const e=await fetch("".concat(l.C,"/notifications/unread-count/").concat(c)),s=await e.json();n(s.count||0)}catch(e){console.error("Error fetching unread count:",e),n(0)}};e();const s=setInterval(e,3e4);return()=>clearInterval(s)},[c]),(0,o.jsx)(r.A,{unreadCount:s})};n(9366);var u=n(1233),m=n(1889),h=n(5475);const x=e=>{var s,n,t,a,i,c;let{notification:r}=e;const d=null!==(s=r.senderUserId)&&void 0!==s&&s.mainAvatar?"".concat(l.C,"/assets/images/").concat(r.senderUserId.mainAvatar):null!==(n=r.senderUserId)&&void 0!==n&&null!==(t=n.avatars)&&void 0!==t&&t.length?"".concat(l.C,"/assets/images/").concat(r.senderUserId.avatars[0]):"/default-avatar.png";return(0,o.jsxs)("div",{className:"notification-item ".concat("UNREAD"===r.status?"unread":"read"),children:[(0,o.jsx)("div",{className:"notification-content",children:(0,o.jsxs)("div",{className:"notification-action",children:[(0,o.jsx)(h.N_,{to:"/metrimonial/user-profile/".concat(null===(a=r.senderUserId)||void 0===a?void 0:a._id),children:(0,o.jsx)("img",{src:d,className:"profile-picture-notification",alt:(null===(i=r.senderUserId)||void 0===i?void 0:i.name)||"User"})}),(0,o.jsxs)("span",{children:[(0,o.jsx)("strong",{children:null===(c=r.senderUserId)||void 0===c?void 0:c.name})," ",r.message]})]})}),(0,o.jsx)("div",{className:"notification-meta",children:(0,o.jsx)("p",{className:"notification-timestamp",children:(0,o.jsx)(m.A,{createdAt:r.createdAt})})})]})},v=()=>{const e=(0,a.wA)(),{list:s,loading:n,error:r}=(0,a.d4)(e=>e.notifications),l=localStorage.getItem("userData"),m=JSON.parse(l).data._id;return(0,t.useEffect)(()=>{m&&e((0,u.bb)({userId:m,page:1,limit:11}))},[e,m]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d,{}),(0,o.jsxs)(i.A,{children:[(0,o.jsxs)(c.A,{className:"align-items-center",children:[(0,o.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,o.jsx)("h2",{className:"notification-title-page",children:"Notifications"})}),(0,o.jsx)("div",{className:"col-lg-6 col-md-6 col-sm-12",children:(0,o.jsxs)("div",{className:"member__info--right member__info--right-notification d-flex justify-content-end align-items-center",children:[s.some(e=>"UNREAD"===e.status)&&(0,o.jsx)("button",{className:"btn btn-sm btn-outline-primary me-3",onClick:async()=>{try{await e((0,u.X0)(m)).unwrap()}catch(r){console.error("Error marking all notifications as read:",r)}},style:{fontSize:"14px",padding:"6px 12px"},children:"Mark all as read"}),(0,o.jsx)("div",{className:"member__info--customselect right w-100",children:(0,o.jsxs)("div",{className:"default-btn",children:[(0,o.jsx)("span",{children:"Order By:"}),(0,o.jsxs)("select",{className:"select__border--none",children:[(0,o.jsx)("option",{value:"newest",children:"Newest"}),(0,o.jsx)("option",{value:"oldest",children:"Oldest"})]})]})})]})})]}),n&&(0,o.jsx)("p",{children:"Loading notifications..."}),r&&(0,o.jsxs)("p",{style:{color:"red"},children:["Error: ",r]}),(0,o.jsx)("div",{className:"notification-modal-page",children:0===s.length?(0,o.jsx)("p",{children:"No notifications found."}):s.map(e=>(0,o.jsx)(x,{notification:e},e._id))})]})]})}},9366:(e,s,n)=>{n.d(s,{A:()=>c});var t=n(5043),a=n(579);class i extends t.Component{render(){const{select:e}=this.props;return(0,a.jsxs)("select",{defaultValue:e,children:[(0,a.jsx)("option",{value:"Newest",children:"Recent added"}),(0,a.jsx)("option",{value:"Popular",children:"Popular"}),(0,a.jsx)("option",{value:"Old",children:"Old"}),(0,a.jsx)("option",{value:"Recent",children:"Recent"})]})}}const c=i}}]);
//# sourceMappingURL=956.0717eab9.chunk.js.map