{"version":3,"file":"static/js/838.3d0bce9d.chunk.js","mappings":"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","sources":["metrimoniul/component/popUps/event/eventNotificationSchedule .jsx","metrimoniul/component/popUps/chat/checkCompatibilty.jsx","metrimoniul/component/popUps/chat/MildStoneModal.jsx","metrimoniul/component/popUps/common-profile/block-user.jsx","metrimoniul/component/popUps/common-profile/reportUserModal.jsx","metrimoniul/component/popUps/chat/calenderSchedule.jsx","metrimoniul/pagesMetrimoniul/chat-page.jsx","metrimoniul/component/popUps/chat/Timer.jsx","metrimoniul/component/popUps/chat/Venue.jsx","metrimoniul/component/popUps/event/eventCalenderSchedule .jsx"],"sourcesContent":["import { useContext, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Modal } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport toast from \"react-hot-toast\";\nimport userMale from \"../../../../dating/assets/images/myCollection/user-male.jpg\";\nimport { MODE_METRI } from \"../../../../utils\";\nimport { getBySenderUserIds } from \"../../../../dating/store/slice/ActivitiesSlice\";\nimport { BASE_URL } from \"../../../../base\";\nimport {\n  createEvent,\n  getEventsM,\n} from \"../../../../service/common-service/eventSlice\";\nimport { unwrapResult } from \"@reduxjs/toolkit\";\n\nconst EventNotificationSchedule = ({\n  showModal,\n  editIndex,\n  ViewUser,\n  setEditIndex,\n  hideModal,\n  calenderScheduleDAte,\n  selectedUser,\n  selectedMemberForEvent, // <-- add this prop\n  userInfoDate,\n  scheduledData,\n}) => {\n  // const {eventDatahandle}=useContext(eventnotifyData)\n  const dispatch = useDispatch();\n  const profileData = useSelector((state) => state.profile.userData);\n  const User = profileData;\n\n  const datingId = localStorage.getItem(\"userData\");\n  const user_Data = JSON.parse(datingId);\n  const Store = useSelector((state) => state);\n  let matchUserList = useSelector(\n    (state) => Store?.activies?.Activity?.data || []\n  );\n\n  useEffect(() => {\n    dispatch(\n      getBySenderUserIds({ modeid: MODE_METRI, id: user_Data.data._id })\n    );\n  }, [user_Data.data._id]);\n\n  const eventnotifyData = {\n    user: User,\n    selectUser:\n      editIndex !== null\n        ? ViewUser?.receiverUserId\n        : selectedMemberForEvent || selectedUser?.receiverUserId, // <-- use selectedMemberForEvent if available\n    scheduledData: scheduledData,\n  };\n\n  const handleSubmitnotification = async (e) => {\n    // e.preventDefault();\n    // if (editIndex === null) {\n    //   const datanotifyEvent = localStorage.getItem(\"dataEvent\") || \"[]\";\n    //   localStorage.setItem(\n    //     \"dataEvent\",\n    //     JSON.stringify([...JSON.parse(datanotifyEvent), eventnotifyData])\n    //   );\n    // } else {\n    //   const datanotifyEvent = localStorage.getItem(\"dataEvent\") || \"[]\";\n    //   const updateArray = [...JSON.parse(datanotifyEvent)];\n    //   updateArray[editIndex] = { ...ViewUser, scheduledData: scheduledData };\n    //   localStorage.setItem(\"dataEvent\", JSON.stringify(updateArray));\n    //   setEditIndex(null);\n    // }\n\n    // try {\n    //   toast.success(\"schedule date successfully updated\");\n    //   hideModal(hideModal);\n    // } catch (error) {\n    //   console.error(\"Error updating Contact profile:\", error);\n    //   toast.error(\"Failed to update Contact info\");\n    // }\n    e.preventDefault();\n\n    const payload = {\n      senderUserId: User?._id || User?.id || user_Data.data._id,\n      receiverUserId:\n        eventnotifyData?.selectUser?._id ||\n        eventnotifyData?.selectUser?.id ||\n        \"\",\n      action_logs: \"Scheduled via app\",\n      description: scheduledData?.description || \"1st meet\",\n      note: scheduledData?.note || \"User scheduled a date\",\n      mode: scheduledData?.mode || \"68d103ffaa4b176726e60424\",\n    };\n\n    try {\n      const resultAction = await dispatch(createEvent(payload));\n      const res = unwrapResult(resultAction);\n      if (res.isSuccess === true) {\n        dispatch(getEventsM(res?.data?.senderUserId));\n        toast.success(\"Schedule date successfully updated\");\n        hideModal();\n      } else {\n        toast.error(\"Failed to schedule event\");\n      }\n    } catch (error) {\n      console.error(\"Promise error during createEvent:\", error);\n      toast.error(\"Failed to schedule event\");\n    }\n  };\n\n  return (\n    <Modal show={showModal} onHide={hideModal} centered>\n      <div className=\"main\" style={{ position: \"relative\" }}>\n        <span\n          onClick={hideModal}\n          style={{\n            position: \"absolute\",\n            right: \"20px\",\n            top: \"8px\",\n            color: \"#213366\",\n            cursor: \"pointer\",\n          }}\n        >\n          <i className=\"fa fa-times fs-3 modal-cls\" aria-hidden=\"true\"></i>\n        </span>\n        <div className=\"svg-top \">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"330\"\n            height=\"405\"\n            viewBox=\"0 0 330 405\"\n            fill=\"none\"\n            className=\"sched-modal\"\n          >\n            <path\n              d=\"M192.069 338.654C43.1066 317.937 22.2553 364.484 0.00750924 404.24L7.50122e-09 20.0255C-0.000299446 8.96583 8.96523 0 20.0248 0H309.519C320.577 0 329.544 8.96583 329.544 20.0245L329.543 243.055C325.491 286.302 295.076 352.979 192.069 338.654Z\"\n              fill=\"#D6B6F9\"\n            />\n            <defs>\n              <linearGradient\n                id=\"gradient-col\"\n                x1=\"0%\"\n                y1=\"0%\"\n                x2=\"100%\"\n                y2=\"0%\"\n              >\n                <stop offset=\"0%\" style={{ stopColor: \"#F093FB\" }} />\n                <stop offset=\"100%\" style={{ stopColor: \"#f24570\" }} />\n              </linearGradient>\n            </defs>\n          </svg>\n\n          <div className=\"upperData matched-modal\">\n            <h3 style={{ zIndex: \"999999\" }}>Youre Matched</h3>\n            <p>You and Desirae have both liked each other</p>\n            <div className=\"coll row\">\n              <div className=\"col-md-8 mod-person-lft col-8\">\n                <p className=\"fs-4 text-muted fw-600 per-txt\">\n                  {\" \"}\n                  {User?.name || \"\"}\n                </p>\n                <p className=\"fs-4 text-muted fw-600 per-dest\">\n                  {\" \"}\n                  {User?.occupation || \"\"}\n                </p>\n                <p className=\"fs-4 text-muted fw-600 location \">\n                  <span>\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"8\"\n                      height=\"12\"\n                      viewBox=\"0 0 8 12\"\n                      fill=\"none\"\n                    >\n                      <path\n                        d=\"M3.91737 0.696289C1.75734 0.696289 0 2.45151 0 4.61014C0 7.49576 3.61369 10.929 3.76886 11.0742C3.81171 11.1122 3.86501 11.1333 3.91737 11.1333C3.97067 11.1333 4.02588 11.1122 4.06682 11.0742C4.222 10.929 7.83569 7.50476 7.83569 4.61014C7.83569 2.45151 6.07834 0.696289 3.91737 0.696289ZM3.91737 6.37335C2.94444 6.37335 2.15242 5.58237 2.15242 4.61014C2.15242 3.63696 2.94444 2.84698 3.91737 2.84698C4.89124 2.84698 5.68233 3.63696 5.68233 4.61014C5.68233 5.58237 4.89124 6.37335 3.91737 6.37335Z\"\n                        fill=\"white\"\n                      />\n                    </svg>\n                  </span>\n                  {User?.address || \"New York\"}\n                </p>\n              </div>\n              <div className=\"col-md-4 col-4 modal-imgg-wrap\">\n                <div className=\"girl \">\n                  <img\n                    src={\n                      User?.mainAvatar\n                        ? `${BASE_URL}/assets/images/${User?.mainAvatar}`\n                        : User?.avatars?.[0]\n                        ? `${BASE_URL}/assets/images/${User?.avatars[0]}`\n                        : userMale\n                    }\n                    alt=\"dating thumb\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\" col6 heart-svg\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\"\n                height=\"23\"\n                viewBox=\"0 0 24 23\"\n                fill=\"none\"\n              >\n                <path\n                  d=\"M21.3406 2.97626C18.7864 0.422095 14.7424 0.178778 11.9449 2.30744C9.11644 0.208838 5.10345 0.422095 2.51825 2.97626C-0.278217 5.77375 -0.278217 10.3644 2.51825 13.1619L11.1239 21.7666L11.9139 22.5576L21.3406 13.1319C24.1681 10.3644 24.1681 5.80378 21.3406 2.97626ZM19.7897 11.611L14.1947 17.2059C13.9514 15.8072 13.2826 14.4395 12.6438 13.1319C11.154 10.061 9.87738 7.41575 12.7349 4.55723L12.9172 4.37501C14.8636 2.61082 17.9043 2.67188 19.7897 4.55723C21.7351 6.50263 21.7351 9.66556 19.7897 11.611Z\"\n                  fill=\"white\"\n                />\n              </svg>\n            </div>\n            <div className=\"row rt2\">\n              <div className=\"col-md-4 col-4 modal-imgg-wrap\">\n                <img\n                  className=\"img2 rounded-50\"\n                  src={\n                    eventnotifyData?.selectUser?.mainAvatar\n                      ? `${BASE_URL}/assets/images/${eventnotifyData?.selectUser?.mainAvatar}`\n                      : eventnotifyData?.selectUser?.avatars?.[0]\n                      ? `${BASE_URL}/assets/images/${eventnotifyData?.selectUser?.avatars[0]}`\n                      : userMale\n                  }\n                  alt=\"\"\n                />\n              </div>\n              <div className=\"col-md-8 mod-person-rt col-8\">\n                <p className=\"fs-4 text-muted fw-600 per-txt\">\n                  {eventnotifyData?.selectUser?.name || \"not found\"}\n                </p>\n                <p className=\"fs-4 text-muted fw-600 per-dest\">\n                  {eventnotifyData?.selectUser?.occupation || \"\"}\n                </p>\n                <p className=\"fs-4 text-muted fw-600 location\">\n                  <span className=\"location2\">\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"8\"\n                      height=\"12\"\n                      viewBox=\"0 0 8 12\"\n                      fill=\"none\"\n                    >\n                      <path\n                        d=\"M3.91737 0.696289C1.75734 0.696289 0 2.45151 0 4.61014C0 7.49576 3.61369 10.929 3.76886 11.0742C3.81171 11.1122 3.86501 11.1333 3.91737 11.1333C3.97067 11.1333 4.02588 11.1122 4.06682 11.0742C4.222 10.929 7.83569 7.50476 7.83569 4.61014C7.83569 2.45151 6.07834 0.696289 3.91737 0.696289ZM3.91737 6.37335C2.94444 6.37335 2.15242 5.58237 2.15242 4.61014C2.15242 3.63696 2.94444 2.84698 3.91737 2.84698C4.89124 2.84698 5.68233 3.63696 5.68233 4.61014C5.68233 5.58237 4.89124 6.37335 3.91737 6.37335Z\"\n                        fill=\"white\"\n                      />\n                    </svg>\n                  </span>\n                  {eventnotifyData?.selectUser?.address || \"\"}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div className=\"date-time-wrap\">\n            <p className=\"date-modal\">\n              <i class=\"fas fa-calendar-alt\"></i>\n              {scheduledData?.date || \"02-02-2026\"}\n            </p>\n            <p className=\"time-modal\">\n              <i class=\"fas fa-clock\"></i>\n              {scheduledData?.time || \"05:00 PM\"}\n            </p>\n            <p className=\"loc-modal\">\n              <i class=\"fas fa-map-marker-alt\"></i>\n              {scheduledData?.venue || \"New York\"}\n            </p>\n          </div>\n\n          <div className=\"main-bottom\">\n            <Link onClick={hideModal}>\n              <button className=\"send-msg-btn\">\n                <p className=\"content\">Send a Message</p>\n              </button>\n            </Link>\n\n            <Link>\n              <button\n                onClick={handleSubmitnotification}\n                className=\"schedule-date\"\n              >\n                <p className=\"celender schedulename\">Submit</p>\n              </button>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default EventNotificationSchedule;\n","import React, { useState } from 'react';\nimport { Modal } from 'react-bootstrap';\nimport { CircularProgressbar, buildStyles } from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\";\n\n\n// const CustomAlert = ({ message, onClose }) => (\n//     <div\n//       style={{\n//         textAlign:\"center\",\n//         width:\"20%\",\n//         position: 'fixed',\n//         top: '40%',\n//         left:\"49%\",\n//         transform: 'translate(-50%, -50%)',\n//         backgroundColor: '#ffff',\n//         padding: '20px',\n//         borderRadius: '10px',\n//         boxShadow: '0 0 10px rgba(0, 0, 0, 0.3)',\n//       }}\n//     >\n//       <p>{message}</p>\n//       <button style={{color:\"#f24570\"}} onClick={onClose}>OK</button>\n//     </div>\n//   );\nconst CustomAlert = ({ message, onClose }) => (\n    <div\n        className=\"position-fixed top-50 start-50 translate-middle\"\n        style={{\n            backgroundColor: '#ffff',\n            padding: '20px',\n            borderRadius: '10px',\n            boxShadow: '0 0 10px rgba(0, 0, 0, 0.3)',\n            textAlign: 'center',\n            width: '80%', // Set a default width\n            maxWidth: '400px', // Set a maximum width\n        }}\n    >\n        <p>{message}</p>\n        <button style={{ color: \"#f24570\" }} className=\"btn btn-\" onClick={onClose}>\n            OK\n        </button>\n    </div>\n);\nconst CheckCompatibilityModalMetri = ({ showModal, hideModal }) => {\n    const [customAlert, setCustomAlert] = useState(null);\n    const questions = [\n        'Do you prefer to be a protector or nurturer in your relationships?',\n        'What is your ideal date night?',\n        'How do you handle conflicts in a relationship?',\n        'What is your love language?',\n        'How important is physical affection in a relationship?',\n    ];\n\n    const options = [\n        ['Protector', 'Nurturer', 'Sometimes protector, sometimes nurturer', 'Dont Care'],\n        ['Dinner and a movie', 'Outdoor adventure', 'Cooking together at home', 'Netflix and chill'],\n        ['I confront the issue directly', 'I prefer to avoid conflicts', 'I compromise and find a middle ground'],\n        ['Words of affirmation', 'Acts of service', 'Receiving gifts', 'Quality time', 'Physical touch'],\n        ['Very important', 'Moderately important', 'Not important'],\n    ];\n\n\n    const matchingPercentage = 60;\n\n    const [currentQuestion, setCurrentQuestion] = useState(0);\n    const [currentDiv, setCurrentDiv] = useState(0);\n    const [selectedOptions, setSelectedOptions] = useState(Array(options.length).fill());\n\n\n    const handleOptionSelect = (index) => {\n        const updatedOptions = [...selectedOptions];\n        updatedOptions[currentQuestion] = options[currentQuestion][index];\n        setSelectedOptions(updatedOptions);\n    };\n\n    // const handleNextClick = () => {\n    //     if (currentQuestion < questions.length - 1) {\n    //         setCurrentQuestion(currentQuestion + 1);\n    //     } else {\n    //         if (selectedOptions.every((option) => option !== undefined)) {\n    //             setCurrentDiv(1);\n    //         } else {\n    //             alert('Please answer all questions before submitting.');\n    //         }\n    //     }\n    // };\n    const handleNextClick = () => {\n        if (currentQuestion < questions.length - 1) {\n            if (selectedOptions[currentQuestion] === undefined) {\n                // Display custom alert modal\n                const message = 'Please answer the current question before moving to the next one.';\n                setCustomAlert({ message });\n            } else {\n                setCurrentQuestion(currentQuestion + 1);\n            }\n        } else {\n            if (selectedOptions.every((option) => option !== undefined)) {\n                setCurrentDiv(1);\n            } else {\n                // Display custom alert modal\n                const message = 'Please answer all questions before submitting.';\n                setCustomAlert({ message });\n            }\n        }\n    };\n\n    const handlePrevClick = () => {\n        if (currentQuestion > 0) {\n            setCurrentQuestion(currentQuestion - 1);\n        }\n    };\n\n    return (\n        <Modal show={showModal} onHide={hideModal} centered>\n            {customAlert && (\n                <CustomAlert message={customAlert.message} onClose={() => setCustomAlert(null)} />\n            )}\n\n            <span onClick={hideModal}>\n                <i\n                    className=\"fa fa-times fs-3\"\n                    aria-hidden=\"true\"\n                    style={{\n                        cursor: \"pointer\",\n                        float: \"right\",\n                        padding: \"15px 25px 0 0\",\n                    }}\n                ></i>\n            </span>\n            {currentDiv === 0 && (\n                <div className=\"container px-3 pb-3 px-sm-5 pb-sm-5\">\n                    <div className=\" \">\n                        <div className=\"col-12\">\n                            <p className='text-center text-dark fs-3'>Compatibility Quiz</p>\n                        </div>\n                        <div className=\"col-12 px-3 px-sm-5\">\n                            <p className='text-center'>\n                                Answer at least 5 questions & find out how compatible you are with other users\n                            </p>\n                        </div>\n                    </div>\n                    <div className=\"compatibility-quiz-box mx-3\">\n                        <div className=\"top-quiz mb-2\">\n                            <p className='top-quiz-req-que text-muted'>{`Required question ${currentQuestion + 1}/${questions.length}`}</p>\n                            <br />\n                            <p className='top-quiz-que my-2'>{questions[currentQuestion]}</p>\n                        </div>\n                        <div className='py-2'>\n                            {options[currentQuestion].map((option, index) => (\n                                <p\n                                    key={index}\n                                    className={`rounded-4 top-quiz-option pointer py-3 ps-4 ${selectedOptions[currentQuestion] === option ? 'selected-option' : ''}`}\n                                    onClick={() => handleOptionSelect(index)}\n                                    style={{\n                                        backgroundColor:\n                                            selectedOptions[currentQuestion] === option ? '#f24570' : 'whitesmoke',\n                                        color:\n                                            selectedOptions[currentQuestion] === option ? 'white' : 'black',\n                                        fontSize: '1rem', // Adjust font size as needed\n                                    }}\n                                >\n                                    {option}\n                                </p>\n                            ))}\n                        </div>\n                        <div>\n                            {currentQuestion > 0 && (\n                                <button className=\"default-btn reverse mt-4\" style={{ float: 'left' }} onClick={handlePrevClick}>\n                                    <span>Prev</span>\n                                </button>\n                            )}\n                            <button className=\"default-btn reverse mt-4 \" style={{ float: 'right' }} onClick={handleNextClick}>\n                                <span>{currentQuestion === questions.length - 1 ? 'Submit' : 'Next'}</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n            {currentDiv === 1 && (\n                <div className='pb-5'>\n                    <div className=\"container px-5\">\n                        <div className='my-2'>\n                            <div style={{ width: \"150px\", margin: \"auto\" }}>\n                                <CircularProgressbar\n                                    maxValue={100}\n                                    strokeWidth={10}\n                                    value={matchingPercentage}\n                                    counterClockwise={false}\n                                    background={false}\n                                    backgroundPadding={10}\n                                    text={`${matchingPercentage}%`}\n                                    styles={buildStyles({\n                                        textColor: '#f24570',\n                                        pathColor: '#f24570',\n                                        trailColor: 'whitesmoke',\n                                    })}\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"my-2 mt-5\">\n                            <h6>Things you have in common : </h6>\n                        </div>\n\n                        <div className=\" ps-3 my-2 mt-3\">\n                            <p>1. You both agree that when it comes to love, it always requires hard work!</p>\n                            <p>2. You both value work-life balance over success!</p>\n                        </div>\n\n\n                    </div>\n                    <hr className='my-2' />\n                    <div className=\"container px-5\">\n                        <p className='text-dark fs-5 mt-2'>details</p>\n                        <p className='ps-3'>Your score suggests that there is likely a low-moderate level of potential compatibility between you and this person when it comes to several important elements of successful relationships. It is a long-established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English.</p>\n                    </div>\n                </div>\n            )}\n\n        </Modal>\n    );\n};\n\nexport default CheckCompatibilityModalMetri;\n","import React, { useState } from 'react';\nimport { Modal } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Scrollbars from 'react-custom-scrollbars-2';\n\nconst btnText = \"Load More\";\n\nconst RelationshipMilestoneList = [\n  {\n    text: 'Started a beautiful journey together',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Celebrated the first month of happiness',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Shared special moments with each other\\'s families',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Embarked on a romantic trip together',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Decided to share a home and move in together',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Took a step forward and got engaged',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Tied the knot and became a married couple',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Welcomed their first bundle of joy into the world',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Celebrated the joyous 5-year milestone together',\n    activity: '2 days ago',\n  },\n  {\n    text: 'Still going strong after a decade of love!',\n    activity: '2 days ago',\n  },\n];\n\n\nconst RelationshipMilestoneTrackerMetri = ({ showModal, hideModal, selectedUser }) => {\n  const [showMilestone, setShowMilestone] = useState(5);\n  const totalMilStones = RelationshipMilestoneList.length;\n\n  const handleLoadMoreMilestone = () => {\n    const newMilestoneToShow = showMilestone + 5;\n    setShowMilestone(Math.min(newMilestoneToShow, totalMilStones))\n  }\n\n  return (\n    <Modal className='me-2' show={showModal} onHide={hideModal} centered size=\"lg\"  >\n      <span onClick={hideModal}>\n        <i\n          className=\"fa fa-times fs-3\"\n          aria-hidden=\"true\"\n          style={{\n            cursor: 'pointer',\n            color: \"white\",\n            float: 'right',\n            right: \"0px\",\n            padding: '15px 25px 0 0',\n            position: 'absolute',\n          }}\n        ></i>\n      </span>\n      <div className=\"activity \">\n        <div className=\"container\">\n          <div class=\"jumbotron p-lg-4 p-2 rounded-2\">\n            <p class=\"display-5\">Relationship Milestone Tracker</p>\n            <p class=\"lead\">Track and celebrate the special moments in your relationship journey.</p>\n          </div>\n          <div className=\"row g-4 pb-2\">\n            <Scrollbars\n              autoHide\n              style={{ position: \"relative\", height: \"530px\" }}\n            >\n              <div className=\"col-lg-12\">\n                <div className=\"group__bottom--area\">\n\n                  <div className=\"group__bottom--body bg-white\">\n                    <div className=\"group__bottom--group\">\n                      <div className=\"row g-4 justify-content-center mx-12-none row-cols-1\">\n                        {RelationshipMilestoneList.slice(0, showMilestone).map((val, i) => (\n                          <div className=\"col\" key={i}>\n                            <div className=\"activity__item\">\n                              <div className=\"activity__inner\">\n                                <div className=\"activity__thumb\">\n                                  <Link to=\"/member-single\">\n                                  <img src={selectedUser ? selectedUser.avatars : null} alt={`${val.imgAlt}`} /></Link>\n                                </div>\n                                <div className=\"activity__content\">\n                                  <h5>\n                                    <Link to=\"/dating/members\">{selectedUser ? selectedUser.name : null}</Link>\n                                    <span>{\"and \"}</span>\n                                    {\" \"} You{\" \"}\n                                    <span>{val.text}</span>\n                                  </h5>\n                                  <p>{val.activity}</p>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                      <div className=\"text-center mt-5\">\n                        {showMilestone < totalMilStones && (\n                          <a \n                          href=\"#\" \n                          className=\"default-btn reverse\"\n                          onClick={handleLoadMoreMilestone}\n                          ><span><i className=\"fa-solid fa-spinner\"></i> {btnText}</span></a>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </Scrollbars>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default RelationshipMilestoneTrackerMetri;\n\n\n","\n\n// import React from 'react'\n// import { Modal, Button } from \"react-bootstrap\";\n// import { useNavigate } from 'react-router-dom';\n// import { useDispatch } from 'react-redux';\n// import { blockUser } from '../../../../service/common-service/blockSlice';\n\n// const BlockUserModalMetri = ({ showModal, hideModal, selectedUser }) => {\n  \n//   const dispatch = useDispatch();\n//   const navigate = useNavigate();\n\n//   const handleBlockUserFromChat = () => {\n//     const targetUserId = selectedUser?.receiverUserId?._id;\n//     if (!targetUserId) return; \n  \n//     dispatch(blockUser(targetUserId))\n//       .unwrap()  \n//       .then(() => {\n//         hideModal();\n//       ;\n//       })\n//       .catch((err) => {\n//         console.error(\"Block user failed:\", err);\n       \n//       });\n//   };\n\n//   return (\n//     <Modal show={showModal} onHide={hideModal} centered>\n//       <Modal.Header closeButton>\n//         <Modal.Title>Block Confirmation</Modal.Title>\n//       </Modal.Header>\n//       <Modal.Body>\n//         <div className=\"alert alert-danger\">\n//           Are you sure want to block <span className='fs-5'>{selectedUser ? selectedUser.name : null}</span>\n//         </div>\n//       </Modal.Body>\n//       <Modal.Footer style={{ justifyContent: 'space-between' }}>\n//         <Button variant=\"default\" style={{ border: '1px solid #d5d5d5c2' }} onClick={hideModal}>\n//           Cancel\n//         </Button>\n//         <Button variant=\"danger\" onClick={handleBlockUserFromChat}>\n//           Block\n//         </Button>\n//       </Modal.Footer>\n//     </Modal>\n//   )\n// }\n\n// export default BlockUserModalMetri;\n\n\n\nimport React, { useState } from 'react'\nimport { Modal, Button, Spinner } from \"react-bootstrap\";\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\n// import { blockUser, unblockUser } from '../../../service/common-service/blockSlice';\nimport toast from 'react-hot-toast';\nimport { blockUser, unblockUser } from '../../../../service/common-service/blockSlice';\n\nconst BlockUserModalMetri = ({ showModal, hideModal, selectedUser, isBlocked = false, onBlockStatusChange }) => {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [loading, setLoading] = useState(false);\n\n  const handleBlockUserFromChat = async () => {\n    if (!selectedUser || !selectedUser._id) {\n      toast.error(\"User information is missing\");\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      if (isBlocked) {\n        // Unblock the user\n        const result = await dispatch(unblockUser(selectedUser._id)).unwrap();\n        toast.success(`${selectedUser.name} has been unblocked successfully`);\n      } else {\n        // Block the user\n        const result = await dispatch(blockUser(selectedUser._id)).unwrap();\n        toast.success(`${selectedUser.name} has been blocked successfully`);\n      }\n      \n      setLoading(false);\n      hideModal();\n      \n      // Notify parent component to refresh blocking status\n      if (onBlockStatusChange) {\n        setTimeout(() => {\n          onBlockStatusChange();\n        }, 500);\n      }\n      \n    } catch (error) {\n      console.error(isBlocked ? \"Error unblocking user:\" : \"Error blocking user:\", error);\n      toast.error(error?.message || `Failed to ${isBlocked ? 'unblock' : 'block'} user. Please try again.`);\n      setLoading(false);\n    }\n  }\n\n  return (\n    <Modal show={showModal} onHide={hideModal} centered>\n      <Modal.Header closeButton>\n        <Modal.Title>{isBlocked ? 'Unblock' : 'Block'} Confirmation</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div className={`alert ${isBlocked ? 'alert-info' : 'alert-danger'}`}>\n          Are you sure want to {isBlocked ? 'unblock' : 'block'} <span className='fs-5'>{selectedUser ? selectedUser.name : null}</span>?\n          {isBlocked && <div className=\"mt-2 small\">You will be able to chat with this user again after unblocking.</div>}\n        </div>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"default\" onClick={hideModal} disabled={loading}>\n          Cancel\n        </Button>\n        <Button variant={isBlocked ? \"success\" : \"danger\"} onClick={handleBlockUserFromChat} disabled={loading}>\n          {loading ? (\n            <>\n              <Spinner\n                as=\"span\"\n                animation=\"border\"\n                size=\"sm\"\n                role=\"status\"\n                aria-hidden=\"true\"\n                className=\"me-2\"\n              />\n              {isBlocked ? 'Unblocking...' : 'Blocking...'}\n            </>\n          ) : (\n            isBlocked ? 'Unblock' : 'Block'\n          )}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  )\n}\n\nexport default BlockUserModalMetri;\n","import React, { useState } from 'react';\nimport { Modal, Button, Form } from 'react-bootstrap';\n\nconst ReportUserModalMetri = ({ showModal, hideModal }) => {\n  const [reportReason, setReportReason] = useState('');\n  const [additionalDetails, setAdditionalDetails] = useState('');\n\n  const handleReport = () => {\n    hideModal();\n  };\n\n  const reportOptions = [\n    'Inappropriate Content',\n    'Harassment',\n    'Fake Profile',\n    'Spam',\n    'Other (Please Specify)',\n  ];\n\n  return (\n    <Modal show={showModal} onHide={hideModal} centered>\n      <span onClick={hideModal}>\n        <i\n          className=\"fa fa-times fs-3\"\n          aria-hidden=\"true\"\n          style={{\n            cursor: 'pointer',\n            float: 'right',\n            padding: '15px 25px 0 0',\n          }}\n        ></i>\n      </span>\n      <div className=\"container px-5 pb-5\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <p className='text-center text-dark fs-3'>Report User</p>\n          </div>\n          <div className=\"col-12 px-5\">\n            <p className='text-center'>\n              Are you sure you want to report this user?\n            </p>\n          </div>\n          <Form.Group controlId=\"reportReason\">\n            <Form.Label>Select a reason:</Form.Label>\n            <Form.Control\n            className='custom-reportUser-modal'\n              as=\"select\"\n              value={reportReason}\n              onChange={(e) => setReportReason(e.target.value)}\n            >\n              <option value=\"\" disabled>Select a reason...</option>\n              {reportOptions.map((option) => (\n                <option   key={option} value={option}>\n                  {option}\n                </option>\n              ))}\n            </Form.Control>\n          </Form.Group>\n          <span className='mt-4'></span>\n          <Form.Group  controlId=\"additionalDetails\">\n            <Form.Label>Additional Details (optional):</Form.Label>\n            <Form.Control\n            className='custom-reportUser-modal'\n              as=\"textarea\"\n              rows={3}\n              value={additionalDetails}\n              onChange={(e) => setAdditionalDetails(e.target.value)}\n              placeholder=\"Provide more details about the report...\"\n            />\n          </Form.Group>\n          <div className=\"container\">\n            <div className=\"row share-user-profile-modal-svg-div\" style={{justifyContent: 'space-between'}}>\n              <div className=\"col-6 text-center mt-4\">\n                <Button variant=\"default\" onClick={hideModal} style={{border:'1px solid #d5d5d5c2'}}>\n                  Cancel\n                </Button>\n              </div>\n              <div className=\"col-6 text-center mt-4\">\n                <Button variant=\"danger\" onClick={handleReport}>\n                  Report User\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default ReportUserModalMetri;\n","import React, { useState } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport toast from \"react-hot-toast\";\nimport Calendar from \"react-calendar\";\nimport Timer from './Timer'\nimport TimerMetri from \"./Timer\";\n\nconst CalenderScheduleMetri = ({\n  showModal,\n  hideModal,\n  \n  \n}) => {\n  const [showClock, setShowClock] = useState(false);\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [showCalendar, setShowCalendar] = useState(false);\n  const [selectedTime,setSelectedTime] =useState(new Date())\n\n\n  const handleClockClick = () => {\n    setShowClock(!showClock);\n    setShowCalendar(!showCalendar)\n  };\n\n  const handleCalendarClick = () => {\n    setShowCalendar(!showCalendar);\n  };\n\n \n  const handleDateChange = (date) => {\n    setSelectedDate(date);\n    setShowCalendar(false);\n   \n  };\n\n  const handleTimeChange = (time)=>{\n    setSelectedTime(time);\n    setShowClock(false)\n    \n  }\n  const handleSubmit =  (e) => {\n    e.preventDefault();\n    try {\n      toast.success(\"schedule date successfully updated\");\n      //  setButtonClass(\"default-btn reverse\");\n      hideModal(hideModal)\n    } catch (error) {\n      console.error(\"Error updating Contact profile:\", error);\n      toast.error(\"Failed to update Contact info\");\n    }\n  };\n  \n  const [value, setValue] = useState('10:00');\n\n  const onClick = (time) => {\n    setValue(time);\n };\n\n const venues = [\n   {  address:'Empire State Building, 20 W 34th St New York, NY 10001' },\n   {  address:'Times Square , Manhattan, NY 10036' },\n   {  address:'Statue of Liberty,  New York, NY 10004' },\n   {  address:'Brooklyn Bridge,  New York, NY 10038' },\n   {  address:'The Metropolitan Museum of Art,  1000 5th Ave, New York, NY 10028' },\n   {  address:'Grand Central Terminal,  89 E 42nd St, New York, NY 10017' },\n   {  address:'Central Park,  59th St to 110th St, New York, NY 10022' },\n  // Add more venues as needed\n];\n\nconst VenuePopup = ({ selectedVenue, onClose }) => (\n  <div className=\"popup-venue\">\n    <span className=\"close\" onClick={onClose}>&times;</span>\n    <p> <i class=\"fa-solid fa-location-dot fa-xl\" style={{color:\"#B197FC\"}}></i> {selectedVenue.address}</p>\n  </div>\n);\n// ----------------venue---------------\n// const VenuePicker = () => {\n  const [selectedVenue, setSelectedVenue] = useState(null);\n  const [isPopupOpen, setPopupOpen] = useState(false);\n\n  const handlePickVenue = () => {\n    const randomIndex = Math.floor(Math.random() * venues.length);\n    const chosenVenue = venues[randomIndex];\n    setSelectedVenue(chosenVenue);\n    setPopupOpen(true);\n  };\n\n  const handleClosePopup = () => {\n    setPopupOpen(false);\n  };\n\n\n  \n  return (\n    <Modal show={showModal} onHide={hideModal} centered>\n      {!showCalendar ? (\n        <>\n          <div\n            className=\"main-calander\"\n            style={{ position: \"relative\", padding: \"20px\" }}\n          >\n            <span\n              onClick={hideModal}\n              style={{ position: \"absolute\", right: \"10px\", top: \"5px\" }}\n            >\n              <i className=\"fa fa-times fs-3\" aria-hidden=\"true\"></i>\n            </span>\n\n            <div className=\"Data-1\">\n              <h5 className=\"fs-4 text-muted fw-700\">\n                Schedule Your Virtual Date for Meaningful Connections!\n              </h5>\n              <div className=\"settime\">\n              \n               <TimerMetri/>\n                <span className=\"clock-icon\" onClick={onClick} value={value}   >\n                <i class=\"fa-solid fa-clock fa-xl\" style={{color:\"#B197FC\"}}></i>\n                </span>\n              </div>\n              <div className=\"setdate\">\n                <input\n                  className=\"date\"\n                  type=\"\"\n                  dateFormat=\"DD/MM/YYYY\"\n                  placeholder=\"Choose Date\"\n                  value={selectedDate.toLocaleDateString()}\n                  onClick={handleCalendarClick}\n                />\n                <span className=\"calander-icon\" onClick={handleCalendarClick}>\n                <i class=\"fa-regular fa-calendar-days fa-xl\" style={{color:\"#B197FC\"}}></i>\n                </span>\n              </div>\n\n              <div className=\"setVenue\">\n              <input\n                  className=\"date\"\n                  type=\"\"\n                  placeholder=\"Choose Venue\"\n                  onClick={handlePickVenue}\n                />\n                 <div className='Apps'>\n     \n     {isPopupOpen && selectedVenue && (\n       <VenuePopup selectedVenue={selectedVenue} onClose={handleClosePopup} />\n     )}\n   </div>\n                 <span className=\"calander-icon\" onClick={handlePickVenue}>\n                 <i class=\"fa-solid fa-location-dot fa-xl\" style={{color:\"#B197FC\"}}></i>\n                </span>\n                \n              </div>\n            </div>\n          </div>\n          <div className=\"btn\" onClick={handleSubmit}>\n            <button  className=\"date-btn\">\n              <p className=\"date-content\">Schedule Date</p>\n            </button>\n          </div>\n        </>\n          ) : showClock ? (\n            <div className=\"clockArea\">\n            \n            </div>\n            \n      ) : (\n        <div className=\"calenderArea\">\n          <Calendar\n            dateFormat=\"DD/MM/YYYY\"\n            onChange={handleDateChange}\n            value={selectedDate}\n          \n          />\n        </div>\n      )}\n      \n    </Modal>\n  );\n};\n\nexport default CalenderScheduleMetri;\n","\nimport React, { useEffect, useRef, useState, useMemo } from \"react\";\nimport {\n  MDBContainer,\n  MDBRow,\n  MDBCol,\n  MDBCard,\n  MDBCardBody,\n  MDBIcon,\n  MDBTypography,\n  MDBInputGroup,\n} from \"mdb-react-ui-kit\";\nimport { Modal, Button } from 'react-bootstrap';\nimport { Scrollbars } from \"react-custom-scrollbars-2\";\nimport HeaderFour from \"../component/layout/HeaderFour\";\nimport EmojiPicker from \"emoji-picker-react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport toast, { Toaster } from \"react-hot-toast\";\n\n//import data (keeping as fallback)\nimport { messages as staticMessages, customMessages } from \"../../dating/component/chat2-component/message\";\n\n//images\nimport chatBG from \"../assets/images/bg-img/marrage-chat-bg.jpg\";\nimport chatBG2 from \"../../dating/assets/images/chat/chatbg2.jpg\"\nimport dummyUserPic from \"../../dating/assets/images/myCollection/user-male.jpg\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { BASE_URL } from \"../../base\";\nimport { getRoomById, sendMessage as sendMessageAPI } from \"../../service/MANAGE_API/chat-API\";\nimport { getAllGifts, getUserCoins, sendGift as sendGiftApi } from \"../../service/MANAGE_API/gift-API\";\nimport { getBlockedUsers, checkIfBlockedBy } from \"../../service/common-service/blockSlice\";\nimport { useSocket } from \"../../hooks/useSocket\";\n\n// Matrimonial specific modals\nimport CheckCompatibilityModalMetri from \"../component/popUps/chat/checkCompatibilty\";\nimport RelationshipMilestoneTrackerMetri from \"../component/popUps/chat/MildStoneModal\";\nimport BlockUserModalMetri from \"../component/popUps/common-profile/block-user\";\nimport ReportUserModalMetri from \"../component/popUps/common-profile/reportUserModal\";\nimport CalenderScheduleMetri from \"../component/popUps/chat/calenderSchedule\";\nimport EventCalenderScheduleModal from \"../component/popUps/event/eventCalenderSchedule \";\nimport EventNotificationScheduleModal from \"../component/popUps/event/eventNotificationSchedule \";\nimport IncomingCallModal from \"../component/popUps/incomingcalls/IncomingCallModal.jsx\";\nimport VideoCallModal from \"../component/popUps/incomingcalls/VideoCallModal.jsx\";\nimport socketService from \"../../services/SocketService.js\";\n\nexport default function App() {\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const [inputMessage, setInputMessage] = useState(\"\");\n  const [chatMessages, setChatMessages] = useState([...customMessages]);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [selectedEmojis, setSelectedEmojis] = useState([]);\n  const [SelectedFile, setSelectedFile] = useState(null);\n  const [filePreview, setFilePreview] = useState(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const scrollbarsRef = useRef(null);\n  const [CheckCompatibility, setCheckCompatibility] = useState(false);\n  const [NotificationSchedule, setNotificationSchedule] = useState(false);\n  const [calenderSchedule, setCalenderSchedule] = useState(false);\n  const [showCalendar, setShowCalendar] = useState(false);\n  const [blocklUser, setBlockUser] = useState(false);\n  const [reportUser, setReportUser] = useState(false);\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [showClock, setShowClock] = useState(false);\n  const [Milestone, setMilestone] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null)\n  console.log(\"selectedjjjjjjjjjjj\",selectedUser)\n  const [isMobileView, setIsMobileView] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [selectedData, setSelectedData] = useState(null);\n  const [chatRooms, setChatRooms] = useState([]);\n  const [selectedRoomId, setSelectedRoomId] = useState(null);\n  const [roomMessages, setRoomMessages] = useState([]);\n  const [unreadCounts, setUnreadCounts] = useState({}); // { roomId: count }\n  const [lastMessages, setLastMessages] = useState({}); // { roomId: { message, timestamp, isRead } }\n  console.log(\"lastMessages\",lastMessages)\n  console.log(\"rooooooooooooommm\",roomMessages)\n  // Store messages per room to persist them when switching\n  const [messagesByRoom, setMessagesByRoom] = useState({});\n  const [loadingMessages, setLoadingMessages] = useState(false);\n  const [editingMessageId, setEditingMessageId] = useState(null);\n  const [editedContent, setEditedContent] = useState('');\n  const [replyingToMessage, setReplyingToMessage] = useState(null);\n  const [editIndex, setEditIndex] = useState(null);\n  const [ViewUser] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [showVideoCallModal, setShowVideoCallModal] = useState(false);\n  const [isSelectedUserBlocked, setIsSelectedUserBlocked] = useState(false);\n  const [isBlockedBySelectedUser, setIsBlockedBySelectedUser] = useState(false);\n  const [incomingCall, setIncomingCall] = useState(null);\n  const [showIncomingCallModal, setShowIncomingCallModal] = useState(false);\n  const [isCallModalManuallyClosed, setIsCallModalManuallyClosed] = useState(false);\n  const [callHistory, setCallHistory] = useState([]);\n  const [showCallHistory, setShowCallHistory] = useState(false);\n  const [gifts, setGifts] = useState([]);\n  const [loadingGifts, setLoadingGifts] = useState(false);\n  const [showGiftModal, setShowGiftModal] = useState(false);\n  const [sendingGift, setSendingGift] = useState(false);\n  const [typingUsers, setTypingUsers] = useState({});\n  const [hasMoreMessages, setHasMoreMessages] = useState(true);\n  const [currentCallId, setCurrentCallId] = useState(null);\n  const [callConnected, setCallConnected] = useState(false);\n  const [callInitiated, setCallInitiated] = useState(false);\n  const [callStartTime, setCallStartTime] = useState(null);\n  const [isMicOn, setIsMicOn] = useState(false);\n  // Use ref to track current selectedRoomId in callbacks\n  const selectedRoomIdRef = useRef(selectedRoomId);\n  \n  // Update ref when selectedRoomId changes\n  useEffect(() => {\n    selectedRoomIdRef.current = selectedRoomId;\n  }, [selectedRoomId]);\n\n  // Handle microphone access\n  const startMic = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      setIsMicOn(true);\n      \n      // Store the stream in a ref to clean up later\n      const audioTracks = stream.getAudioTracks();\n      \n      // Cleanup function to stop tracks when component unmounts or mic is turned off\n      return () => {\n        audioTracks.forEach(track => track.stop());\n        setIsMicOn(false);\n      };\n    } catch (err) {\n      console.error('Error accessing microphone:', err);\n      toast.error('Could not access microphone. Please check permissions.');\n      setIsMicOn(false);\n    }\n  };\n\n  // Add gift pop animation styles (once)\n  useEffect(() => {\n    const styleId = 'gift-bubble-anim-style-metri';\n    if (!document.getElementById(styleId)) {\n      const style = document.createElement('style');\n      style.id = styleId;\n      style.textContent = `@keyframes giftPop{0%{transform:scale(0.6);opacity:0}60%{transform:scale(1.05);opacity:1}100%{transform:scale(1)}}.gift-pop{animation:giftPop 450ms ease-out}@keyframes typingDot{0%,60%,100%{opacity:0.3}30%{opacity:1}}.typing-dot{display:inline-block;animation:typingDot 1.4s infinite;font-size:20px;line-height:1}`;\n      document.head.appendChild(style);\n    }\n  }, []);\n\n  const handleShow = () => setShowModal(true);\n  const handleHide = () => setShowModal(false);\n  const handleShowVideoCall = () => setShowVideoCallModal(true);\n  const handleHideVideoCall = () => setShowVideoCallModal(false);\n\n  // Function to check for incoming calls using socket\n  // Note: Incoming calls are handled via real-time 'incoming_call' socket event\n  // This function is kept for backward compatibility but shouldn't trigger modal\n  const checkForIncomingCalls = () => {\n    // Don't poll for incoming calls - they come via real-time socket events\n    // Only fetch history if needed for other purposes\n    // if (!userId || !isConnected) return;\n    // socketGetCallHistory(1, 5);\n  };\n\n  // Function to fetch call history using socket\n  const fetchCallHistory = () => {\n    if (!userId || !isConnected) return;\n    // Request call history via socket\n    socketGetCallHistory(1, 20);\n  };\n\n\n  const user = useSelector((state) => state.profile.userData)\n  console.log(\"uuuuuuuuuuuuuuuuuuuuu\",user)\n  const userPic = user?.avatars?.length - 1\n  const blockedUsers = useSelector((state) => state.block.blockedUsers)\n\n  // Get userId from localStorage as fallback using useMemo to prevent recalculation\n  const storedUserId = useMemo(() => {\n    try {\n      const userData = localStorage.getItem('userData');\n      if (userData) {\n        const parsedUser = JSON.parse(userData);\n        return parsedUser?.data?._id || parsedUser?._id;\n      }\n    } catch (error) {\n      console.error(\"Error parsing userData from localStorage:\", error);\n    }\n    return null;\n  }, []);\n\n  // Socket integration\n  const userId = user?._id || storedUserId;\n  const {\n    isConnected,\n    createRoom: socketCreateRoom,\n    getMyRooms,\n    joinRoom,\n    sendMessage: socketSendMessage,\n    editMessage: socketEditMessage,\n    deleteMessage: socketDeleteMessage,\n    getChatHistory,\n    startTyping,\n    stopTyping,\n    getCallHistory: socketGetCallHistory\n  } = useSocket(userId, {\n    onRoomsList: (rooms) => {\n      console.log('Received rooms list:', rooms);\n      setChatRooms(rooms || []);\n    \n    },\n    onChatHistory: (data) => {\n      console.log('Received chat history:', data);\n      const currentSelectedRoomId = selectedRoomIdRef.current;\n      console.log(\"currectnt rroom select id \",currentSelectedRoomId)\n      if (!currentSelectedRoomId) return;\n      const messages = Array.isArray(data) ? data : (data?.messages || []);\n\n      // const messages = Array.isArray(data) ? data : (data?.items || []);\n      console.log(\"messagessssssss1\",messages)\n      if (messages?.length > 0) {\n        const transformedMessages = messages.map((msg, index) => {\n          const base = msg.content || msg.message || '';\n          const inferredType = base && typeof base === 'string' && base.includes('Sent a gift:') ? 'gift' : 'text';\n          const messageType = msg.messageType || inferredType;\n          const giftName = messageType === 'gift' ? base.split(':').slice(1).join(':').trim() : '';\n          const matchedGift = messageType === 'gift' && gifts?.length\n            ? gifts.find(g => (g.name || '').toLowerCase() === (giftName || '').toLowerCase())\n            : undefined;\n          return ({\n            ...msg,\n            id: msg._id || index,\n            content: base,\n            timestamp: new Date(msg.createdAt).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\n            sent: msg.msgFrom?._id === userId || msg.senderId?._id === userId,\n            avatar: (msg.msgFrom?._id === userId || msg.senderId?._id === userId)\n              ? (user?.mainAvatar ? `${BASE_URL}/assets/images/${user.mainAvatar}` : \"mainnnnn12\" )\n              : (selectedUser?.avatar),\n            messageType,\n            fileUrl: msg.fileUrl || msg.file || (msg.attachment ? `${BASE_URL}/${msg.attachment}` : null),\n            giftData: messageType === 'gift' ? (msg.giftData || (matchedGift ? { _id: matchedGift._id, name: matchedGift.name, imageUrl: matchedGift.imageUrl } : undefined)) : undefined,\n            senderId: msg.msgFrom || msg.senderId,\n          });\n        });\n        \n        // Store messages per room\n        setMessagesByRoom(prev => ({\n          ...prev,\n          [currentSelectedRoomId]: transformedMessages\n        }));\n        \n        // Update last message from chat history\n        if (transformedMessages?.length > 0) {\n          const lastMsg = transformedMessages[transformedMessages?.length - 1];\n          const messageText = lastMsg.content || \n            (lastMsg.messageType === 'gift' ? 'Sent a gift' : \n             lastMsg.messageType === 'file' ? 'Sent a file' : 'Message');\n          \n          setLastMessages(prev => ({\n            ...prev,\n            [currentSelectedRoomId]: {\n              message: messageText,\n              timestamp: lastMsg.createdAt || new Date(),\n              isRead: currentSelectedRoomId === selectedRoomIdRef.current\n            }\n          }));\n        }\n        \n        console.table(\"tttrraaaa\",transformedMessages)\n        // Only update current room messages if this is the selected room\n        if (currentSelectedRoomId === selectedRoomIdRef.current) {\n          // Merge with existing messages to avoid losing newly sent messages\n          setRoomMessages(prevMessages => {\n            // Create a map of existing messages by ID\n            const existingMessagesMap = new Map(prevMessages.map(msg => [msg.id || msg._id, msg]));\n            \n            // Add/update messages from server\n            transformedMessages.forEach(msg => {\n              existingMessagesMap.set(msg.id || msg._id, msg);\n            });\n            \n            // Convert back to array and sort by timestamp\n            const merged = Array.from(existingMessagesMap.values());\n            merged.sort((a, b) => {\n              const timeA = new Date(a.createdAt || a.timestamp).getTime();\n              const timeB = new Date(b.createdAt || b.timestamp).getTime();\n              return timeA - timeB;\n            });\n            \n            return merged;\n          });\n          setTimeout(scrollToBottom, 100);\n        }\n      }\n      setLoadingMessages(false);\n    },\n    onNewMessage: (message, roomId) => {\n      console.log('New message received:', message, roomId, 'Current selectedRoomId:', selectedRoomIdRef.current);\n      // Use ref to get the latest selectedRoomId value\n      const currentSelectedRoomId = selectedRoomIdRef.current;\n      \n      const transformedMessage = {\n        ...message,\n        id: message._id,\n        content: message.content || message.message || '',\n        timestamp: new Date(message.createdAt).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\n        sent: message.msgFrom?._id === userId || message.senderId?._id === userId,\n        avatar: (message.msgFrom?._id === userId || message.senderId?._id === userId)\n          ? (user?.mainAvatar ? `${BASE_URL}/assets/images/${user.mainAvatar}`:\"main2222\" )\n          : (selectedUser?.avatar ),\n        messageType: message.messageType || 'text',\n        fileUrl: message.fileUrl || message.file || (message.attachment ? `${BASE_URL}/${message.attachment}` : null),\n        senderId: message.msgFrom || message.senderId,\n      };\n      console.log('transformedMessage:', transformedMessage);\n      \n      // Update last message for this room\n      if (roomId) {\n        const messageText = transformedMessage.content || \n          (transformedMessage.messageType === 'gift' ? 'Sent a gift' : \n           transformedMessage.messageType === 'file' ? 'Sent a file' : 'Message');\n        \n        setLastMessages(prev => ({\n          ...prev,\n          [roomId]: {\n            message: messageText,\n            timestamp: transformedMessage.createdAt || new Date(),\n            isRead: roomId === currentSelectedRoomId\n          }\n        }));\n        \n        // Increment unread count if message is not from current user and room is not currently open\n        const isFromCurrentUser = message.msgFrom?._id === userId || message.senderId?._id === userId;\n        if (!isFromCurrentUser && roomId !== currentSelectedRoomId) {\n          setUnreadCounts(prev => ({\n            ...prev,\n            [roomId]: (prev[roomId] || 0) + 1\n          }));\n        }\n        \n        // Always store the message in the room's message map\n        setMessagesByRoom(prev => {\n          const roomMessages = prev[roomId] || [];\n          const messageExists = roomMessages.some(msg => (msg.id || msg._id) === (transformedMessage.id || transformedMessage._id));\n          if (messageExists) {\n            return prev; // Don't add duplicate\n          }\n          return {\n            ...prev,\n            [roomId]: [...roomMessages, transformedMessage]\n          };\n        });\n      }\n      \n      // Only add message to current view if it's for the currently selected room\n      if (roomId && currentSelectedRoomId && roomId === currentSelectedRoomId) {\n        setRoomMessages(prevMessages => {\n          const messageExists = prevMessages.some(msg => (msg.id || msg._id) === (transformedMessage.id || transformedMessage._id));\n          console.log('Message exists:', messageExists);\n          if (messageExists) {\n            return prevMessages;\n          }\n          return [...prevMessages, transformedMessage];\n        });\n        setTimeout(scrollToBottom, 100);\n      } else {\n        console.log('Message stored but not displayed - not for current room. roomId:', roomId, 'selectedRoomId:', currentSelectedRoomId);\n      }\n    },\n    onMessageEdited: (message, roomId) => {\n      console.log('Message edited:', message, roomId);\n      const currentSelectedRoomId = selectedRoomIdRef.current;\n      \n      // Update in messagesByRoom cache\n      if (roomId) {\n        setMessagesByRoom(prev => {\n          const roomMessages = prev[roomId] || [];\n          return {\n            ...prev,\n            [roomId]: roomMessages.map(msg =>\n              (msg._id || msg.id) === (message._id || message.id)\n                ? { ...msg, content: message.content || message.message, isEdited: true }\n                : msg\n            )\n          };\n        });\n      }\n      \n      // Update in current view if it's the selected room\n      if (roomId && currentSelectedRoomId && roomId === currentSelectedRoomId) {\n        setRoomMessages(prevMessages =>\n          prevMessages.map(msg =>\n            (msg._id || msg.id) === (message._id || message.id)\n              ? { ...msg, content: message.content || message.message, isEdited: true }\n              : msg\n          )\n        );\n      }\n    },\n    onMessageDeleted: (messageId, roomId) => {\n      console.log('Message deleted:', messageId, roomId);\n      const currentSelectedRoomId = selectedRoomIdRef.current;\n      \n      // Update in messagesByRoom cache\n      if (roomId) {\n        setMessagesByRoom(prev => {\n          const roomMessages = prev[roomId] || [];\n          return {\n            ...prev,\n            [roomId]: roomMessages.filter(msg => (msg._id || msg.id) !== messageId)\n          };\n        });\n      }\n      \n      // Update in current view if it's the selected room\n      if (roomId && currentSelectedRoomId && roomId === currentSelectedRoomId) {\n        setRoomMessages(prevMessages =>\n          prevMessages.filter(msg => (msg._id || msg.id) !== messageId)\n        );\n      }\n    },\n    onRoomCreated: (data) => {\n      console.log('Room created:', data);\n      getMyRooms();\n    },\n    onUserTyping: (data) => {\n      const currentSelectedRoomId = selectedRoomIdRef.current;\n      if (data.roomId && currentSelectedRoomId && data.roomId === currentSelectedRoomId) {\n        setTypingUsers(prev => ({\n          ...prev,\n          [data.roomId]: {\n            userId: data.userId,\n            userName: data.userName || 'Someone',\n            isTyping: true\n          }\n        }));\n        // Auto-clear typing indicator after 3 seconds\n        setTimeout(() => {\n          setTypingUsers(prev => {\n            const updated = { ...prev };\n            if (updated[data.roomId]?.userId === data.userId) {\n              delete updated[data.roomId];\n            }\n            return updated;\n          });\n        }, 3000);\n      }\n    },\n    onUserStoppedTyping: (data) => {\n      const currentSelectedRoomId = selectedRoomIdRef.current;\n      if (data.roomId && currentSelectedRoomId && data.roomId === currentSelectedRoomId) {\n        setTypingUsers(prev => {\n          const updated = { ...prev };\n          if (updated[data.roomId]?.userId === data.userId) {\n            delete updated[data.roomId];\n          }\n          return updated;\n        });\n      }\n    },\n    onCallHistory: (data) => {\n      console.log('Received call history:', data);\n      // Handle different response formats\n      const calls = Array.isArray(data) ? data : (data?.calls || data?.items || []);\n      if (calls?.length > 0) {\n        // Only set call history, don't show incoming call modal from history\n        // Incoming calls should only come from real-time socket events\n        setCallHistory(calls);\n      }\n    },\n    onIncomingCall: (data) => {\n      console.log('Incoming call received via socket:', data);\n      // Handle real-time incoming call - ONLY show modal for actual incoming calls\n      // Check if this is for the current user (calleeId can be string or object)\n      const calleeId = typeof data.calleeId === 'object' ? data.calleeId._id : data.calleeId;\n      const currentUserIdStr = String(userId);\n      const calleeIdStr = String(calleeId);\n      \n      if (calleeId && calleeIdStr !== currentUserIdStr) {\n        console.log('Incoming call is not for current user, ignoring', { calleeId: calleeIdStr, userId: currentUserIdStr });\n        return;\n      }\n\n      const notificationKey = `call_notification_${data.callSessionId}`;\n          const alreadyNotified = sessionStorage.getItem(notificationKey);\n          \n          if (!alreadyNotified) {\n        toast(` Incoming call from ${data.callerName || 'Someone'}!`, {\n              duration: 3000,\n              position: 'top-center',\n              style: {\n                background: '#ffc107',\n                color: '#000',\n                fontWeight: 'bold',\n                fontSize: '16px',\n              },\n              icon: '',\n            });\n\n            if (Notification.permission === 'granted') {\n              new Notification(' Incoming Call', {\n            body: `${data.callerName || 'Someone'} is calling you`,\n                icon: '/favicon.ico',\n                tag: 'incoming-call',\n                requireInteraction: true\n              });\n            }\n\n            sessionStorage.setItem(notificationKey, 'true');\n          }\n\n      // Transform socket data to match expected format\n      const newIncomingCall = {\n        _id: data.callSessionId,\n        callerId: {\n          _id: data.callerId,\n          name: data.callerName,\n          mainAvatar: data.callerAvatar || null\n        },\n        calleeId: {\n          _id: userId\n        },\n        status: 'ringing',\n        roomId: data.roomId,\n        callType: data.callType\n      };\n      setIncomingCall(newIncomingCall);\n      // Show appropriate modal based on call type\n      if (newIncomingCall.callType === 'video') {\n        setShowVideoCallModal(true);\n        setShowIncomingCallModal(false);\n      } else {\n        setShowIncomingCallModal(true);\n        setShowVideoCallModal(false);\n      }\n      setIsCallModalManuallyClosed(false); // Reset when new call comes\n    },\n     onCallStarted: (data) => {\n      console.log(\" Call started event from server: \", data);\n\n      // Update current call ID if not set\n      if (!currentCallId && data.callSessionId) {\n        setCurrentCallId(data.callSessionId);\n      }\n\n      // Update call state for both caller and callee\n      setCallConnected(true);\n      setCallInitiated(false);\n      // Always show modal when call starts - reopen if it was closed\n      // Check if we have incomingCall to determine call type\n      if (incomingCall && incomingCall.callType === 'video') {\n        setShowVideoCallModal(true);\n        setShowIncomingCallModal(false);\n      } else {\n        setShowIncomingCallModal(true);\n        setShowVideoCallModal(false);\n      }\n      setIsCallModalManuallyClosed(false);\n      \n      // Update incomingCall status to 'connected'\n      setIncomingCall(prev => prev ? { ...prev, status: 'connected' } : null);\n      \n      // Only update call start time if not already set\n      setCallStartTime(prevTime => prevTime || new Date());\n      \n      // Start microphone if not already started\n      if (!isMicOn) {\n        startMic();\n      }\n      \n      console.log(\"Call connected - UI should update with call controls\");\n    },\n\n  onCallEnded: (data) => {\n    console.log(\"Call ended: \", data);\n    // Clear all call-related state\n    setCallConnected(false);\n    setCallInitiated(false);\n    setCurrentCallId(null);\n    setCallStartTime(null);\n    setShowIncomingCallModal(false);\n    setShowVideoCallModal(false);\n    setIncomingCall(null);\n    setIsCallModalManuallyClosed(false);\n    // Clear any notification flags\n    if (data?.callSessionId) {\n      const notificationKey = `call_notification_${data.callSessionId}`;\n      sessionStorage.removeItem(notificationKey);\n    }\n  },\n  onCallDeclined: (data) => {\n    console.log(\"Call declined: \", data);\n    // Clear call state when call is declined\n    setCallConnected(false);\n    setCallInitiated(false);\n    setShowIncomingCallModal(false);\n    setShowVideoCallModal(false);\n    setIsCallModalManuallyClosed(false);\n    if (incomingCall) {\n      const notificationKey = `call_notification_${incomingCall._id}`;\n      sessionStorage.removeItem(notificationKey);\n    }\n    setIncomingCall(null);\n  },\n  onCallError: (data) => {\n    console.error('Call error received:', data);\n    const errorMessage = data?.message || 'Call error occurred';\n    \n    // If error is \"Call already in progress\", clear the call state\n    if (errorMessage.includes('already in progress') || errorMessage.includes('Call already in progress')) {\n      toast.error('Another call is already in progress. Please end the current call first.', {\n        duration: 4000,\n        position: 'top-center',\n        style: {\n          background: '#dc3545',\n          color: '#fff',\n          fontWeight: '500',\n        },\n        icon: '',\n      });\n      // Clear call state\n      setCallConnected(false);\n      setCallInitiated(false);\n      setCurrentCallId(null);\n      setShowIncomingCallModal(false);\n      setIncomingCall(null);\n    } else {\n      toast.error(errorMessage, {\n        duration: 3000,\n        position: 'top-center',\n        style: {\n          background: '#dc3545',\n          color: '#fff',\n          fontWeight: '500',\n        },\n        icon: '',\n      });\n    }\n  },\n    onError: (error) => {\n      console.error('Socket error:', error);\n      toast.error(error.message || 'An error occurred');\n    }\n  });\n\n  const clockTime = () => {\n    setCalenderSchedule(false);\n    setTimeout(() => {\n      setShowClock(true);\n    }, 500);\n  };\n\n  const calenderDate = () => {\n    setCalenderSchedule(false);\n    setTimeout(() => {\n      setShowCalendar(true);\n    }, 500);\n  };\n\n  const handleDateChange = (date) => {\n    setSelectedDate(date);\n    setShowCalendar(false);\n  };\n\n  const calenderScheduleDAte = () => {\n    setNotificationSchedule(false);\n    setTimeout(() => {\n      setCalenderSchedule(true);\n    }, 500);\n  };\n\n  const NotifyScheduleData = (data) => {\n    setSelectedData(data);\n    setCalenderSchedule(false);\n    setTimeout(() => {\n      setNotificationSchedule(true);\n    }, 500);\n  }\n\n  const handleToggleEmojiPicker = () => {\n    setShowEmojiPicker(!showEmojiPicker);\n  };\n\n  const handleSelectEmoji = (emojiObject) => {\n    const { emoji } = emojiObject;\n    // Use emoji Unicode character directly\n    setInputMessage((prevMessage) => prevMessage + emoji);\n    // Close emoji picker after selection\n    setShowEmojiPicker(false);\n  };\n\n  const handleAttachFile = () => {\n    const fileInput = document.getElementById(\"fileInput\");\n    fileInput.click();\n  };\n\n  const handleFileChange = (e) => {\n    const files = e.target.files;\n    if (files?.length > 0) {\n      const selectedFile = files[0];\n      \n      // Validate file type\n      const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];\n      if (!allowedTypes.includes(selectedFile.type)) {\n        alert('Please select an image file (JPEG, PNG, GIF, or WebP)');\n        e.target.value = ''; // Clear the input\n        return;\n      }\n      \n      // Validate file size (max 10MB)\n      const maxSize = 10 * 1024 * 1024; // 10MB\n      if (selectedFile.size > maxSize) {\n        alert('File size must be less than 10MB');\n        e.target.value = ''; // Clear the input\n        return;\n      }\n      \n      setSelectedFile(selectedFile);\n\n      // Create preview URL\n      const imageUrl = URL.createObjectURL(selectedFile);\n      setFilePreview(imageUrl);\n    }\n  };\n\n  const handleRemoveFile = () => {\n    setSelectedFile(null);\n    if (filePreview) {\n      URL.revokeObjectURL(filePreview);\n      setFilePreview(null);\n    }\n    // Clear the file input\n    const fileInput = document.getElementById(\"fileInput\");\n    if (fileInput) {\n      fileInput.value = '';\n    }\n  };\n\n  const handleUserSelect = async (room) => {\n    setTimeout(async () => {\n      // Set selected room ID first\n      setSelectedRoomId(room.roomId);\n      \n      // Mark messages as read when room is opened\n      setUnreadCounts(prev => ({\n        ...prev,\n        [room.roomId]: 0\n      }));\n      \n      // Update last message as read\n      setLastMessages(prev => ({\n        ...prev,\n        [room.roomId]: prev[room.roomId] ? { ...prev[room.roomId], isRead: true } : prev[room.roomId]\n      }));\n      \n      // Load messages from cache if available, otherwise fetch from server\n      if (messagesByRoom[room.roomId] && messagesByRoom[room.roomId].length > 0) {\n        // Restore messages from cache\n        setRoomMessages(messagesByRoom[room.roomId]);\n      } else {\n        // Clear messages if no cache available\n        setRoomMessages([]);\n      }\n\n      // First, get room details\n      await fetchRoomDetails(room.roomId);\n\n      // Ensure gifts are loaded before fetching messages (so gift images can be resolved)\n      if (!gifts || gifts?.length === 0) {\n        await fetchGifts();\n      }\n\n      // Then fetch messages\n      await fetchRoomMessages(room.roomId);\n\n      // Check blocking status after selecting user\n      await checkBlockingStatus(room.otherUser?._id);\n    }, 100);\n  };\n\n  // Function to check if selected user is blocked or has blocked current user\n  const checkBlockingStatus = async (targetUserId) => {\n    if (!targetUserId) return;\n    \n    const currentUserId = user?._id || storedUserId;\n    if (!currentUserId) return;\n\n    try {\n      // Fetch blocked users list if not already loaded\n      if (blockedUsers?.length === 0) {\n        await dispatch(getBlockedUsers(currentUserId)).unwrap();\n      }\n\n      // Check if current user has blocked the selected user\n      const isBlocked = blockedUsers.some(blockedUser => {\n        const blockedId = blockedUser?.blocked?._id || blockedUser?._id || blockedUser?.id;\n        return blockedId === targetUserId;\n      });\n      setIsSelectedUserBlocked(isBlocked);\n\n      // Check if current user is blocked by the selected user\n      const blockedByResult = await dispatch(checkIfBlockedBy({ \n        currentUserId, \n        targetUserId \n      })).unwrap();\n      \n      setIsBlockedBySelectedUser(blockedByResult?.isBlocked || false);\n      \n    } catch (error) {\n      console.error(\"Error checking blocking status:\", error);\n    }\n  };\n\n  // Fetch room details first\n  const fetchRoomDetails = async (roomId) => {\n    if (!roomId) return;\n\n    const userId = user?._id || storedUserId;\n    if (!userId) return;\n\n    try {\n      const response = await getRoomById(roomId, userId);\n      if (response?.isSuccess && response?.data) {\n        const roomData = response.data;\n\n        // Find the other user (not the current user)\n        const otherUser = roomData.users?.find(u => u._id !== userId);\n\n        if (otherUser) {\n          setSelectedUser({\n            ...otherUser,\n            avatar: `${BASE_URL}/assets/images/${otherUser.mainAvatar}`,\n            name: otherUser.name,\n            _id: otherUser._id\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\" Error fetching room details:\", error);\n      console.error(\"Error details:\", error.response?.data || error.message);\n    }\n  };\n\n  // Fetch messages for a specific room using socket\n  // const fetchRoomMessages = async (roomId) => {\n  //   if (!roomId) return;\n  //   if (!userId) return;\n\n  //   setLoadingMessages(true);\n  //   try {\n  //     // Join the room first\n  //     joinRoom(roomId);\n  //     // Then get chat history\n  //     getChatHistory(roomId, 1, 50);\n  //     console.log(\" Room messages fetched successfully\");\n  //   } catch (error) {\n  //     console.error(\"Error fetching room messages:\", error);\n  //         setRoomMessages([]);\n  //     setLoadingMessages(false);\n  //   }\n  // };\n\n  const fetchRoomMessages = async (roomId, page = 1, limit = 50) => {\n  if (!roomId || !userId) return;\n\n  // Don't fetch if we're already loading or if there are no more messages\n  if (loadingMessages || (page > 1 && !hasMoreMessages)) return;\n\n  setLoadingMessages(true);\n  try {\n    // Join the room first if not already joined\n    if (socketService?.currentRoom !== roomId) {\n      socketService.joinRoom(roomId);\n    }\n    \n    // Get chat history with pagination\n    getChatHistory(roomId, page, limit);\n    \n    console.log(` Fetching page ${page} of messages for room ${roomId}`);\n  } catch (error) {\n    console.error(\"Error fetching room messages:\", error);\n    setLoadingMessages(false);\n  }\n};\n\n  const scrollToBottom = () => {\n    if (scrollbarsRef.current) {\n      scrollbarsRef.current.scrollToBottom();\n    }\n  };\n\n  const handleSendMessage = async () => {\n    if (!inputMessage.trim() && !SelectedFile) {\n      return;\n    }\n\n    if (!selectedRoomId) {\n      console.error(\"No room selected\");\n      return;\n    }\n\n    if (!userId) {\n      console.error(\"No user ID available\");\n      return;\n    }\n\n    setIsUploading(true);\n\n    try {\n      const messageText = inputMessage.trim();\n      const replyToId = replyingToMessage?._id || null;\n\n      // If file is selected, upload via API first, then socket will receive the message\n      if (SelectedFile) {\n        try {\n          const response = await sendMessageAPI(\n        selectedRoomId,\n        userId,\n            messageText || 'Sent an image',\n            'file',\n            replyToId,\n        SelectedFile\n      );\n\n      if (response?.isSuccess) {\n            // File uploaded successfully\n            // The message will be received via socket onNewMessage callback\n            toast.success(\"Image sent successfully!\");\n            \n        // Clear input immediately\n        setInputMessage(\"\");\n        setSelectedEmojis([]);\n        setSelectedFile(null);\n            if (filePreview) {\n              URL.revokeObjectURL(filePreview);\n            }\n        setFilePreview(null);\n        setShowEmojiPicker(false);\n        setReplyingToMessage(null);\n          } else {\n            toast.error(\"Failed to upload image. Please try again.\");\n          }\n        } catch (error) {\n          console.error(\"Error uploading file:\", error);\n          toast.error(\"Failed to upload image. Please try again.\");\n        }\n        } else {\n        // Send text message via socket\n        if (replyToId) {\n          // Use reply_message if replying\n          socketSendMessage(selectedRoomId, messageText, replyToId);\n        } else {\n          // Use send_message for regular messages\n          socketSendMessage(selectedRoomId, messageText);\n        }\n\n        // Clear input immediately\n        setInputMessage(\"\");\n        setSelectedEmojis([]);\n        setSelectedFile(null);\n        setFilePreview(null);\n        setShowEmojiPicker(false);\n        setReplyingToMessage(null);\n\n        // Note: The message will be added via onNewMessage callback when server confirms\n      }\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      toast.error(\"Failed to send message. Please try again.\");\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      handleSendMessage();\n    }\n    // Open emoji picker with Ctrl+E\n    if (e.ctrlKey && e.key === \"e\") {\n      e.preventDefault();\n      setShowEmojiPicker(!showEmojiPicker);\n    }\n  };\n\n  const handleStartEdit = (message) => {\n    setEditingMessageId(message._id);\n    setEditedContent(message.content);\n  };\n\n  const handleSaveEdit = async () => {\n    if (!editedContent.trim() || !editingMessageId) {\n      return;\n    }\n\n    if (!userId) {\n      console.error(\"No user ID available\");\n      toast.error(\"Cannot edit message: User not authenticated\");\n      return;\n    }\n\n    try {\n      // Send edit via socket\n      socketEditMessage(editingMessageId, editedContent.trim());\n\n      // Clear editing state immediately (optimistic update)\n      // The actual update will come via onMessageEdited callback\n        setEditingMessageId(null);\n        setEditedContent('');\n    } catch (error) {\n      console.error('Error editing message:', error);\n      toast.error('Failed to edit message. Please try again.');\n    }\n  };\n\n  // Handle canceling edit\n  const handleCancelEdit = () => {\n    setEditingMessageId(null);\n    setEditedContent('');\n  };\n\n  // Handle deleting a message\n  const handleDeleteMessage = async (messageId) => {\n    if (!messageId) {\n      console.error(\"No message ID provided\");\n      return;\n    }\n\n    if (!userId) {\n      console.error(\"No user ID available\");\n      toast.error(\"Cannot delete message: User not authenticated\");\n      return;\n    }\n\n    // Optional: Ask for confirmation\n    if (!window.confirm(\"Are you sure you want to delete this message?\")) {\n      return;\n    }\n\n    try {\n      // Send delete via socket\n      socketDeleteMessage(messageId);\n\n      // Optimistic update - message will be removed via onMessageDeleted callback\n      // But we can also remove it immediately\n        setRoomMessages(prevMessages =>\n          prevMessages.filter(msg => msg._id !== messageId)\n        );\n    } catch (error) {\n      console.error('Error deleting message:', error);\n      toast.error('Failed to delete message. Please try again.');\n    }\n  };\n\n  // Handle replying to a message\n  const handleReplyToMessage = (message) => {\n    if (!message) {\n      return;\n    }\n\n    setReplyingToMessage({\n      _id: message._id,\n      content: message.content,\n      senderName: message.senderId?.name || selectedUser?.name || 'User',\n      senderId: message.senderId?._id,\n      sent: message.sent\n    });\n\n    // Automatically focus on input field\n    setTimeout(() => {\n      const inputField = document.getElementById(\"exampleFormControlInput2\");\n      if (inputField) {\n        inputField.focus();\n      }\n    }, 100);\n  };\n\n  // Handle canceling reply\n  const handleCancelReply = () => {\n    setReplyingToMessage(null);\n  };\n\n  // Handle gift sending with membership check\n  const [userCoins, setUserCoins] = useState(0);\n  const [updatingCoins, setUpdatingCoins] = useState(false);\n\n  // Fetch gifts from API\n  const fetchGifts = async () => {\n    setLoadingGifts(true);\n    try {\n      const response = await getAllGifts(1, 11);\n      if (response.isSuccess) {\n        setGifts(response.data.gifts);\n      }\n    } catch (error) {\n      console.error('Error fetching gifts:', error);\n      toast.error('Failed to load gifts. Please try again.', {\n        duration: 3000,\n        position: 'top-center',\n        style: {\n          background: '#dc3545',\n          color: '#fff',\n          fontWeight: '500',\n        },\n        icon: '',\n      });\n    } finally {\n      setLoadingGifts(false);\n    }\n  };\n\n  // Fetch user coins\n  const fetchUserCoins = async () => {\n    const userId = user?._id || storedUserId;\n    if (!userId) return;\n\n    try {\n      const response = await getUserCoins(userId);\n      \n      if (response.isSuccess) {\n        const coins = response.data?.coins || response.data?.balance || 0;\n        setUserCoins(coins);\n      } else {\n        calculateCoinsFromLocalStorage();\n      }\n    } catch (error) {\n      calculateCoinsFromLocalStorage();\n    }\n  };\n\n  const calculateCoinsFromLocalStorage = () => {\n    try {\n      const userData = JSON.parse(localStorage.getItem('userData') || '{}');\n      const storedCoins = userData?.data?.coins || userData?.coins || 0;\n      \n      if (storedCoins > 0) {\n        setUserCoins(storedCoins);\n      } else {\n        setUserCoins(550);\n      }\n    } catch (error) {\n      setUserCoins(550);\n    }\n  };\n\n  useEffect(() => {\n    const initCoins = async () => {\n      try {\n        const userData = JSON.parse(localStorage.getItem('userData') || '{}');\n        const userId = userData?.data?._id || user?._id || storedUserId;\n        if (!userId) return;\n        const res = await getUserCoins(userId);\n        if (res?.isSuccess) {\n          const coins = res.data?.coins || res.data?.balance || 0;\n          setUserCoins(coins);\n        }\n      } catch (e) {\n        // ignore\n      }\n    };\n    initCoins();\n  }, [user?._id, storedUserId]);\n\n  const handleGiftClick = async (giftItem) => {\n    // Check if a room is selected first\n    if (!selectedRoomId || !selectedUser) {\n      toast.error('Please select a chat to send the gift.', {\n        duration: 3000,\n        position: 'top-center',\n        style: {\n          background: '#dc3545',\n          color: '#fff',\n          fontWeight: '500',\n        },\n        icon: '',\n      });\n      return;\n    }\n\n    // Check if user has any coins at all\n    if (userCoins <= 0) {\n      // No coins available - redirect to subscribe page\n      toast.error('You need coins to send gifts! Please subscribe to get coins.', {\n        duration: 3000,\n        position: 'top-center',\n        style: {\n          background: '#f24570',\n          color: '#fff',\n          fontWeight: '500',\n        },\n        icon: '',\n      });\n      \n      // Redirect after a short delay to let user see the toast\n      setTimeout(() => {\n        navigate('/metrimonial/membership');\n      }, 1500);\n      return;\n    }\n\n    if (userCoins < giftItem.coinCost) {\n      toast.error(`Insufficient coins! You need ${giftItem.coinCost} coins but have ${userCoins}. Please get more coins.`, {\n        duration: 4000,\n        position: 'top-center',\n        style: {\n          background: '#dc3545',\n          color: '#fff',\n          fontWeight: '500',\n        },\n        icon: '',\n        action: {\n          label: 'Get Coins',\n          onClick: () => navigate('/metrimonial/membership')\n        }\n      })\n      navigate('/metrimonial/membership');\n      return;\n    }\n\n    await sendGiftToUser(giftItem);\n  };\n\n  const sendGiftToUser = async (giftItem) => {\n    if (!selectedRoomId || !selectedUser) {\n      console.error(\"No room or user selected\");\n      return;\n    }\n\n    const userId = user?._id || storedUserId;\n    if (!userId) {\n      console.error(\"No user ID available\");\n      return;\n    }\n\n    setSendingGift(true);\n    try {\n      // Send gift via API\n        const giftData = {\n          senderId: userId,\n          receiverId: selectedUser._id,\n          giftId: giftItem._id,\n        message: giftItem.description || giftItem.name\n      };\n\n      const response = await sendGiftApi(giftData);\n\n      if (response?.isSuccess) {\n        const newBalance = response.data.remainingCoins || (userCoins - giftItem.coinCost);\n        console.log(`Updating coin balance: ${userCoins} - ${giftItem.coinCost} = ${newBalance}`);\n          setUpdatingCoins(true);\n          setUserCoins(newBalance);\n        \n        // Update localStorage with new balance\n        try {\n          const userData = JSON.parse(localStorage.getItem('userData') || '{}');\n          if (userData?.data) {\n            userData.data.coins = newBalance;\n          } else {\n            userData.coins = newBalance;\n          }\n          localStorage.setItem('userData', JSON.stringify(userData));\n          console.log('Updated localStorage with new coin balance:', newBalance);\n        } catch (error) {\n          console.error('Error updating localStorage:', error);\n        }\n        \n        // Create gift message for chat\n      const giftMessage = ` Sent a gift: ${giftItem.name}`;\n\n        // Send gift message via socket\n        socketSendMessage(selectedRoomId, giftMessage);\n        \n        // Note: The message will be added via onNewMessage callback when server confirms\n        \n        // Show success toast with updated balance\n        toast.success(`Gift \"${giftItem.name}\" sent successfully! Coins deducted: ${giftItem.coinCost}. New balance: ${newBalance}`, {\n          duration: 4000,\n          position: 'top-center',\n          style: {\n            background: '#28a745',\n            color: '#fff',\n            fontWeight: '500',\n          },\n          icon: '',\n        });\n\n        // Refresh coin balance from API to ensure accuracy\n        setTimeout(() => {\n          fetchUserCoins();\n          setUpdatingCoins(false);\n        }, 1000);\n\n        // Notify other components about coin balance change\n        window.dispatchEvent(new CustomEvent('coinBalanceUpdated', { \n          detail: { newBalance, deductedAmount: giftItem.coinCost } \n        }));\n      }\n    } catch (error) {\n      console.error(\"Error sending gift:\", error);\n      toast.error(\"Failed to send gift. Please try again.\", {\n        duration: 3000,\n        position: 'top-center',\n        style: {\n          background: '#dc3545',\n          color: '#fff',\n          fontWeight: '500',\n        },\n        icon: '',\n      });\n    } finally {\n      setSendingGift(false);\n    }\n  };\n\n  const [isDropdownOpen, setDropdownOpen] = useState(false);\n\n  const toggleDropdown = () => {\n    setDropdownOpen(!isDropdownOpen);\n  };\n\n\n  const handleSearch = (query) => {\n    const filtered = chatRooms.filter((room) =>\n      room.otherUser?.name?.toLowerCase().includes(query?.toLowerCase()) ||\n      room.otherUser?.userName?.toLowerCase().includes(query?.toLowerCase())\n    );\n    setFilteredItems(filtered);\n  };\n\n  const handleChange = (event) => {\n    const query = event.target.value;\n    setSearchQuery(query);\n    handleSearch(query);\n  };\n\n\n\n  useEffect(() => {\n    // Fetch rooms using socket\n    if (userId && isConnected) {\n      getMyRooms();\n    }\n\n    // Fetch blocked users on component mount\n    if (userId) {\n      dispatch(getBlockedUsers(userId));\n    }\n\n    // Fetch gifts and user coins\n    fetchGifts();\n    // Delay coin fetching to ensure user data is available\n    setTimeout(() => {\n      fetchUserCoins();\n    }, 1000);\n  }, [userId, isConnected, dispatch]);\n\n  // Re-check blocking status when selectedUser changes\n  useEffect(() => {\n    if (selectedUser?._id) {\n      checkBlockingStatus(selectedUser._id);\n    }\n  }, [selectedUser?._id]);\n\n  // Refresh coins when user data changes\n  useEffect(() => {\n    if (user?._id || storedUserId) {\n      console.log(\"User data changed, refreshing coins\");\n      setTimeout(() => {\n        fetchUserCoins();\n      }, 500);\n    }\n  }, [user?._id, storedUserId]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobileView(window.innerWidth <= 768);\n    };\n\n    handleResize();\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  // Close emoji picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (showEmojiPicker && !event.target.closest('.emoji-picker-container') && !event.target.closest('.smile-message-input')) {\n        setShowEmojiPicker(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showEmojiPicker]);\n\n  // Cleanup file preview URL on unmount\n  useEffect(() => {\n    return () => {\n      if (filePreview) {\n        URL.revokeObjectURL(filePreview);\n      }\n    };\n  }, [filePreview]);\n\n  // Request notification permission on component mount\n  useEffect(() => {\n    if ('Notification' in window && Notification.permission === 'default') {\n      Notification.requestPermission();\n    }\n  }, []);\n\n  // Incoming calls are handled via real-time socket events (onIncomingCall)\n  // No need to poll - socket will notify us immediately when a call comes in\n  // useEffect removed - incoming calls come via socket events only\n\n  const renderChatUsersList = () => {\n    return (\n      <div>\n        <MDBInputGroup className=\"rounded mb-3 px-lg-3\">\n          <input\n            className=\"form-control headerChat\"\n            placeholder=\"Search\" \n            type=\"search\"\n            style={{ height: 50 }}\n            onChange={handleChange}\n          />\n          <span\n            className=\"input-group-text border-0 pointer\"\n            id=\"search-addon\"\n            style={{\n              backgroundColor: \"rgb(242, 69, 112)\",\n              color: \"#FFFF\",\n            }}\n          >\n            <MDBIcon fas icon=\"search\" />\n          </span>\n        </MDBInputGroup>\n\n        <Scrollbars className=\"chat-list-wrap\"\n          autoHide\n          style={{ position: \"relative\", height: \"72vh\", padding: \"0 0 0 10px\" }}\n        >\n          <MDBTypography listUnStyled className=\"mb-0 m-3\">\n            {chatRooms?.length === 0 ? (\n              <div className=\"text-center text-muted p-4\">\n                <p>No chat rooms available</p>\n              </div>\n            ) : (filteredItems?.length > 0 ? filteredItems : chatRooms).map((room) => (\n              <li\n                key={room.roomId}\n                className=\"p-2 border-bottom pointer\"\n                onClick={() => handleUserSelect(room)}\n              >\n                <a\n                  href=\"#!\"\n                  className=\"d-flex justify-content-between\"\n                >\n                  <div className=\"d-flex flex-row\" style={{ gap: '15px' }}>\n                    <div style={{ width: '60px', height: '60px', position: 'relative' }}>\n                      <img\n                        src={`${BASE_URL}/assets/images/${room.otherUser?.mainAvatar}`}\n                        alt=\"avatar\"\n                        className=\"d-flex align-self-center me-3\"\n                        style={{\n                          borderRadius: '50%',\n                          objectFit: 'cover',\n                          width: '55px',\n                          height: '55px'\n                        }}\n                        onError={(e) => {\n                          e.target.src = dummyUserPic;\n                        }}\n                      />\n                      {unreadCounts[room.roomId] > 0 && (\n                        <span \n                          className=\"badge bg-danger rounded-pill\"\n                          style={{ \n                            position: 'absolute',\n                            top: '-5px',\n                            right: '-5px',\n                            fontSize: '10px',\n                            minWidth: '18px',\n                            height: '18px',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            padding: '0 5px',\n                            border: '2px solid white',\n                            zIndex: 1\n                          }}\n                        >\n                          {unreadCounts[room.roomId] > 99 ? '99+' : unreadCounts[room.roomId]}\n                        </span>\n                      )}\n                      <span className=\"badge bg-success badge-dot\"></span>\n                    </div>\n\n                    <div className=\"pt-1\" style={{ flex: 1, minWidth: 0 }}>\n                      <div className=\"d-flex justify-content-between align-items-start\">\n                        <p className=\"fw-bold mb-0\" style={{ flex: 1, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n                          {room.otherUser?.name}\n                        </p>\n                        {unreadCounts[room.roomId] > 0 && (\n                          <span \n                            className=\"badge bg-danger rounded-pill ms-2\"\n                            style={{ \n                              fontSize: '11px',\n                              minWidth: '20px',\n                              height: '20px',\n                              display: 'flex',\n                              alignItems: 'center',\n                              justifyContent: 'center',\n                              padding: '0 6px'\n                            }}\n                          >\n                            {unreadCounts[room.roomId] > 99 ? '99+' : unreadCounts[room.roomId]}\n                          </span>\n                        )}\n                      </div>\n                      <p className=\"small mb-0\" style={{ \n                        color: unreadCounts[room.roomId] > 0 ? '#000' : '#6c757d',\n                        fontWeight: unreadCounts[room.roomId] > 0 ? '500' : '400',\n                        overflow: 'hidden',\n                        textOverflow: 'ellipsis',\n                        whiteSpace: 'nowrap'\n                      }}>\n                        {unreadCounts[room.roomId] > 0 ? (\n                          <span style={{ color: '#25D366', fontWeight: '600' }}>New message</span>\n                        ) : lastMessages[room.roomId] ? (\n                          lastMessages[room.roomId].message\n                        ) : (\n                          ''\n                        )}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"pt-1 text-end\" style={{ minWidth: '60px' }}>\n                    <p className=\"small text-muted mb-0\">\n                      {lastMessages[room.roomId]?.timestamp \n                        ? new Date(lastMessages[room.roomId].timestamp).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n                        : new Date(room.updatedAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n                      }\n                    </p>\n                  </div>\n                </a>\n              </li>\n            ))}\n          </MDBTypography>\n        </Scrollbars>\n      </div>\n    );\n  };\n\n  const renderChatBox = () => {\n    return (\n      <div>\n        {selectedUser ? (\n          <div>\n            <div\n              className=\"row py-1 mb-2 border-bottom shadow-md bg-[#f5f5f5];\"\n            // style={{ marginLeft: \"1px\", marginRight: \"10px\" }}\n            >\n              <div className=\"col-7 chat-dp\">\n                {\" \"}\n                {/* Adjusted column width for medium screens and larger */}\n                <div className=\"row chat-status\">\n                  <div className=\"col-4 col-lg-2\">\n                    {\" \"}\n                    {/* Adjusted column width for medium screens and larger */}\n                    <img\n                      src={ selectedUser.avatar }\n                      alt=\"avatar\"\n                      className=\"d-flex align-self-center\"\n                      style={{\n                        borderRadius: '50%',\n                        width: \"50px\",\n                        height: \"50px\",\n                        maxWidth: \"45px\",\n                      }}\n                    />\n                  </div>\n\n                  <div className=\"col-8 py-2 col-lg-8 d-flex gap-2\">\n                    {\" \"}\n                    {/* Adjusted column width for medium screens and larger */}\n                    <h6>\n                      {selectedUser ? selectedUser.name : \"Select a user\"}<br />\n                      <small\n                        style={{\n                          color: \"green\",\n                          fontSize: \"0.9rem\",\n                          marginTop: \"-10px\",\n                        }}\n                      >\n                        Active\n                      </small>\n                    </h6>\n                    {/* User coins display */}\n                    <div className=\"mt-1 d-flex align-items-center gap-2\">\n                      <small style={{\n                        color: \"#6c757d\",\n                        fontSize: \"0.8rem\",\n                        fontWeight: \"500\"\n                      }}>\n                         {updatingCoins ? (\n                          <span style={{ color: \"#ffc107\" }}>\n                            <i className=\"fa fa-spinner fa-spin\"></i> Updating...\n                          </span>\n                        ) : (\n                          `${userCoins} coins`\n                        )}\n                      </small>\n                      <button \n                        className=\"btn btn-sm btn-outline-primary\"\n                        onClick={() => {\n                          fetchUserCoins();\n                        }}\n                        style={{ \n                          fontSize: \"8px\", \n                          padding: \"1px 4px\",\n                          lineHeight: \"1\"\n                        }}\n                        title=\"Refresh coin balance\"\n                      >\n                        <i className=\"fa fa-refresh\"></i>\n                      </button>\n                      \n                    </div>\n\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"col-5 chat-opt\">\n                {\" \"}\n                <div className=\"float-end me-2 con-info\">\n                  {\" \"}\n                  <Link className=\"float-end header__more fs-3 my-2 text-muted\" >\n                    <span\n                      to=\"#\"\n                      className=\"pointer\"\n                      style={{\n                        fontWeight: \"700\",\n                      }}\n                      data-bs-toggle=\"dropdown\"\n                    >\n                      <i\n                        class=\"fa fa-ellipsis-v\"\n                        aria-hidden=\"true\"\n                      ></i>\n                    </span>\n                    <ul className=\"dropdown-menu\" style={{\n                      width: \"200px\"\n                    }}>\n                      <li>\n\n                        <Link className=\"dropdown-item py-2\"\n                          onClick={() => setCalenderSchedule(true)}\n                        >\n                          <i\n                            className=\"fa-solid fa-circle-info me-3\"\n                            aria-hidden=\"true\"\n                            title=\"date Schedule\"\n                          ></i>{\" \"}\n                          Schedule Date\n                        </Link>\n                      </li>\n                      <li>\n\n                        <Link className=\"dropdown-item py-2\"\n                          onClick={() => setCheckCompatibility(true)}\n                        >\n                          <i\n                            className=\"fa fa-question-circle-o me-3\"\n                            aria-hidden=\"true\"\n                            title=\"Check Compatibility\"\n                          ></i>{\" \"}\n                          Compatibility\n                        </Link>\n                      </li>\n                      <li>\n\n                        <Link className=\"dropdown-item py-2\"\n                          onClick={() => setMilestone(true)}\n                        >\n                          <i class=\"fa fa-history me-3\" aria-hidden=\"true\"></i>\n                          {\" \"}\n                          Track Milestone\n                        </Link>\n                      </li>\n                      <li>\n                        <Link className=\"dropdown-item py-2\"\n                          onClick={() => setBlockUser(true)}\n                        >\n                          <i\n                            class=\"fa fa-ban me-3\"\n                            aria-hidden=\"true\"\n                          ></i>{\" \"}\n                          {isSelectedUserBlocked ? \"Unblock\" : \"Block\"}\n                        </Link>\n                      </li>\n                      <li>\n                        <Link className=\"dropdown-item py-2\"\n                          onClick={() => setReportUser(true)}\n                        >\n                          <i\n                            class=\"fa fa-flag me-3\"\n                            aria-hidden=\"true\"\n                          ></i>{\" \"}\n                          Report\n                        </Link>\n                      </li>\n                      <li>\n                        <Link className=\"dropdown-item py-2\"\n                          onClick={() => {\n                            setShowCallHistory(true);\n                            fetchCallHistory();\n                          }}\n                        >\n                          <i\n                            class=\"fa fa-history me-3\"\n                            aria-hidden=\"true\"\n                          ></i>{\" \"}\n                          Call History\n                        </Link>\n                      </li>\n                    </ul>\n                  </Link>\n\n                  <Link className=\"float-end fs-4 text-muted my-2\" onClick={handleShow}>\n                    <i class=\"fa fa-phone\" aria-hidden=\"true\"></i>\n                  </Link>\n                  <IncomingCallModal \n                    show={showModal} \n                    onHide={handleHide}\n                    selectedUser={selectedUser}\n                    currentUserId={user?._id || storedUserId}\n                    selectedRoomId={selectedRoomId}\n                  />\n\n                  <Link className=\"float-end fs-4 text-muted my-2\" onClick={handleShowVideoCall}>\n                    <i\n                      class=\"fa fa-video-camera\"\n                      aria-hidden=\"true\"\n                    ></i>\n                  </Link>\n                  <VideoCallModal \n                    show={showVideoCallModal} \n                    onHide={handleHideVideoCall}\n                    selectedUser={selectedUser}\n                    currentUserId={user?._id || storedUserId}\n                    selectedRoomId={selectedRoomId}\n                  />\n\n                </div>\n              </div>\n            </div>\n\n            <div className=\"message-box\">\n              {selectedUser ?\n                <Scrollbars\n                  autoHide className=\"msg-wrap\"\n                  style={{ position: \"relative\", height: \"65vh\", paddingBottom: \"120px\" }}\n                  id=\"chat-container\"\n                  ref={scrollbarsRef}\n                >\n                  {(() => {\n                   \n                    return null;\n                  })()}\n\n                  {loadingMessages ? (\n                    <div className=\"text-center p-5\">\n                      <div className=\"spinner-border text-primary\" role=\"status\">\n                        <span className=\"sr-only\">Loading messages...</span>\n                      </div>\n                    </div>\n                  ) : roomMessages?.length === 0 ? (\n                    <div className=\"text-center text-muted p-5\">\n                      <p>No messages yet. Start the conversation!</p>\n                    </div>\n                  ) : (\n                    <>\n                      {roomMessages.map((message) => {\n                        console.log(\"msgggggggg\",message)\n                        return (\n                          <div\n                            key={message.id}\n                            className={`px-3 px-md-5 d-flex flex-row chat-solo justify-content-${message.sent ? \"end\" : \"start\"\n                              }`}\n                          >\n                          {message.sent ? (\n                            <>\n\n                              <div style={{ maxWidth: \"70%\", display: \"flex\", alignItems: \"center\" }}>\n                                {message.messageType === 'file' || message.fileUrl ? (\n                                  <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"flex-end\" }}>\n                                  <img\n                                      src={message.fileUrl ? (message.fileUrl.startsWith('http') ? message.fileUrl : `${BASE_URL}/${message.fileUrl}`) : (message.file ? URL.createObjectURL(message.file) : '')}\n                                    alt={`file ${message.id}`}\n                                    style={{\n                                        maxWidth: \"200px\",\n                                        maxHeight: \"200px\",\n                                        borderRadius: \"8px\",\n                                        objectFit: \"cover\",\n                                        cursor: \"pointer\"\n                                      }}\n                                      onError={(e) => {\n                                        console.error('Error loading image:', message.fileUrl);\n                                        e.target.src = dummyUserPic;\n                                      }}\n                                      onClick={() => {\n                                        // Open image in new tab for full view\n                                        const imageUrl = message.fileUrl ? (message.fileUrl.startsWith('http') ? message.fileUrl : `${BASE_URL}/${message.fileUrl}`) : (message.file ? URL.createObjectURL(message.file) : '');\n                                        if (imageUrl) {\n                                          window.open(imageUrl, '_blank');\n                                        }\n                                      }}\n                                    />\n                                    {message.content && (\n                                      <div\n                                        className=\"small p-2 me-3 mb-1 rounded-3\"\n                                        style={{\n                                          backgroundColor: \"#f24570\",\n                                          color: \"#ffffff\",\n                                          display: \"inline-block\",\n                                          marginTop: \"8px\"\n                                        }}\n                                      >\n                                        {message.content}\n                                      </div>\n                                    )}\n                                  </div>\n                                ) : message.messageType === 'gift' ? (\n                                  <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"flex-end\" }}>\n                                    {(() => {\n                                      const parsedName = (message?.content || \"\").split(\": \")[1] || \"\";\n                                      const imgUrl = message?.giftData?.imageUrl || (gifts.find(g => g.name === parsedName)?.imageUrl);\n                                      return (\n                                        <div className=\"small p-2 me-3 mb-1 rounded-3 gift-pop\" style={{ backgroundColor: \"#f24570\", color: \"#ffffff\", display: \"flex\", alignItems: \"center\", gap: \"10px\", border: \"2px solid #ffd700\" }}>\n                                          {imgUrl ? (\n                                            <img src={imgUrl} alt={parsedName || 'gift'} style={{ width: 64, height: 64, borderRadius: 8, objectFit: 'cover' }} />\n                                          ) : (\n                                            <span style={{ fontSize: \"20px\" }}></span>\n                                          )}\n                                          <div>\n                                            <div style={{ fontWeight: \"600\" }}>Gift Sent!</div>\n                                            {parsedName && <div style={{ fontSize: \"12px\", opacity: 0.9 }}>{parsedName}</div>}\n                                          </div>\n                                        </div>\n                                      );\n                                    })()}\n                                  </div>\n                                ) : (\n                                  <>\n                                    <div className=\"dropdown\" style={{ marginRight: \"8px\" }}>\n                                      <button\n                                        className=\"btn btn-sm btn-link text-muted p-1 mt-[10px] ml-[10px]\" style={{ marginRight: \"10px\", marginTop: \"10px\" }}\n                                        type=\"button\"\n                                        data-bs-toggle=\"dropdown\"\n                                        aria-expanded=\"false\"\n                                      >\n                                        \n                                      </button>\n                                      <ul className=\"dropdown-menu\">\n                                        <li>\n                                          <button\n                                            className=\"dropdown-item\"\n                                            onClick={() => handleStartEdit(message)}\n                                          >\n                                            Edit\n                                          </button>\n                                        </li>\n                                        <li>\n                                          <button\n                                            className=\"dropdown-item\"\n                                            onClick={() => handleDeleteMessage(message._id)}\n                                          >\n                                            Delete\n                                          </button>\n                                        </li>\n                                        <li>\n                                          <button\n                                            className=\"dropdown-item\"\n                                            onClick={() => handleReplyToMessage(message)}\n                                          >\n                                            Reply\n                                          </button>\n                                        </li>\n                                      </ul>\n                                    </div>\n\n                                    <div>\n                                      {editingMessageId === message._id ? (\n                                        <div className=\"d-flex flex-column\">\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control mb-2\"\n                                            value={editedContent}\n                                            onChange={(e) => setEditedContent(e.target.value)}\n                                            onKeyDown={(e) => {\n                                              if (e.key === 'Enter') {\n                                                handleSaveEdit();\n                                              } else if (e.key === 'Escape') {\n                                                handleCancelEdit();\n                                              }\n                                            }}\n                                            autoFocus\n                                            style={{\n                                              backgroundColor: \"#fff\",\n                                              color: \"#000\",\n                                            }}\n                                          />\n                                          <div className=\"d-flex gap-2\">\n                                            <button\n                                              className=\"btn btn-sm btn-success\"\n                                              onClick={handleSaveEdit}\n                                            >\n                                              Save\n                                            </button>\n                                            <button\n                                              className=\"btn btn-sm btn-secondary\"\n                                              onClick={handleCancelEdit}\n                                            >\n                                              Cancel\n                                            </button>\n                                          </div>\n                                        </div>\n                                      ) : (\n                                        <>\n                                          <div\n                                            className=\"small p-2 me-3 mb-1 rounded-3\"\n                                            style={{\n                                              backgroundColor: \"#f24570\",\n                                              color: \"#ffffff\",\n                                              display: \"inline-block\",\n                                              fontSize: \"14px\",\n                                              lineHeight: \"1.4\",\n                                              wordBreak: \"break-word\"\n                                            }}\n                                          >\n                                            {/* Reply Information */}\n                                            {message.replyTo && (\n                                              <div\n                                                style={{\n                                                  backgroundColor: \"rgba(255,255,255,0.15)\",\n                                                  padding: \"6px 8px\",\n                                                  borderRadius: \"4px\",\n                                                  marginBottom: \"6px\",\n                                                  fontSize: \"11px\",\n                                                  borderLeft: \"3px solid #fff\"\n                                                }}\n                                              >\n                                                <div style={{ fontWeight: \"600\", marginBottom: \"2px\" }}>\n                                                  Replied by: {message.replyTo.senderId?.name || 'You'}\n                                                </div>\n                                                <div style={{ opacity: 0.85, fontStyle: \"italic\" }}>\n                                                  {message.replyTo.content?.length > 40\n                                                    ? message.replyTo.content.substring(0, 40) + '...'\n                                                    : message.replyTo.content}\n                                                </div>\n                                              </div>\n                                            )}\n                                            {message.content}\n                                          </div>\n                                          <p\n                                            className=\"small me-3 mb-0 text-muted\"\n                                            style={{ fontSize: \"11px\" }}\n                                          >\n                                            {message.timestamp}\n                                          </p>\n                                        </>\n                                      )}\n                                    </div>\n                                  </>\n                                )}\n                              </div>\n\n\n                              <img\n                                src={`${BASE_URL}/assets/images/${user.mainAvatar}`}\n                                alt={`avatar ${message.id}`}\n                                style={{\n                                  borderRadius: '50%',\n                                  width: \"45px\",\n                                  height: \"45px\",\n                                  objectFit: 'cover',\n                                  height: \"45px\",\n                                  maxWidth: \"45px\",\n                                }}\n                                onError={(e) => {\n                                  e.target.src = dummyUserPic;\n                                }}\n                              />\n                            </>\n                          ) : (\n\n\n                            <>\n                              <div style={{ display: \"flex\", alignItems: \"flex-start\", gap: \"10px\", maxWidth: \"100%\" }}>\n\n                                <img\n                                  src={selectedUser ? selectedUser.avatar :\"main233333\"}\n                                  alt=\"avatar\"\n                                  className=\"d-flex align-self-center\"\n                                  style={{\n                                    borderRadius: \"50%\",\n                                    width: \"45px\",\n                                    height: \"45px\",\n                                    flexShrink: 0,\n                                  }}\n                                />\n\n                                <div style={{ display: \"flex\", alignItems: \"center\", maxWidth: \"80%\", flexWrap: \"wrap\" }}>\n                                  {message.messageType === 'file' || message.fileUrl ? (\n                                    <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"flex-start\" }}>\n                                    <img\n                                        src={message.fileUrl ? (message.fileUrl.startsWith('http') ? message.fileUrl : `${BASE_URL}/${message.fileUrl}`) : (message.file ? URL.createObjectURL(message.file) : '')}\n                                      alt={`file ${message.id}`}\n                                      style={{\n                                          maxWidth: \"200px\",\n                                          maxHeight: \"200px\",\n                                        borderRadius: \"8px\",\n                                          objectFit: \"cover\",\n                                          cursor: \"pointer\"\n                                        }}\n                                        onError={(e) => {\n                                          console.error('Error loading image:', message.fileUrl);\n                                          e.target.src = dummyUserPic;\n                                        }}\n                                        onClick={() => {\n                                          // Open image in new tab for full view\n                                          const imageUrl = message.fileUrl ? (message.fileUrl.startsWith('http') ? message.fileUrl : `${BASE_URL}/${message.fileUrl}`) : (message.file ? URL.createObjectURL(message.file) : '');\n                                          if (imageUrl) {\n                                            window.open(imageUrl, '_blank');\n                                          }\n                                        }}\n                                      />\n                                      {message.content && (\n                                        <div\n                                          className=\"small p-2 mb-1 rounded-3\"\n                                          style={{\n                                            backgroundColor: \"#f5f6f7\",\n                                            color: \"#000\",\n                                            marginRight: \"8px\",\n                                            display: \"inline-block\",\n                                            marginTop: \"8px\"\n                                          }}\n                                        >\n                                          {message.content}\n                                        </div>\n                                      )}\n                                    </div>\n                                  ) : message.messageType === 'gift' ? (\n                                    <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"flex-start\" }}>\n                                      {(() => {\n                                        const parsedName = (message?.content || \"\").split(\": \")[1] || \"\";\n                                        const imgUrl = message?.giftData?.imageUrl || (gifts.find(g => g.name === parsedName)?.imageUrl);\n                                        return (\n                                          <div className=\"small p-2 mb-1 rounded-3 gift-pop\" style={{ backgroundColor: \"#f5f6f7\", color: \"#000\", marginRight: \"8px\", display: \"flex\", alignItems: \"center\", gap: \"10px\", border: \"2px solid #ffd700\" }}>\n                                            {imgUrl ? (\n                                              <img src={imgUrl} alt={parsedName || 'gift'} style={{ width: 64, height: 64, borderRadius: 8, objectFit: 'cover' }} />\n                                            ) : (\n                                              <span style={{ fontSize: \"20px\" }}></span>\n                                            )}\n                                            <div>\n                                              <div style={{ fontWeight: \"600\", color: \"#f24570\" }}>Gift Received!</div>\n                                              {parsedName && <div style={{ fontSize: \"12px\", color: \"#6c757d\" }}>{parsedName}</div>}\n                                            </div>\n                                          </div>\n                                        );\n                                      })()}\n                                    </div>\n                                  ) : (\n                                    <>\n                                      <div\n                                        className=\"small p-2 mb-1 rounded-3\"\n                                        style={{\n                                          backgroundColor: \"#f5f6f7\",\n                                          color: \"#000\",\n                                          marginRight: \"8px\",\n                                          display: \"inline-block\",\n                                          fontSize: \"14px\",\n                                          lineHeight: \"1.4\",\n                                          wordBreak: \"break-word\"\n                                        }}\n                                      >\n                                        {/* Reply Information */}\n                                        {message.replyTo && (\n                                          <div\n                                            style={{\n                                              backgroundColor: \"rgba(242, 69, 112, 0.1)\",\n                                              padding: \"6px 8px\",\n                                              borderRadius: \"4px\",\n                                              marginBottom: \"6px\",\n                                              fontSize: \"11px\",\n                                              borderLeft: \"3px solid #f24570\"\n                                            }}\n                                          >\n                                            <div style={{ fontWeight: \"600\", marginBottom: \"2px\", color: \"#f24570\" }}>\n                                              Replied to: {message.replyTo.senderId?.name || 'You'}\n                                            </div>\n                                            <div style={{ color: \"#6c757d\", fontStyle: \"italic\" }}>\n                                              {message.replyTo.content?.length > 40\n                                                ? message.replyTo.content.substring(0, 40) + '...'\n                                                : message.replyTo.content}\n                                            </div>\n                                          </div>\n                                        )}\n                                        {message.content}\n                                      </div>\n\n                                      <div className=\"dropdown\" style={{ marginLeft: \"10px\", marginTop: \"0px\" }}>\n                                        <button\n                                          className=\"btn btn-sm btn-link text-muted p-1 mt-[10px] \" style={{ marginLeft: \"10px\", marginTop: \"10px\" }}\n                                          type=\"button\"\n                                          data-bs-toggle=\"dropdown\"\n                                          aria-expanded=\"false\"\n                                        >\n                                          \n                                        </button>\n                                        <ul className=\"dropdown-menu\">\n\n                                        \n                                          <li>\n                                            <button\n                                              className=\"dropdown-item\"\n                                              onClick={() => handleReplyToMessage(message)}\n                                            >\n                                              Reply\n                                            </button>\n                                          </li>\n                                        </ul>\n                                      </div>\n\n                                      <p\n                                        className=\"small text-muted mb-0\"\n                                        style={{\n                                          fontSize: \"11px\",\n                                          width: \"100%\",\n                                          marginLeft: \"4px\",\n                                        }}\n                                      >\n                                        {message.timestamp}\n                                      </p>\n                                    </>\n                                  )}\n                                </div>\n                              </div>\n                            </>\n\n                          )}\n                          </div>\n                        )\n                      })}\n                      \n                      {/* Typing Indicator */}\n                      {typingUsers[selectedRoomId] && (\n                        <div className=\"px-3 px-md-5 d-flex flex-row chat-solo justify-content-start\">\n                          <div style={{ display: \"flex\", alignItems: \"flex-start\", gap: \"10px\" }}>\n                            <img\n                              src={`${BASE_URL}/assets/images/${selectedUser?.mainAvatar}`}\n                              alt=\"avatar\"\n                              className=\"d-flex align-self-center\"\n                              style={{\n                                borderRadius: \"50%\",\n                                width: \"45px\",\n                                height: \"45px\",\n                                flexShrink: 0,\n                              }}\n                            />\n                            <div\n                              className=\"small p-2 mb-1 rounded-3\"\n                              style={{\n                                backgroundColor: \"#f5f6f7\",\n                                color: \"#6c757d\",\n                                display: \"inline-block\",\n                                fontSize: \"14px\",\n                                fontStyle: \"italic\"\n                              }}\n                            >\n                              {typingUsers[selectedRoomId].userName} is typing...\n                              <span className=\"ms-2\">\n                                <span className=\"typing-dot\" style={{ animationDelay: '0s' }}>.</span>\n                                <span className=\"typing-dot\" style={{ animationDelay: '0.2s' }}>.</span>\n                                <span className=\"typing-dot\" style={{ animationDelay: '0.4s' }}>.</span>\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                      \n                      {/* Unblock button at the end of messages (Instagram style) */}\n                      {isSelectedUserBlocked && (\n                        <div className=\"text-center py-3 px-3\">\n                          <button\n                            className=\"btn btn-outline-success\"\n                            onClick={() => setBlockUser(true)}\n                            style={{\n                              borderRadius: \"25px\",\n                              padding: \"10px 25px\",\n                              fontSize: \"14px\",\n                              fontWeight: \"500\",\n                              borderWidth: \"2px\",\n                              borderColor: \"rgb(242, 69, 112)\",\n                              color: \"rgb(242, 69, 112)\",\n                              transition: \"all 0.3s ease\"\n                            }}\n                            onMouseEnter={(e) => {\n                              e.target.style.backgroundColor = \"rgb(242, 69, 112)\";\n                              e.target.style.color = \"white\";\n                              // Make icon white on hover\n                              const icon = e.target.querySelector('i');\n                              if (icon) {\n                                icon.style.color = \"white\";\n                              }\n                            }}\n                            onMouseLeave={(e) => {\n                              e.target.style.backgroundColor = \"transparent\";\n                              e.target.style.color = \"rgb(242, 69, 112)\";\n                              // Make icon pink again when not hovering\n                              const icon = e.target.querySelector('i');\n                              if (icon) {\n                                icon.style.color = \"rgb(242, 69, 112)\";\n                              }\n                            }}\n                            >\n                              <i className=\"fa fa-unlock me-2\" aria-hidden=\"true\" style={{ color: \"rgb(242, 69, 112)\" }}></i>\n                              Unblock {selectedUser?.name}\n                            </button>\n                        </div>\n                      )}\n                    </>\n                  )}\n                </Scrollbars> : <div>\n                  <img\n                    src={chatBG}\n                    alt=\"chat backgrount picture\"\n                    style={{ backgroundSize: \"cover\" }}\n                  />\n                </div>\n              }\n            </div>\n\n            {/* File Preview */}\n            {filePreview && (\n              <div\n                className=\"file-preview px-3 py-2 mt-2 mx-2\"\n                style={{\n                  backgroundColor: \"#f8f9fa\",\n                  borderLeft: \"4px solid #28a745\",\n                  borderRadius: \"4px\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\"\n                }}\n              >\n                <div style={{ display: \"flex\", alignItems: \"center\", flex: 1 }}>\n                  <img\n                    src={filePreview}\n                    alt=\"File preview\"\n                    style={{\n                      width: \"50px\",\n                      height: \"50px\",\n                      objectFit: \"cover\",\n                      borderRadius: \"8px\",\n                      marginRight: \"10px\"\n                    }}\n                  />\n                  <div>\n                    <div style={{ fontSize: \"12px\", fontWeight: \"600\", color: \"#28a745\" }}>\n                      Photo selected\n                    </div>\n                    <div style={{ fontSize: \"11px\", color: \"#6c757d\" }}>\n                      {SelectedFile?.name || 'Image file'}\n                    </div>\n                  </div>\n                </div>\n                <button\n                  onClick={handleRemoveFile}\n                  style={{\n                    background: \"none\",\n                    border: \"none\",\n                    fontSize: \"20px\",\n                    cursor: \"pointer\",\n                    color: \"#dc3545\",\n                    padding: \"0 10px\"\n                  }}\n                  title=\"Remove file\"\n                >\n                  \n                </button>\n              </div>\n            )}\n\n            {/* Reply Preview */}\n            {replyingToMessage && (\n              <div\n                className=\"reply-preview px-3 py-2 mt-2 mx-2\"\n                style={{\n                  backgroundColor: \"#f8f9fa\",\n                  borderLeft: \"4px solid #f24570\",\n                  borderRadius: \"4px\",\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\"\n                }}\n              >\n                <div style={{ flex: 1 }}>\n                  <div style={{ fontSize: \"12px\", fontWeight: \"600\", color: \"#f24570\" }}>\n                    {replyingToMessage.sent\n                      ? `Replying to yourself`\n                      : `Replying to ${replyingToMessage.senderName}`}\n                  </div>\n                  <div style={{ fontSize: \"13px\", color: \"#6c757d\", marginTop: \"4px\" }}>\n                    {replyingToMessage.content?.length > 50\n                      ? replyingToMessage.content.substring(0, 50) + '...'\n                      : replyingToMessage.content}\n                  </div>\n                </div>\n                <button\n                  onClick={handleCancelReply}\n                  style={{\n                    background: \"none\",\n                    border: \"none\",\n                    fontSize: \"20px\",\n                    cursor: \"pointer\",\n                    color: \"#6c757d\",\n                    padding: \"0 10px\"\n                  }}\n                  title=\"Cancel reply\"\n                >\n                  \n                </button>\n              </div>\n            )}\n\n            {/* Show block message if blocked or being blocked */}\n            {(isSelectedUserBlocked || isBlockedBySelectedUser) ? (\n              <div \n                className=\"text-center py-4 mt-4\"\n                style={{\n                  backgroundColor: \"#f8d7da\",\n                  color: \"#721c24\",\n                  borderRadius: \"8px\",\n                  margin: \"0 20px\"\n                }}\n              >\n                <i className=\"fa fa-ban me-2\" aria-hidden=\"true\"></i>\n                <div className=\"mb-3\">\n                  {isSelectedUserBlocked \n                    ? \"You have blocked this user. Chat is disabled.\"\n                    : \"This user has blocked you. Chat is disabled.\"}\n                </div>\n                {/* Unblock button for when current user has blocked the other user */}\n                {isSelectedUserBlocked && (\n                  <button\n                    className=\"btn btn-success\"\n                    onClick={() => setBlockUser(true)}\n                    style={{\n                      borderRadius: \"20px\",\n                      padding: \"8px 20px\",\n                      fontSize: \"14px\",\n                      fontWeight: \"500\"\n                    }}\n                  >\n                    <i className=\"fa fa-unlock me-2\" aria-hidden=\"true\"></i>\n                    Unblock\n                  </button>\n                )}\n              </div>\n            ) : (\n              <div\n                className=\" inputChat text-muted d-flex  align-items-center  py-1 mt-4\"\n                style={{\n                  float: \"right\",\n                  backgroundColor: \"#e9ecef\",\n                }}\n              >\n              <div className=\"header__more px-3\">\n                <span\n                  to=\"#\"\n                  className=\"pointer \"\n                  style={{\n                    fontWeight: \"700\",\n                  }}\n                  data-bs-toggle=\"dropdown\"\n                >\n                  <i\n                    class=\"fa fa-paperclip fs-5\"\n                    aria-hidden=\"true\"\n                  ></i>{\" \"}\n                </span>\n                <ul className=\"dropdown-menu\">\n                  <li>\n                    <label className=\"dropdown-item py-2\" style={{ cursor: \"pointer\" }}>\n                      <i\n                        className=\"fa fa-picture-o me-2\"\n                        aria-hidden=\"true\"\n                      ></i>{\" \"}\n                      Photo\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        style={{ display: \"none\" }}\n                        onChange={handleFileChange}\n                        id=\"fileInput\"\n                      />\n                    </label>\n                  </li>\n                  <li>\n                    <Link className=\"dropdown-item py-2\">\n                      <i\n                        class=\"fa fa-map-marker me-2\"\n                        aria-hidden=\"true\"\n                      ></i>{\" \"}\n                      Location\n                    </Link>\n                  </li>\n                </ul>\n              </div>\n\n              <div className=\"header__more dropup\" >\n                <span\n                  to=\"#\"\n                  className=\"pointer\"\n                  style={{\n                    fontWeight: \"600\",\n                  }}\n                  data-bs-toggle=\"dropdown\"\n                  onClick={fetchGifts}\n                >\n                  <i\n                    className=\"fa-solid fa-gift fa-xl\"\n                    aria-hidden=\"true\"\n                  ></i>{\" \"}\n                </span>\n                <ul className=\"dropdown-menu p-3\" style={{\n                  width: \"450px\"\n                }}>\n                  {/* User coins display */}\n                  <div className=\"mb-3 p-2\" style={{\n                    backgroundColor: userCoins > 0 ? \"#d4edda\" : \"#f8d7da\",\n                    borderRadius: \"8px\",\n                    border: `1px solid ${userCoins > 0 ? \"#c3e6cb\" : \"#f5c6cb\"}`\n                  }}>\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                      <span style={{ \n                        fontWeight: \"600\", \n                        color: userCoins > 0 ? \"#155724\" : \"#721c24\" \n                      }}>\n                         Your Coins: {userCoins}\n                        {userCoins <= 0 && (\n                          <small className=\"d-block\" style={{ fontSize: \"10px\", color: \"#721c24\" }}>\n                            No coins available - Subscribe to get coins!\n                          </small>\n                        )}\n                      </span>\n                      <button \n                        className=\"btn btn-sm btn-outline-primary\"\n                        onClick={fetchUserCoins}\n                        style={{ fontSize: \"10px\", padding: \"2px 6px\" }}\n                      >\n                        Refresh\n                      </button>\n                    </div>\n                  </div>\n\n                  {loadingGifts ? (\n                    <div className=\"text-center p-4\">\n                      <div className=\"spinner-border text-primary\" role=\"status\">\n                        <span className=\"sr-only\">Loading gifts...</span>\n                      </div>\n                      <p className=\"mt-2 mb-0\" style={{ fontSize: \"12px\", color: \"#6c757d\" }}>\n                        Loading gifts...\n                      </p>\n                    </div>\n                  ) : gifts?.length === 0 ? (\n                    <div className=\"text-center p-4\">\n                      <p className=\"text-muted mb-0\" style={{ fontSize: \"14px\" }}>\n                        No gifts available\n                      </p>\n                    </div>\n                  ) : userCoins <= 0 ? (\n                    <div className=\"text-center p-4\">\n                      <div style={{ fontSize: \"48px\", color: \"#dc3545\", marginBottom: \"15px\" }}>\n                        \n                      </div>\n                      <h5 style={{ color: \"#721c24\", marginBottom: \"10px\" }}>No Coins Available</h5>\n                      <p style={{ color: \"#6c757d\", marginBottom: \"20px\" }}>\n                        You need coins to send gifts. Subscribe to get coins and start sending gifts!\n                      </p>\n                      <button \n                        className=\"btn btn-primary\"\n                        onClick={() => navigate('/metrimonial/membership')}\n                        style={{\n                          borderRadius: \"25px\",\n                          padding: \"10px 25px\",\n                          fontWeight: \"500\"\n                        }}\n                      >\n                        <i className=\"fa fa-gem me-2\"></i>\n                        Get Coins Now\n                      </button>\n                    </div>\n                  ) : (\n                  <div style={{\n                    display: \"grid\",\n                      gridTemplateColumns: \"repeat(3, 1fr)\",\n                      gap: \"12px\",\n                    listStyle: \"none\",\n                    padding: 0,\n                    margin: 0\n                }}>\n                      {gifts.map((item) => (\n                        <li key={item._id} style={{ \n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"center\",\n                          cursor: \"pointer\",\n                          padding: \"8px\",\n                          borderRadius: \"8px\",\n                          transition: \"background-color 0.2s ease\",\n                          backgroundColor: userCoins >= item.coinCost ? \"transparent\" : \"#f8f9fa\"\n                        }}\n                        onMouseEnter={(e) => {\n                          if (userCoins >= item.coinCost) {\n                            e.currentTarget.style.backgroundColor = \"#f8f9fa\";\n                          }\n                        }}\n                        onMouseLeave={(e) => {\n                          e.currentTarget.style.backgroundColor = userCoins >= item.coinCost ? \"transparent\" : \"#f8f9fa\";\n                        }}>\n                          <div\n                        role=\"img\"\n                        aria-label=\"gift icon\"\n                        aria-hidden=\"true\"\n                          onClick={() => handleGiftClick(item)}\n                            style={{ \n                              cursor: userCoins >= item.coinCost ? \"pointer\" : \"not-allowed\",\n                              opacity: userCoins >= item.coinCost ? 1 : 0.5\n                            }}\n                      >\n                        <img\n                          className=\"m-1 pointer\"\n                              src={item.imageUrl}\n                          alt={item.name}\n                            style={{ \n                              width: \"60px\", \n                              height: \"60px\",\n                              transition: \"transform 0.2s ease\",\n                              borderRadius: \"8px\",\n                              objectFit: \"cover\"\n                            }}\n                            onMouseEnter={(e) => {\n                                if (userCoins >= item.coinCost) {\n                              e.target.style.transform = \"scale(1.1)\";\n                              e.target.style.boxShadow = \"0 4px 8px rgba(0,0,0,0.2)\";\n                                }\n                            }}\n                            onMouseLeave={(e) => {\n                              e.target.style.transform = \"scale(1)\";\n                              e.target.style.boxShadow = \"none\";\n                            }}\n                        />\n                          </div>\n                        <div style={{ \n                          fontSize: \"10px\", \n                          textAlign: \"center\", \n                          marginTop: \"5px\",\n                          fontWeight: \"500\",\n                            color: userCoins >= item.coinCost ? \"#495057\" : \"#6c757d\"\n                        }}>\n                      {item.name}\n                        </div>\n                          <div style={{ \n                            fontSize: \"9px\", \n                            textAlign: \"center\", \n                            marginTop: \"2px\",\n                            fontWeight: \"600\",\n                            color: userCoins >= item.coinCost ? \"#28a745\" : \"#dc3545\"\n                          }}>\n                             {item.coinCost} coins\n                          </div>\n                          {userCoins < item.coinCost && (\n                            <div style={{ \n                              fontSize: \"8px\", \n                              textAlign: \"center\", \n                              marginTop: \"2px\",\n                              color: \"#dc3545\",\n                              fontWeight: \"500\"\n                            }}>\n                              Insufficient coins\n                            </div>\n                          )}\n                    </li>\n                  ))}\n                  </div>\n                  )}\n                </ul>\n              </div>\n\n              <div\n                className=\"input-vox-chat\"\n\n              >\n                <input\n                  type=\"text\"\n                  className=\"form-control form-control-lg message-input\"\n                  id=\"exampleFormControlInput2\"\n                  placeholder=\"Type message\"\n                  value={inputMessage}\n                  onChange={(e) => {\n                    setInputMessage(e.target.value);\n                    // Start typing indicator\n                    if (selectedRoomId && e.target.value.trim()) {\n                      startTyping(selectedRoomId);\n                    }\n                  }}\n                  onBlur={() => {\n                    // Stop typing indicator when input loses focus\n                    if (selectedRoomId) {\n                      stopTyping(selectedRoomId);\n                    }\n                  }}\n                  multiple\n                  onKeyDown={handleKeyDown}\n                />\n                <div className=\"smile-message-input\">\n                  \n                  \n                  <span\n                    className=\"pointer\"\n                    style={{\n                      fontWeight: \"600\",\n                      cursor: \"pointer\",\n                      padding: \"8px\",\n                      borderRadius: \"50%\",\n                      transition: \"background-color 0.2s\"\n                    }}\n                    onClick={handleToggleEmojiPicker}\n                    onMouseEnter={(e) => {\n                      e.target.style.backgroundColor = \"#f0f0f0\";\n                    }}\n                    onMouseLeave={(e) => {\n                      e.target.style.backgroundColor = \"transparent\";\n                    }}\n                    title=\"Emoji Picker (Ctrl+E)\"\n                  >\n                    <i\n                      className=\"fa-solid fa-face-smile fa-xl\"\n                      style={{ color: showEmojiPicker ? \"#f24570\" : \"#6c757d\" }}\n                    ></i>\n                  </span>\n                </div>\n              </div>\n\n\n              <button\n                className=\"send-btn fs-4\"\n                onClick={handleSendMessage}\n                disabled={isUploading || sendingGift}\n                style={{\n                  opacity: (isUploading || sendingGift) ? 0.6 : 1,\n                  cursor: (isUploading || sendingGift) ? 'not-allowed' : 'pointer'\n                }}\n              >\n                {(isUploading || sendingGift) ? (\n                  <div className=\"spinner-border spinner-border-sm\" role=\"status\">\n                    <span className=\"sr-only\">Sending...</span>\n                  </div>\n                ) : (\n                <MDBIcon fas icon=\"paper-plane\" />\n                )}\n              </button>\n\n              {/* Emoji Picker */}\n              {showEmojiPicker && (\n                <div\n                  className=\"emoji-picker-container\"\n                  style={{\n                    position: \"absolute\",\n                    bottom: \"70px\",\n                    right: \"20px\",\n                    zIndex: 1000,\n                    backgroundColor: \"white\",\n                    borderRadius: \"12px\",\n                    boxShadow: \"0 4px 20px rgba(0,0,0,0.15)\",\n                    border: \"1px solid #e0e0e0\"\n                  }}\n                >\n                  <EmojiPicker \n                    onEmojiClick={handleSelectEmoji}\n                    width={350}\n                    height={400}\n                    searchDisabled={false}\n                    skinTonesDisabled={false}\n                    previewConfig={{\n                      showPreview: true\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n            )}\n          </div>) : (\n          <div className=\"chat-banner\">\n            <img\n              src={chatBG2}\n              alt=\"chat backgrount picture\"\n              className=\"vh-100 chat-bg\"\n            />\n          </div>\n        )}\n      </div>\n    );\n  };\n\n\n  return (\n    <div className=\"dating-chat-wrap\">\n      <HeaderFour />\n      <MDBContainer fluid className=\"custom-fluid\" >\n        <MDBRow>\n          <MDBCol md=\"12\" style={{ paddingLeft: \"0\", paddingRight: \"0\" }}>\n            <MDBCard id=\"chat3\" style={{ borderRadius: \"0\" }}>\n              <MDBCardBody className=\"p-0\">\n                <MDBRow>\n                  <MDBCol\n                    md=\"5\"\n                    lg=\"4\"\n                    xl=\"3\"\n                    className=\"mb-4 mb-md-0 p-0\"\n                    style={{ borderRight: \"2px solid lightgray\" }}\n                  >\n                    {isMobileView && !selectedUser && renderChatUsersList()}\n                    {!isMobileView && renderChatUsersList()}\n                  </MDBCol>\n\n\n                  <MDBCol md=\"7\" lg=\"8\" xl=\"9\" className=\"p-0\">\n                    {!isMobileView && !selectedUser && renderChatBox()}\n                    {selectedUser && renderChatBox()}\n                  </MDBCol>\n                </MDBRow>\n              </MDBCardBody>\n            </MDBCard>\n          </MDBCol>\n        </MDBRow>\n        <CalenderScheduleMetri\n          showModal={calenderSchedule}\n          hideModal={() => setCalenderSchedule(false)}\n          calenderDate={calenderDate}\n          clockTime={clockTime}\n        />\n        <CheckCompatibilityModalMetri\n          showModal={CheckCompatibility}\n          hideModal={() => setCheckCompatibility(false)}\n        />\n        <EventNotificationScheduleModal\n          showModal={NotificationSchedule}\n          hideModal={() => setNotificationSchedule(false)}\n          calenderScheduleDAte={calenderScheduleDAte}\n          selectedUser={selectedUser}\n          editIndex={editIndex}\n          ViewUser={ViewUser}\n          setEditIndex={setEditIndex}\n          userInfoDate={() => setNotificationSchedule(true)}\n          scheduledData={selectedData}\n        />\n        <BlockUserModalMetri\n          showModal={blocklUser}\n          hideModal={() => setBlockUser(false)}\n          selectedUser={selectedUser}\n          isBlocked={isSelectedUserBlocked}\n          onBlockStatusChange={() => checkBlockingStatus(selectedUser?._id)}\n        />\n        <ReportUserModalMetri\n          showModal={reportUser}\n          hideModal={() => setReportUser(false)}\n          selectedUser={selectedUser}\n        />\n        <RelationshipMilestoneTrackerMetri\n          showModal={Milestone}\n          hideModal={() => setMilestone(false)}\n          selectedUser={selectedUser}\n        />\n\n        <EventCalenderScheduleModal\n          showModal={calenderSchedule}\n          hideModal={() => setCalenderSchedule(false)}\n          calenderDate={calenderDate}\n          NotifyScheduleData={NotifyScheduleData}\n          clockTime={clockTime}\n        />\n\n        {/* Persistent Call Notification Bar (like WhatsApp) */}\n        {incomingCall && !showIncomingCallModal && !showVideoCallModal && incomingCall.status === 'ringing' && !callConnected && (\n          <div \n            style={{\n              position: 'fixed',\n              top: 0,\n              left: 0,\n              right: 0,\n              zIndex: 10000,\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n              color: 'white',\n              padding: '12px 20px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'space-between',\n              boxShadow: '0 2px 10px rgba(0,0,0,0.2)',\n              cursor: 'pointer',\n              animation: 'slideDown 0.3s ease-out'\n            }}\n            onClick={() => {\n              if (incomingCall.callType === 'video') {\n                setShowVideoCallModal(true);\n              } else {\n                setShowIncomingCallModal(true);\n              }\n              setIsCallModalManuallyClosed(false);\n            }}\n          >\n            <style>{`\n              @keyframes slideDown {\n                from {\n                  transform: translateY(-100%);\n                  opacity: 0;\n                }\n                to {\n                  transform: translateY(0);\n                  opacity: 1;\n                }\n              }\n              @keyframes pulse {\n                0%, 100% { opacity: 1; }\n                50% { opacity: 0.6; }\n              }\n            `}</style>\n            <div style={{ display: 'flex', alignItems: 'center', gap: '12px', flex: 1 }}>\n              <div style={{ \n                width: '40px', \n                height: '40px', \n                borderRadius: '50%', \n                overflow: 'hidden',\n                background: 'rgba(255,255,255,0.2)',\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                animation: 'pulse 2s infinite'\n              }}>\n                {incomingCall.callerId.mainAvatar ? (\n                  <img \n                    src={`${BASE_URL}/assets/images/${incomingCall.callerId.mainAvatar}`}\n                    alt={incomingCall.callerId.name}\n                    style={{ width: '100%', height: '100%', objectFit: 'cover' }}\n                  />\n                ) : (\n                  <i className=\"fa fa-user\" style={{ fontSize: '20px' }}></i>\n                )}\n              </div>\n              <div style={{ flex: 1 }}>\n                <div style={{ fontWeight: 'bold', fontSize: '16px' }}>\n                  {incomingCall.callerId.name}\n                </div>\n                <div style={{ fontSize: '12px', opacity: 0.9, display: 'flex', alignItems: 'center', gap: '6px' }}>\n                  <span style={{ animation: 'pulse 1.5s infinite' }}></span>\n                  Incoming {incomingCall.callType === 'video' ? 'Video' : 'Voice'} Call\n                </div>\n              </div>\n            </div>\n            <div style={{ display: 'flex', gap: '10px', alignItems: 'center' }}>\n              <button\n                onClick={(e) => {\n                  e.stopPropagation();\n                  if (incomingCall.callType === 'video') {\n                    setShowVideoCallModal(true);\n                  } else {\n                    setShowIncomingCallModal(true);\n                  }\n                  setIsCallModalManuallyClosed(false);\n                }}\n                style={{\n                  background: 'rgba(255,255,255,0.3)',\n                  border: 'none',\n                  color: 'white',\n                  padding: '8px 16px',\n                  borderRadius: '20px',\n                  cursor: 'pointer',\n                  fontWeight: '500',\n                  fontSize: '14px',\n                  transition: 'background 0.2s'\n                }}\n                onMouseEnter={(e) => e.target.style.background = 'rgba(255,255,255,0.4)'}\n                onMouseLeave={(e) => e.target.style.background = 'rgba(255,255,255,0.3)'}\n              >\n                Open\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Incoming Call Modal - Show VideoCallModal for video calls, IncomingCallModal for audio */}\n        {incomingCall && incomingCall.callType === 'video' ? (\n          <VideoCallModal \n            show={showVideoCallModal} \n            onHide={() => {\n              // Don't clear incomingCall if call is still ringing - just hide modal\n              if (incomingCall && incomingCall.status === 'ringing' && !callConnected) {\n                setShowVideoCallModal(false);\n                setIsCallModalManuallyClosed(true);\n              } else {\n                if (incomingCall) {\n                  const notificationKey = `call_notification_${incomingCall._id}`;\n                  sessionStorage.removeItem(notificationKey);\n                }\n                setShowVideoCallModal(false);\n                setIncomingCall(null);\n                setIsCallModalManuallyClosed(false);\n              }\n            }}\n            selectedUser={{\n              _id: incomingCall.callerId._id,\n              name: incomingCall.callerId.name,\n              avatar: `${BASE_URL}/assets/images/${incomingCall.callerId.mainAvatar}`\n            }}\n            currentUserId={user?._id || storedUserId}\n            selectedRoomId={incomingCall.roomId}\n            callId={incomingCall._id}\n            isIncomingCall={incomingCall.status === 'ringing'}\n            callerName={incomingCall.callerId.name}\n            initialCallConnected={callConnected || incomingCall.status === 'connected'}\n            initialCallStartTime={callStartTime || incomingCall.startTime}\n          />\n        ) : incomingCall && (\n          <IncomingCallModal \n            show={showIncomingCallModal} \n            onHide={() => {\n              // Don't clear incomingCall if call is still ringing - just hide modal\n              // This allows the notification bar to show\n              if (incomingCall && incomingCall.status === 'ringing' && !callConnected) {\n                setShowIncomingCallModal(false);\n                setIsCallModalManuallyClosed(true);\n                // Keep incomingCall state so notification bar can show\n              } else {\n                // Call ended or declined - clear everything\n                if (incomingCall) {\n                  const notificationKey = `call_notification_${incomingCall._id}`;\n                  sessionStorage.removeItem(notificationKey);\n                }\n                setShowIncomingCallModal(false);\n                setIncomingCall(null);\n                setIsCallModalManuallyClosed(false);\n              }\n            }}\n            selectedUser={{\n              _id: incomingCall.callerId._id,\n              name: incomingCall.callerId.name,\n              avatar: `${BASE_URL}/assets/images/${incomingCall.callerId.mainAvatar}`\n            }}\n            currentUserId={user?._id || storedUserId}\n            selectedRoomId={incomingCall.roomId}\n            callId={incomingCall._id}\n            isIncomingCall={incomingCall.status === 'ringing'}\n            callerName={incomingCall.callerId.name}\n            initialCallConnected={callConnected || incomingCall.status === 'connected'}\n            initialCallStartTime={callStartTime || incomingCall.startTime}\n          />\n        )}\n\n        {/* Call History Modal */}\n        <Modal show={showCallHistory} onHide={() => setShowCallHistory(false)} size=\"lg\" centered>\n          <Modal.Header closeButton>\n            <Modal.Title>Call History</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <div style={{ maxHeight: '400px', overflowY: 'auto' }}>\n              {callHistory?.length === 0 ? (\n                <div className=\"text-center text-muted p-4\">\n                  <p>No call history available</p>\n                </div>\n              ) : (\n                callHistory.map((call) => {\n                  const isIncoming = call.calleeId._id === (user?._id || storedUserId);\n                  const otherUser = isIncoming ? call.callerId : call.calleeId;\n                  const statusColor = {\n                    'connected': '#28a745',\n                    'declined': '#dc3545',\n                    'ringing': '#ffc107'\n                  };\n\n                  const isActiveCall = call.status === 'connected';\n                  \n                  return (\n                    <div \n                      key={call._id} \n                      className={`d-flex align-items-center p-3 border-bottom ${isActiveCall ? 'cursor-pointer' : ''}`}\n                      style={{\n                        cursor: isActiveCall ? 'pointer' : 'default',\n                        backgroundColor: isActiveCall ? '#f8f9fa' : 'transparent',\n                        transition: 'background-color 0.2s'\n                      }}\n                      onMouseEnter={(e) => {\n                        if (isActiveCall) {\n                          e.currentTarget.style.backgroundColor = '#e9ecef';\n                        }\n                      }}\n                      onMouseLeave={(e) => {\n                        if (isActiveCall) {\n                          e.currentTarget.style.backgroundColor = '#f8f9fa';\n                        }\n                      }}\n                      onClick={() => {\n                        if (isActiveCall) {\n                          // Open call modal for active call\n                          setIncomingCall({\n                            _id: call._id,\n                            callerId: {\n                              _id: otherUser._id,\n                              name: otherUser.name,\n                              mainAvatar: otherUser.mainAvatar || null\n                            },\n                            calleeId: {\n                              _id: user?._id || storedUserId\n                            },\n                            status: 'connected',\n                            roomId: call.roomId,\n                            callType: call.callType,\n                            startTime: call.startTime\n                          });\n                          setCurrentCallId(call._id);\n                          setCallConnected(true);\n                          setCallInitiated(false);\n                          // Set call start time if available\n                          if (call.startTime) {\n                            setCallStartTime(new Date(call.startTime));\n                          }\n                          // Show appropriate modal based on call type\n                          if (call.callType === 'video') {\n                            setShowVideoCallModal(true);\n                            setShowIncomingCallModal(false);\n                          } else {\n                            setShowIncomingCallModal(true);\n                            setShowVideoCallModal(false);\n                          }\n                          setShowCallHistory(false); // Close call history modal\n                        }\n                      }}\n                    >\n                      <img\n                        src={`${BASE_URL}/assets/images/${otherUser.mainAvatar}`}\n                        alt={otherUser.name}\n                        style={{\n                          width: '50px',\n                          height: '50px',\n                          borderRadius: '50%',\n                          objectFit: 'cover',\n                          marginRight: '15px'\n                        }}\n                        onError={(e) => {\n                          e.target.src = dummyUserPic;\n                        }}\n                      />\n                      <div className=\"flex-grow-1\">\n                        <div className=\"d-flex justify-content-between align-items-center\">\n                          <div>\n                            <h6 className=\"mb-1\">\n                              {otherUser.name}\n                              {isActiveCall && (\n                                <span className=\"ms-2\" style={{ fontSize: '12px', color: '#28a745' }}>\n                                  <i className=\"fa fa-circle\" style={{ fontSize: '8px' }}></i> Active\n                                </span>\n                              )}\n                            </h6>\n                            <small className=\"text-muted\">\n                              {isIncoming ? 'Incoming' : 'Outgoing'}  {call.callType} call\n                              {isActiveCall && (\n                                <span className=\"ms-2\" style={{ color: '#28a745', fontWeight: '500' }}>\n                                  Tap to view call\n                                </span>\n                              )}\n                            </small>\n                          </div>\n                          <div className=\"text-end\">\n                            <span\n                              className=\"badge\"\n                              style={{\n                                backgroundColor: statusColor[call.status] || '#6c757d',\n                                color: 'white'\n                              }}\n                            >\n                              {call.status === 'connected' ? 'Call Accepted' : call.status}\n                            </span>\n                            <br />\n                            <small className=\"text-muted\">\n                              {new Date(call.startTime).toLocaleString()}\n                            </small>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={() => setShowCallHistory(false)}>\n              Close\n            </Button>\n          </Modal.Footer>\n        </Modal>\n\n      </MDBContainer>\n      <Toaster position=\"top-center\" />\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { TimePicker } from 'react-ios-time-picker';\n\nfunction TimerMetri() {\n   const [value, setValue] = useState('10:00');\n\n   const onChange = (time) => {\n      setValue(time);\n   };\n\n   return (\n      <div className=\"Apps\">\n    \n         <TimePicker onChange={onChange} value={value} />\n        \n      </div>\n   );\n}\n\nexport default TimerMetri;","import React, { useState } from \"react\";\n\nconst venues = [\n  { address: 'Empire State Building, 20 W 34th St, New York, NY 10001' },\n  { address: 'Times Square, Manhattan, NY 10036' },\n  { address: 'Statue of Liberty, New York, NY 10004' },\n  { address: 'Brooklyn Bridge, New York, NY 10038' },\n  { address: 'The Metropolitan, 1000 5th Ave, New York, NY 10028' },\n  { address: 'Grand Central Terminal, 89 E 42nd St, New York, NY 10017' },\n  { address: 'Central Park, 59th St to 110th St, New York, NY 10022' },\n  { address: 'The High Line, New York, NY 10011' },\n  { address: 'Rockefeller Center, 45 Rockefeller Plaza, New York, NY 10111' },\n  { address: 'Museum of Modern Art (MoMA), 11 W 53rd St, New York, NY 10019' },\n  { address: 'One World Observatory, 285 Fulton St, New York, NY 10007' },\n  { address: 'Brooklyn Botanic Garden, 990 Washington Ave, Brooklyn, NY 11225' },\n  { address: 'Chelsea Market, 75 9th Ave, New York, NY 10011' },\n  { address: 'The Plaza Hotel, 768 5th Ave, New York, NY 10019' },\n  { address: 'Katz\\'s Delicatessen, 205 E Houston St, New York, NY 10002' },\n  { address: 'Joe\\'s Pizza, 7 Carmine St, New York, NY 10014' },\n  { address: 'The St. Regis New York, Two East 55th Street at Fifth Avenue, New York, NY 10022' },\n  { address: 'Serendipity 3, 225 E 60th St, New York, NY 10022' },\n  { address: 'Gramercy Tavern, 42 E 20th St, New York, NY 10003' },\n];\n\n\nconst Popup = ({ venuesList, handleVenueSelection, handleClosePopup }) => (\n  <div className=\"popup-venue-list\">\n    {venuesList.map((venue, index) => (\n      <div key={index} onClick={() => handleVenueSelection(venue)}>\n        <p>{venue.address}</p>\n      </div>\n    ))}\n    {/* <button onClick={handleClosePopup}>Close</button> */}\n  </div>\n);\n\nconst VenuePicker = ({ onVenueChange }) => {\n  const [venuesList, setVenuesList] = useState(venues);\n  const [selectedVenue, setSelectedVenue] = useState(null);\n  const [isPopupOpen, setPopupOpen] = useState(false);\n\n  const handlePickVenue = () => {\n    setPopupOpen(!isPopupOpen);\n  };\n\n  const handleVenueSelection = (venue) => {\n    setSelectedVenue(venue);\n    onVenueChange(venue.address); \n    setPopupOpen(false);\n  };\n\n  const handleClosePopup = () => {\n    setPopupOpen(false);\n  };\n\n  return (\n    <div className=\"setVenue\">\n      <input\n        className=\"date\"\n        type=\"\"\n        placeholder=\"Choose Venue\"\n        value={selectedVenue ? selectedVenue.address : ''}\n        readOnly\n        onClick={handlePickVenue}\n      />\n      <div className='Apps'>\n        {isPopupOpen && (\n          <Popup\n            venuesList={venuesList}\n            handleVenueSelection={handleVenueSelection}\n            handleClosePopup={handleClosePopup}\n          />\n        )}\n      </div>\n      <span className=\"calander-icon\" onClick={handlePickVenue}>\n        <i className=\"fa-solid fa-location-dot fa-xl\" style={{ color: \"#B197FC\" }}></i>\n      </span>\n    </div>\n  );\n};\n\nexport default VenuePicker;\n","import React, { useState } from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport toast from \"react-hot-toast\";\nimport Calendar from \"react-calendar\";\nimport Timer from '../chat/Timer'\nimport VenuePicker from '../chat/Venue'\n\n\n\nconst EventCalenderSchedule = ({showModal,hideModal,NotifyScheduleData}) => {\n  const [showClock, setShowClock] = useState(false);\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [showCalendar, setShowCalendar] = useState(false);\n  const [selectedTime,setSelectedTime] =useState(new Date())\n  const [NotificationSchedule, setNotificationSchedule] = useState(false);\n  const [selectedVenue, setSelectedVenue] = useState(\"\");\n\n  const handleClockClick = () => {\n    setShowClock(!showClock);\n    setShowCalendar(!showCalendar)\n  };\n\n  const handleVenueChange = (venue) => {\n    setSelectedVenue(venue);\n  };\n  \n  const handleCalendarClick = () => {\n    setShowCalendar(!showCalendar);\n  };\n\n \n  const handleDateChange = (date) => {\n    setSelectedDate(date);\n    setShowCalendar(false);\n   \n  };\n\n  const handleTimeChange = (time)=>{\n    setSelectedTime(time);\n    setShowClock(false)\n    \n  }\n  const handleSubmit =  (e) => {\n    e.preventDefault();\n    try {\n      const scheduledData = {\n        date: selectedDate.toLocaleDateString(),\n        time: selectedTime.toLocaleTimeString(),\n        venue: selectedVenue,\n      };\n      NotifyScheduleData(scheduledData);\n      toast.success(\"schedule date successfully updated\");\n      //  setButtonClass(\"default-btn reverse\");\n      hideModal(hideModal)\n    } catch (error) {\n      console.error(\"Error updating Contact profile:\", error);\n      toast.error(\"Failed to update Contact info\");\n    }\n  };\n  \n  const [value, setValue] = useState('10:00');\n\n  const onClick = (time) => {\n    setValue(time);\n };\n\n\n\n  \n  return (\n    <Modal show={showModal} onHide={hideModal} centered>\n      {!showCalendar ? (\n        <>\n          <div\n            className=\"main-calander\"\n            style={{ position: \"relative\", padding: \"20px\" }}\n          >\n            <span\n              onClick={hideModal}\n              style={{ position: \"absolute\", right: \"25px\", top: \"10px\", cursor: \"pointer\", color: \"#213366\" }}\n            >\n              <i className=\"fa fa-times fs-3\" aria-hidden=\"true\"></i>\n            </span>\n\n            <div className=\"Data-1 cstm-modal\">\n              <h5 className=\"fs-4 text-muted fw-700\">\n                Schedule Your Virtual Date for Meaningful Connections!\n              </h5>\n              <div className=\"settime\">\n              \n               <Timer/>\n                <span className=\"clock-icon\" onClick={onClick} value={value}   >\n                <i class=\"fa-solid fa-clock fa-xl\" style={{color:\"#B197FC\"}}></i>\n                </span>\n              </div>\n              <div className=\"setdate\">\n                <input\n                  className=\"date\"\n                  type=\"\"\n                  dateFormat=\"DD/MM/YYYY\"\n                  placeholder=\"Choose Date\"\n                  value={selectedDate.toLocaleDateString()}\n                  onClick={handleCalendarClick}\n                />\n                <span className=\"calander-icon\" onClick={handleCalendarClick}>\n                <i class=\"fa-regular fa-calendar-days fa-xl\" style={{color:\"#B197FC\"}}></i>\n                </span>\n              </div>\n                <div>\n                <VenuePicker onVenueChange={handleVenueChange} />\n                </div>\n            </div>\n          </div>\n     \n          <div className=\"sched-button\" onClick={(e) => {\n              e.preventDefault();\n              NotifyScheduleData();\n              handleSubmit(e);\n            }}>\n            <button  className=\"date-btn\">\n              <p className=\"date-content\">Schedule Date</p>\n            </button>\n          </div>\n      \n        </>\n          ) : showClock ? (\n            <div className=\"clockArea\">\n            \n            </div>\n            \n      ) : (\n        <div className=\"calenderArea\">\n          <Calendar\n            dateFormat=\"DD/MM/YYYY\"\n            onChange={handleDateChange}\n            value={selectedDate}\n          \n          />\n        </div>\n      )}\n      \n    </Modal>\n  );\n};\n\nexport default EventCalenderSchedule;\n"],"names":["_ref","_User$avatars","_eventnotifyData$sele3","_eventnotifyData$sele4","_eventnotifyData$sele5","_eventnotifyData$sele6","_eventnotifyData$sele7","_eventnotifyData$sele8","_eventnotifyData$sele9","_eventnotifyData$sele0","showModal","editIndex","ViewUser","setEditIndex","hideModal","calenderScheduleDAte","selectedUser","selectedMemberForEvent","userInfoDate","scheduledData","dispatch","useDispatch","User","useSelector","state","profile","userData","datingId","localStorage","getItem","user_Data","JSON","parse","Store","_Store$activies","_Store$activies$Activ","activies","Activity","data","useEffect","getBySenderUserIds","modeid","MODE_METRI","id","_id","eventnotifyData","user","selectUser","receiverUserId","_jsx","Modal","show","onHide","centered","children","_jsxs","className","style","position","onClick","right","top","color","cursor","xmlns","width","height","viewBox","fill","d","x1","y1","x2","y2","offset","stopColor","zIndex","name","occupation","address","src","mainAvatar","BASE_URL","avatars","userMale","alt","class","date","time","venue","Link","async","_eventnotifyData$sele","_eventnotifyData$sele2","e","preventDefault","payload","senderUserId","action_logs","description","note","mode","resultAction","createEvent","res","unwrapResult","_res$data","isSuccess","getEventsM","toast","success","error","console","CustomAlert","message","onClose","backgroundColor","padding","borderRadius","boxShadow","textAlign","maxWidth","_ref2","customAlert","setCustomAlert","useState","questions","options","currentQuestion","setCurrentQuestion","currentDiv","setCurrentDiv","selectedOptions","setSelectedOptions","Array","length","float","map","option","index","updatedOptions","handleOptionSelect","fontSize","handlePrevClick","handleNextClick","undefined","every","margin","CircularProgressbar","maxValue","strokeWidth","value","counterClockwise","background","backgroundPadding","text","styles","buildStyles","textColor","pathColor","trailColor","RelationshipMilestoneList","activity","showMilestone","setShowMilestone","totalMilStones","size","Scrollbars","autoHide","slice","val","i","to","imgAlt","href","handleLoadMoreMilestone","newMilestoneToShow","Math","min","isBlocked","onBlockStatusChange","useNavigate","loading","setLoading","Header","closeButton","Title","Body","Footer","Button","variant","disabled","unblockUser","unwrap","blockUser","setTimeout","_Fragment","Spinner","as","animation","role","reportReason","setReportReason","additionalDetails","setAdditionalDetails","Form","Group","controlId","Label","Control","onChange","target","rows","placeholder","justifyContent","border","handleReport","showClock","setShowClock","selectedDate","setSelectedDate","Date","showCalendar","setShowCalendar","selectedTime","setSelectedTime","handleCalendarClick","setValue","venues","VenuePopup","selectedVenue","setSelectedVenue","isPopupOpen","setPopupOpen","handlePickVenue","randomIndex","floor","random","Calendar","dateFormat","TimerMetri","type","toLocaleDateString","handleClosePopup","App","_user$avatars","navigate","inputMessage","setInputMessage","chatMessages","setChatMessages","customMessages","showEmojiPicker","setShowEmojiPicker","selectedEmojis","setSelectedEmojis","SelectedFile","setSelectedFile","filePreview","setFilePreview","isUploading","setIsUploading","scrollbarsRef","useRef","CheckCompatibility","setCheckCompatibility","NotificationSchedule","setNotificationSchedule","calenderSchedule","setCalenderSchedule","blocklUser","setBlockUser","reportUser","setReportUser","Milestone","setMilestone","setSelectedUser","log","isMobileView","setIsMobileView","searchQuery","setSearchQuery","filteredItems","setFilteredItems","selectedData","setSelectedData","chatRooms","setChatRooms","selectedRoomId","setSelectedRoomId","roomMessages","setRoomMessages","unreadCounts","setUnreadCounts","lastMessages","setLastMessages","messagesByRoom","setMessagesByRoom","loadingMessages","setLoadingMessages","editingMessageId","setEditingMessageId","editedContent","setEditedContent","replyingToMessage","setReplyingToMessage","setShowModal","showVideoCallModal","setShowVideoCallModal","isSelectedUserBlocked","setIsSelectedUserBlocked","isBlockedBySelectedUser","setIsBlockedBySelectedUser","incomingCall","setIncomingCall","showIncomingCallModal","setShowIncomingCallModal","isCallModalManuallyClosed","setIsCallModalManuallyClosed","callHistory","setCallHistory","showCallHistory","setShowCallHistory","gifts","setGifts","loadingGifts","setLoadingGifts","showGiftModal","setShowGiftModal","sendingGift","setSendingGift","typingUsers","setTypingUsers","hasMoreMessages","setHasMoreMessages","currentCallId","setCurrentCallId","callConnected","setCallConnected","callInitiated","setCallInitiated","callStartTime","setCallStartTime","isMicOn","setIsMicOn","selectedRoomIdRef","current","styleId","document","getElementById","createElement","textContent","head","appendChild","handleShow","handleHide","handleShowVideoCall","handleHideVideoCall","blockedUsers","block","storedUserId","useMemo","_parsedUser$data","parsedUser","userId","isConnected","createRoom","socketCreateRoom","getMyRooms","joinRoom","sendMessage","socketSendMessage","editMessage","socketEditMessage","deleteMessage","socketDeleteMessage","getChatHistory","startTyping","stopTyping","getCallHistory","socketGetCallHistory","useSocket","onRoomsList","rooms","onChatHistory","currentSelectedRoomId","messages","isArray","transformedMessages","msg","_msg$msgFrom","_msg$senderId","_msg$msgFrom2","_msg$senderId2","base","content","inferredType","includes","messageType","giftName","split","join","trim","matchedGift","find","g","toLowerCase","timestamp","createdAt","toLocaleTimeString","hour","minute","sent","msgFrom","senderId","avatar","fileUrl","file","attachment","giftData","imageUrl","prev","lastMsg","messageText","isRead","table","prevMessages","existingMessagesMap","Map","forEach","set","merged","from","values","sort","a","b","getTime","scrollToBottom","onNewMessage","roomId","_message$msgFrom","_message$senderId","_message$msgFrom2","_message$senderId2","transformedMessage","_message$msgFrom3","_message$senderId3","some","messageExists","onMessageEdited","isEdited","onMessageDeleted","messageId","filter","onRoomCreated","onUserTyping","userName","isTyping","_updated$data$roomId","updated","onUserStoppedTyping","_updated$data$roomId2","onCallHistory","calls","items","onIncomingCall","calleeId","currentUserIdStr","String","calleeIdStr","notificationKey","callSessionId","sessionStorage","callerName","duration","fontWeight","icon","Notification","permission","body","tag","requireInteraction","setItem","newIncomingCall","callerId","callerAvatar","status","callType","onCallStarted","prevTime","stream","navigator","mediaDevices","getUserMedia","audio","audioTracks","getAudioTracks","track","stop","err","startMic","onCallEnded","removeItem","onCallDeclined","onCallError","errorMessage","onError","clockTime","calenderDate","handleToggleEmojiPicker","handleSelectEmoji","emojiObject","emoji","prevMessage","handleFileChange","files","selectedFile","alert","maxSize","URL","createObjectURL","handleRemoveFile","revokeObjectURL","fileInput","checkBlockingStatus","targetUserId","currentUserId","getBlockedUsers","blockedUser","_blockedUser$blocked","blocked","blockedByResult","checkIfBlockedBy","fetchRoomDetails","response","getRoomById","_roomData$users","otherUser","users","u","_error$response","fetchRoomMessages","page","arguments","limit","socketService","currentRoom","handleSendMessage","replyToId","sendMessageAPI","handleKeyDown","key","ctrlKey","handleSaveEdit","handleCancelEdit","handleReplyToMessage","_message$senderId4","_message$senderId5","senderName","inputField","focus","handleCancelReply","userCoins","setUserCoins","updatingCoins","setUpdatingCoins","fetchGifts","getAllGifts","fetchUserCoins","getUserCoins","_response$data","_response$data2","coins","balance","calculateCoinsFromLocalStorage","_userData$data","storedCoins","_userData$data2","_res$data2","initCoins","sendGiftToUser","receiverId","giftId","giftItem","sendGiftApi","newBalance","remainingCoins","coinCost","stringify","giftMessage","window","dispatchEvent","CustomEvent","detail","deductedAmount","isDropdownOpen","setDropdownOpen","handleChange","event","query","filtered","room","_room$otherUser2","_room$otherUser2$name","_room$otherUser3","_room$otherUser3$user","handleSearch","handleResize","innerWidth","addEventListener","removeEventListener","handleClickOutside","closest","requestPermission","renderChatUsersList","MDBInputGroup","MDBIcon","fas","MDBTypography","listUnStyled","_room$otherUser4","_room$otherUser5","_lastMessages$room$ro","_room$otherUser","handleUserSelect","gap","objectFit","dummyUserPic","minWidth","display","alignItems","flex","overflow","textOverflow","whiteSpace","month","day","updatedAt","renderChatBox","_replyingToMessage$co","marginTop","lineHeight","title","IncomingCallModal","VideoCallModal","paddingBottom","ref","_message$replyTo$send","_message$replyTo$cont","_message$replyTo$send2","_message$replyTo$cont2","flexDirection","startsWith","maxHeight","open","_message$giftData","_gifts$find","parsedName","imgUrl","opacity","marginRight","handleStartEdit","confirm","handleDeleteMessage","onKeyDown","autoFocus","wordBreak","replyTo","marginBottom","borderLeft","fontStyle","substring","flexShrink","flexWrap","_message$giftData2","_gifts$find2","marginLeft","animationDelay","borderWidth","borderColor","transition","onMouseEnter","querySelector","onMouseLeave","chatBG","backgroundSize","accept","gridTemplateColumns","listStyle","item","currentTarget","action","label","handleGiftClick","transform","onBlur","multiple","bottom","EmojiPicker","onEmojiClick","searchDisabled","skinTonesDisabled","previewConfig","showPreview","chatBG2","HeaderFour","MDBContainer","fluid","MDBRow","MDBCol","md","paddingLeft","paddingRight","MDBCard","MDBCardBody","lg","xl","borderRight","CalenderScheduleMetri","CheckCompatibilityModalMetri","EventNotificationScheduleModal","BlockUserModalMetri","ReportUserModalMetri","RelationshipMilestoneTrackerMetri","EventCalenderScheduleModal","NotifyScheduleData","left","stopPropagation","callId","isIncomingCall","initialCallConnected","initialCallStartTime","startTime","overflowY","call","isIncoming","isActiveCall","toLocaleString","Toaster","TimePicker","Popup","venuesList","handleVenueSelection","onVenueChange","setVenuesList","readOnly","Timer","VenuePicker","handleSubmit"],"sourceRoot":""}