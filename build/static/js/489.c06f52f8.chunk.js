"use strict";(self.webpackChunkMatchup=self.webpackChunkMatchup||[]).push([[489],{489:(e,r,s)=>{s.r(r),s.d(r,{default:()=>f});var i=s(5043),l=s(3216),n=s(5475),a=s(3888),o=s(9366),c=s(3768);const t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtklEQVR4nO1Zv4sTQRQeBUGwEBsVf6GCnVqYfW/jEYh5b2MjynWnqJ2IoHcnFlpqLTaW4o9OiwMbRbSx8x8QFA6uFMVGudybvShebmWSeHfebpLJZpPdg/3ga5blzfe9eTM781apHDly5Mg8Fr3CAWGYFMJ3mnFWCLUw1IXgqxC+1YS362X3oG28ehUPaYI7Jp4QfmvFQt2ObZ7dWDzt7B9YuF/GfULwVAiWNGPQjc13CJ93G9gkQjO8sI0nDE98Ku6NJ55wXDNIr4HChAVhZ2J9PKnghbjx/Ip7ri/xQu60EDb6H6ydPcZlIby5Eo/hlnkWOx5hQximrDM/iPj/TLAzIeSeH0S8XmOi50yYmo83zZ2nv8Xk4vne2J7OpcPwLLnBhkNhfNx5q7TYHdKmECyZSonK/lTa4rS1CbweNmA+SBkQp63KCN6EDGiGubSFaXvORhlIcPcZNkHCBghq6QtDOxLOR83A59SFsTU/RRjAmQwICyw5E7WNXsyAsMCGRmvIwE+vsH0jLGQh9OdLpR0hA61vAdxPW6DuzQeR4psGqid3Jnv4Sjz7Wpdht+oGn+BaZg0wTKpeCJTapBnepy1Wryfhh+Cu2tzTQGstuLuE4Uvqovkf4Xvfl3yfCmi6BWmLF8LfC55b6kv8qgnnrDD8SVF8w1xJ1SAQci4lcUfuWzzjss/u1YHEr84Ejo+ynKTZY4IrKkkIu6fMKXAEZaO1h2cSFb9iouocHeruRPCjVnHG1DBheqCa4eMQDMzWPPeIGgWCcnmrJnyYXObxpTlMqlFDV/Byu6sct95/mTamShPiFY+ZG1KcktFUPKGygKBQ2CIM96za5s3GLzwKqse3qazB97DYzGxHAzAX+1gw0tkgd3rt7c6cZ8yiz2TWu/1GEsZXQvi6zs7hji/myJEjh9rI+Av6K/Bt8zMD1QAAAABJRU5ErkJggg==";var d=s(1669),m=s(9456),v=s(8019),u=s(7459),h=s(2104),x=s(3463),j=s(5437),p=s(2573),g=s(579);const f=()=>{const e=(0,m.d4)(e=>e.getAllUser.loading),r=(0,m.wA)(),s=(0,l.Zp)(),f=()=>s("/metrimonial/astro"),_=localStorage.getItem("userData"),A=JSON.parse(_),N=A.data._id,b=A.data.mode,[y,I]=(0,i.useState)([]),[U,w]=(0,i.useState)(!1),C=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(N)return C.current=(0,h.Ay)("http://38.242.230.126:4457",{query:{userId:N}}),C.current.on("connect",()=>{console.log("Connected to chat server from match page")}),C.current.on("disconnect",()=>{console.log("Disconnected from chat server")}),C.current.on("room_created",e=>{console.log("Room created from match page:",e),w(!1);const r=e=>{console.log("rooms_list after creation:",e),C.current.off("rooms_list",r),s("/metrimonial/chat")};C.current.on("rooms_list",r),C.current.emit("get_my_rooms",{userId:N})}),C.current.on("error",e=>{if(console.error("Socket error:",e),w(!1),e.message&&e.message.includes("E11000 duplicate key error")){const e=r=>{C.current.off("rooms_list",e),s("/metrimonial/chat")};C.current.on("rooms_list",e),C.current.emit("get_my_rooms",{userId:N})}else c.Ay.error("Failed to create chat room. Please try again.")}),()=>{C.current&&C.current.disconnect()}},[N,s]),(0,i.useEffect)(()=>{(async()=>{try{const e=await r((0,p.sP)({senderUserId:N,modeId:b,page_number:1,page_size:10})).unwrap();I(null===e||void 0===e?void 0:e.data)}catch(e){c.Ay.error("Failed to fetch activities: "+e.message)}})()},[]);const k=async(e,s)=>{try{if(await r((0,p.E1)({senderUserId:N,receiverUserId:e,action_logs:"User ".concat(N," ").concat(s," User ").concat(e),description:"".concat(s," Action"),note:"",mode:b,activityType:s,page_number:1,page_size:10})).unwrap()){const e=await r((0,p.sP)({senderUserId:N,modeId:b,page_number:1,page_size:10})).unwrap();I(null===e||void 0===e?void 0:e.data)}}catch(i){console.error("Activity error:",i),c.Ay.error("Failed to perform action")}},E=e=>{if(U)return;if(!C.current)return void c.Ay.error("Connection not available. Please refresh the page.");w(!0);const r=function(){const i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).find(r=>{var s;return(null===r||void 0===r||null===(s=r.otherUser)||void 0===s?void 0:s._id)===e||(Array.isArray(null===r||void 0===r?void 0:r.users)?r.users.some(r=>(null===r||void 0===r?void 0:r._id)===e||r===e):!!Array.isArray(null===r||void 0===r?void 0:r.participants)&&r.participants.some(r=>(null===r||void 0===r?void 0:r._id)===e||r===e))});if(C.current.off("room_list",r),C.current.off("rooms_list",r),i)console.log("\u2705 Found existing room, navigating to chat"),w(!1),s("/metrimonial/chat");else{const r=e=>{console.log("\ud83c\udf89 Room created:",e),C.current.off("room_created",r),w(!1),s("/metrimonial/chat")};C.current.on("room_created",r),C.current.emit("create_room",{toUserId:e,userId:N})}};C.current.on("room_list",r),C.current.on("rooms_list",r),C.current.emit("get_my_rooms",{userId:N})},F=y?y.filter(e=>"like"===e.activityType):[],M=y?y.filter(e=>"superlike"===e.activityType):[];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A,{}),e?(0,g.jsx)(v.A,{}):(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"member member--style2 padding-top padding-bottom",children:(0,g.jsxs)("div",{className:"container ",children:[(0,g.jsxs)("div",{className:"member__info mb-4",children:[(0,g.jsx)("div",{className:"member__info--left",children:(0,g.jsx)("div",{className:"group__bottom--head",style:{padding:0},children:(0,g.jsx)("div",{className:"left",children:(0,g.jsxs)("form",{action:"#",children:[(0,g.jsx)("input",{className:"bg-white",type:"text",name:"search",placeholder:"search"}),(0,g.jsx)("button",{type:"submit",children:(0,g.jsx)("i",{className:"fa-solid fa-magnifying-glass"})})]})})})}),(0,g.jsx)("div",{className:"member__info--right",children:(0,g.jsxs)("div",{className:"member__info--customselect right w-100",children:[(0,g.jsx)("div",{className:"default-btn",children:(0,g.jsx)("span",{children:"Order By:"})}),(0,g.jsx)("div",{className:"banner__inputlist",children:(0,g.jsx)(o.A,{select:"Nearest"})})]})})]}),(0,g.jsxs)("div",{className:"section__wrapper mb-5",children:[(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:"col",children:(0,g.jsx)("h2",{children:"Match list"})})}),(0,g.jsx)("div",{className:"row g-0 mx-12-none justify-content-center wow fadeInUp",children:F&&F.length>0?F.map((e,r)=>{var s,i,l,a,o,c,d,m,v,h,p,_,A,N,b;return(0,g.jsx)("div",{className:"member__item ",children:(0,g.jsxs)("div",{className:"member__inner member__inner-sized-hover react-main position-relative",children:[(0,g.jsx)("div",{className:"react main_user_img",children:(0,g.jsx)("img",{src:t,width:"25",alt:"",onClick:()=>{var r;return k(null===e||void 0===e||null===(r=e.receiverUserId)||void 0===r?void 0:r._id,"like")}})}),(0,g.jsxs)("div",{className:"member__thumb member__thumb__matches",children:[(0,g.jsx)("img",{src:null!==e&&void 0!==e&&null!==(s=e.receiverUserId)&&void 0!==s&&s.mainAvatar?"".concat(u.C,"/assets/images/").concat(null===e||void 0===e||null===(i=e.receiverUserId)||void 0===i?void 0:i.mainAvatar):null!==e&&void 0!==e&&null!==(l=e.receiverUserId)&&void 0!==l&&null!==(a=l.avatars)&&void 0!==a&&a[0]?"".concat(u.C,"/assets/images/").concat(null===e||void 0===e||null===(o=e.receiverUserId)||void 0===o?void 0:o.avatars[0]):x,alt:"dating thumb",style:{height:"100%",width:"100%"}}),(0,g.jsx)("span",{className:null===e||void 0===e||null===(c=e.receiverUserId)||void 0===c?void 0:c.className})]}),(0,g.jsxs)("div",{className:"member-atsro",onClick:f,style:{cursor:"pointer"},children:[(0,g.jsx)("img",{src:j,alt:"",className:"member-atsro-imgs"}),(0,g.jsx)("small",{className:"text-light float-end pe-2 pt-1",children:"Astro"})]}),(0,g.jsxs)("div",{className:"member__content",children:[(0,g.jsx)(n.N_,{to:"/metrimonial/user-profile/".concat(null===e||void 0===e||null===(d=e.receiverUserId)||void 0===d?void 0:d._id),children:(0,g.jsx)("h5",{children:null===e||void 0===e||null===(m=e.receiverUserId)||void 0===m?void 0:m.name})}),(0,g.jsxs)("p",{children:[(0,g.jsx)("span",{children:null===e||void 0===e||null===(v=e.receiverUserId)||void 0===v?void 0:v.occupation})," ||"," ",(0,g.jsx)("span",{children:null===e||void 0===e||null===(h=e.receiverUserId)||void 0===h?void 0:h.age})]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("i",{class:"fa fa-map-marker",style:{color:"#f24570"},"aria-hidden":"true"})," ",null!==e&&void 0!==e&&null!==(p=e.receiverUserId)&&void 0!==p&&p.address?null===e||void 0===e||null===(_=e.receiverUserId)||void 0===_?void 0:_.address:null===e||void 0===e||null===(A=e.receiverUserId)||void 0===A?void 0:A.location]}),(0,g.jsx)("p",{children:null===e||void 0===e||null===(N=e.receiverUserId)||void 0===N?void 0:N.activity})]}),(0,g.jsxs)("div",{className:"row mt-2 match-icon-main",children:[(0,g.jsx)("div",{className:"col ",children:(0,g.jsx)(n.N_,{className:"fs-3 ms-4",to:"/metrimonial/user-profile/".concat(null===e||void 0===e||null===(b=e.receiverUserId)||void 0===b?void 0:b._id),children:(0,g.jsx)("i",{class:"fa fa-user","aria-hidden":"true",title:"Profile"})})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)("span",{className:"fs-3 ms-3",style:{cursor:"pointer",color:U?"#ccc":"#f24570"},onClick:()=>{var r;return E(null===e||void 0===e||null===(r=e.receiverUserId)||void 0===r?void 0:r._id)},title:U?"Creating room...":"Message",children:(0,g.jsx)("i",{class:"fa fa-comment","aria-hidden":"true"})})})]})]})},r)}):(0,g.jsx)("div",{className:"col text-center",children:(0,g.jsxs)("h5",{children:['"Matches are not available'," ",(0,g.jsx)("a",{href:"/metrimonial/members",children:(0,g.jsx)("strong",{children:(0,g.jsx)("u",{children:"Find Your Matche "})})})," ",'now!"']})})})]}),(0,g.jsxs)("div",{className:"section__wrapper my-5",children:[(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:"col",children:(0,g.jsx)("h2",{children:"Favorite list"})})}),(0,g.jsx)("div",{className:"row g-0 justify-content-center mx-12-none",children:M&&M.length>0?M.map((e,r)=>{var s,i,l,a,o,c,d,m,v,h,j,p,f;return(0,g.jsx)("div",{className:"member__item",children:(0,g.jsxs)("div",{className:"member__inner member__inner-sized-hover react-main",children:[(0,g.jsx)("div",{className:"react",children:(0,g.jsx)("img",{src:t,width:"25",alt:"",onClick:()=>{var r;return k(null===e||void 0===e||null===(r=e.receiverUserId)||void 0===r?void 0:r._id,"superlike")}})}),(0,g.jsxs)("div",{className:"member__thumb  member__thumb__matches",children:[(0,g.jsx)("img",{src:null!==e&&void 0!==e&&null!==(s=e.receiverUserId)&&void 0!==s&&s.mainAvatar?"".concat(u.C,"/assets/images/").concat(null===e||void 0===e||null===(i=e.receiverUserId)||void 0===i?void 0:i.mainAvatar):null!==e&&void 0!==e&&null!==(l=e.receiverUserId)&&void 0!==l&&null!==(a=l.avatars)&&void 0!==a&&a[0]?"".concat(u.C,"/assets/images/").concat(null===e||void 0===e||null===(o=e.receiverUserId)||void 0===o?void 0:o.avatars[0]):x,alt:"".concat((null===e||void 0===e||null===(c=e.receiverUserId)||void 0===c?void 0:c.imgAlt)||"user"),style:{height:"100%",width:"100%"}}),(0,g.jsx)("span",{className:null===e||void 0===e||null===(d=e.receiverUserId)||void 0===d?void 0:d.className})]}),(0,g.jsxs)("div",{className:"member__content",children:[(0,g.jsx)(n.N_,{to:"/metrimonial/user-profile/".concat(null===e||void 0===e||null===(m=e.receiverUserId)||void 0===m?void 0:m._id),children:(0,g.jsx)("h5",{children:null===e||void 0===e||null===(v=e.receiverUserId)||void 0===v?void 0:v.name})}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("span",{children:null===e||void 0===e||null===(h=e.receiverUserId)||void 0===h?void 0:h.occupation})," ","|| ",(0,g.jsx)("span",{children:null===e||void 0===e||null===(j=e.receiverUserId)||void 0===j?void 0:j.age})]}),(0,g.jsx)("div",{children:(0,g.jsxs)("p",{children:[(0,g.jsx)("i",{class:"fa fa-map-marker",style:{color:"#f24570"},"aria-hidden":"true"})," ",null===e||void 0===e||null===(p=e.receiverUserId)||void 0===p?void 0:p.address]})})]})]}),(0,g.jsxs)("div",{className:"row mt-2 match-icon-main",children:[(0,g.jsx)("div",{className:"col ",children:(0,g.jsx)(n.N_,{className:"fs-3 ms-4",to:"/metrimonial/user-profile/".concat(null===e||void 0===e||null===(f=e.receiverUserId)||void 0===f?void 0:f._id),children:(0,g.jsx)("i",{class:"fa fa-user","aria-hidden":"true",title:"Profile"})})}),(0,g.jsx)("div",{className:"col",children:(0,g.jsx)("span",{className:"fs-3 ms-3",style:{cursor:"pointer",color:U?"#ccc":"#f24570"},onClick:()=>{var r;return E(null===e||void 0===e||null===(r=e.receiverUserId)||void 0===r?void 0:r._id)},title:U?"Creating room...":"Message",children:(0,g.jsx)("i",{class:"fa fa-comment","aria-hidden":"true"})})})]})]})},r)}):(0,g.jsx)("div",{className:"col text-center",children:(0,g.jsxs)("h5",{children:['"Matches are not available'," ",(0,g.jsx)("a",{href:"/metrimonial/members",children:(0,g.jsx)("strong",{children:(0,g.jsx)("u",{children:"Find Your Matches "})})})," ",'now!"']})})}),(0,g.jsx)("div",{className:"member__pagination mt-4",children:(0,g.jsx)("div",{className:"member__pagination--right"})})]})]})}),(0,g.jsx)(a.A,{})]})]})}},5437:(e,r,s)=>{e.exports=s.p+"static/media/Astro.474b671829d907c8eb82.png"},9366:(e,r,s)=>{s.d(r,{A:()=>a});var i=s(5043),l=s(579);class n extends i.Component{render(){const{select:e}=this.props;return(0,l.jsxs)("select",{defaultValue:e,children:[(0,l.jsx)("option",{value:"Newest",children:"Recent added"}),(0,l.jsx)("option",{value:"Popular",children:"Popular"}),(0,l.jsx)("option",{value:"Old",children:"Old"}),(0,l.jsx)("option",{value:"Recent",children:"Recent"})]})}}const a=n}}]);
//# sourceMappingURL=489.c06f52f8.chunk.js.map