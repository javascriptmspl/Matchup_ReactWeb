{"version":3,"file":"static/js/23.b2617042.chunk.js","mappings":"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","sources":["metrimoniul/component/payment/StripePaymentModal.jsx","metrimoniul/pagesMetrimoniul/membership.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport {\r\n  Elements,\r\n  PaymentElement,\r\n  useStripe,\r\n  useElements,\r\n} from \"@stripe/react-stripe-js\";\r\nimport { createPaymentIntent, confirmPayment } from \"../../../service/MANAGE_API/paymentService\";\r\nimport toast from \"react-hot-toast\";\r\nimport \"./StripePaymentModal.css\";\r\n\r\n// Initialize Stripe with your publishable key\r\nconst stripePublishableKey = process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY;\r\n\r\nif (!stripePublishableKey) {\r\n  console.error(\"STRIPE KEY ERROR: REACT_APP_STRIPE_PUBLISHABLE_KEY is not defined in .env file\");\r\n}\r\n\r\nconst stripePromise = stripePublishableKey ? loadStripe(stripePublishableKey) : null;\r\n\r\nconst CheckoutForm = ({ clientSecret, amount, onSuccess, onCancel, userId }) => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    if (!stripe || !elements) {\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    setErrorMessage(null);\r\n\r\n    try {\r\n      const { error, paymentIntent } = await stripe.confirmPayment({\r\n        elements,\r\n        confirmParams: {\r\n          return_url: window.location.origin + \"/payment-success\",\r\n        },\r\n        redirect: \"if_required\",\r\n      });\r\n\r\n      if (error) {\r\n        setErrorMessage(error.message);\r\n        toast.error(error.message);\r\n      } else if (paymentIntent && paymentIntent.status === \"succeeded\") {\r\n        \r\n        try {\r\n          const confirmResponse = await confirmPayment(paymentIntent.id, userId);\r\n          \r\n          if (confirmResponse.isSuccess) {\r\n            const { payment, coinsAwarded, newBalance } = confirmResponse.data;\r\n            \r\n            // Show success message with subscription details\r\n            toast.success(\r\n              `Payment successful! ${coinsAwarded} coins awarded. New balance: ${newBalance}`,\r\n              { duration: 5000 }\r\n            );\r\n            \r\n           \r\n            \r\n            onSuccess(paymentIntent, confirmResponse.data);\r\n          } else {\r\n            toast.error(\"Payment processed but failed to activate subscription. Please contact support.\");\r\n            onSuccess(paymentIntent, null);\r\n          }\r\n        } catch (confirmError) {\r\n          console.error(\"Failed to confirm payment:\", confirmError);\r\n          toast.error(\"Payment successful but failed to activate subscription. Please contact support.\");\r\n          onSuccess(paymentIntent, null);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setErrorMessage(\"An unexpected error occurred.\");\r\n      toast.error(\"Payment failed. Please try again.\");\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"stripe-payment-form\">\r\n      <div className=\"payment-amount\">\r\n        <h3>Payment Amount: ${amount}</h3>\r\n      </div>\r\n\r\n      <PaymentElement />\r\n\r\n      {errorMessage && (\r\n        <div className=\"error-message\" style={{ color: \"red\", marginTop: \"10px\" }}>\r\n          {errorMessage}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"payment-buttons\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={!stripe || isProcessing}\r\n          className=\"btn-pay\"\r\n        >\r\n          {isProcessing ? \"Processing...\" : `Pay $${amount}`}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"btn-cancel\"\r\n          disabled={isProcessing}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst StripePaymentModal = ({ isOpen, onClose, subscriptionPlan, userId }) => {\r\n  const [clientSecret, setClientSecret] = useState(null);\r\n  const [paymentData, setPaymentData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    \r\n    if (isOpen && subscriptionPlan && userId) {\r\n      initializePayment();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen, subscriptionPlan, userId]);\r\n\r\n  const initializePayment = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const response = await createPaymentIntent(userId, subscriptionPlan);\r\n      \r\n      if (response.isSuccess) {\r\n        setClientSecret(response.data.clientSecret);\r\n        setPaymentData(response.data);\r\n      } else {\r\n        console.error(\"Payment initialization failed:\", response);\r\n        toast.error(\"Failed to initialize payment\");\r\n      }\r\n    } catch (error) {\r\n      toast.error(\"Error initializing payment. Please try again.\");\r\n      console.error(\"Payment initialization error:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSuccess = (paymentIntent, confirmationData) => {\r\n\r\n    \r\n    setTimeout(() => {\r\n      onClose(true, confirmationData); // Pass success and confirmation data\r\n    }, 2000);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    onClose(false);\r\n  };\r\n\r\n  if (!isOpen) {\r\n    return null;\r\n  }\r\n\r\n\r\n  const options = {\r\n    clientSecret,\r\n    appearance: {\r\n      theme: \"stripe\",\r\n      variables: {\r\n        colorPrimary: \"#0570de\",\r\n        colorBackground: \"#ffffff\",\r\n        colorText: \"#30313d\",\r\n        colorDanger: \"#df1b41\",\r\n        fontFamily: \"system-ui, sans-serif\",\r\n        spacingUnit: \"4px\",\r\n        borderRadius: \"8px\",\r\n      },\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div className=\"payment-modal-overlay\">\r\n      <div className=\"payment-modal\">\r\n        <div className=\"payment-modal-header\">\r\n          <h2>Complete Your Payment</h2>\r\n          <button className=\"close-btn\" onClick={handleCancel}>\r\n            &times;\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"payment-modal-body\">\r\n          {loading && (\r\n            <div className=\"loading-spinner\">\r\n              <p>Initializing payment...</p>\r\n            </div>\r\n          )}\r\n\r\n          {!loading && clientSecret && (\r\n            <Elements stripe={stripePromise} options={options}>\r\n              <CheckoutForm\r\n                clientSecret={clientSecret}\r\n                amount={paymentData?.amount || 0}\r\n                onSuccess={handleSuccess}\r\n                onCancel={handleCancel}\r\n                userId={userId}\r\n              />\r\n            </Elements>\r\n          )}\r\n\r\n          {!loading && !clientSecret && (\r\n            <div className=\"error-state\">\r\n              <p>Unable to initialize payment. Please try again.</p>\r\n              <button onClick={handleCancel} className=\"btn-cancel\">\r\n                Close\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StripePaymentModal;\r\n\r\n","import { Component, Fragment } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport FooterFour from \"../component/layout/footerFour\";\r\nimport HeaderFour from \"../component/layout/HeaderFour\";\r\nimport StripePaymentModal from \"../component/payment/StripePaymentModal\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nconst title = \"Membership Levels\";\r\nconst subtitle =\r\n  \"Our metrimony platform is like a breath of fresh air. Clean and trendy design with ready to use features we are sure you will love.\";\r\n\r\nlet MembershipList = [\r\n  {\r\n    daycount: \"Silver\",\r\n    perMonth: \"$15.00 Now And Then $30.00 Per Month.\",\r\n    price: \"$20.00\",\r\n    btnText: \"Select Plan\",\r\n    faciList: [\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"View Members Directory\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"View Members Profile\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"Send Private Messages\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-xmark\",\r\n        text: \"Add Media To Your Profile\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    daycount: \"Gold\",\r\n    perMonth: \"$15.00 Now And Then $30.00 Per Month.\",\r\n    price: \"$30.00\",\r\n    btnText: \"Select Plan\",\r\n    faciList: [\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"View Members Directory\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"View Members Profile\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"Send Private Messages\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"Add Media To Your Profile\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nlet coinsPlan = [\r\n  {\r\n    daycount: \"Choose you best coin plan\",\r\n    perMonth: \"Elevate connections with our premier Best Coin Plan!\",\r\n    price: \"Free\",\r\n    btnText: \"Select Plan\",\r\n    faciList: [\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"5 coins $8.99\",\r\n        offer: \"save 45%\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"30 coins $37.99\",\r\n        offer: \"best value\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"15 coins $22.99\",\r\n        offer: \"save 48%\",\r\n      },\r\n      {\r\n        iconName: \"fa-solid fa-circle-check\",\r\n        text: \"2 coins $2.99\",\r\n        offer: \"small plan\",\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\nclass MembershipPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedCoinPlan: null,\r\n      isPaymentModalOpen: false,\r\n      selectedPlan: null,\r\n      userId: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Get userId from localStorage, Redux store, or wherever you store user data\r\n    // This is a placeholder - adjust according to your auth implementation\r\n    const userId = localStorage.getItem(\"userId\");\r\n    this.setState({ userId });\r\n  }\r\n\r\n  handleSelectPlan = (index) => {\r\n    this.setState({ selectedCoinPlan: index });\r\n  };\r\n\r\n  handleSubscriptionClick = (planName, e) => {\r\n    if (e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n    \r\n    const { userId } = this.state;\r\n \r\n    \r\n    if (!userId) {\r\n      toast.error(\"Please login to subscribe\");\r\n      return;\r\n    }\r\n\r\n    \r\n    this.setState({\r\n      isPaymentModalOpen: true,\r\n      selectedPlan: planName.toLowerCase(),\r\n    }, () => {\r\n      console.log(\"Modal state updated:\", this.state.isPaymentModalOpen);\r\n    });\r\n  };\r\n\r\n  handlePaymentModalClose = (success, confirmationData) => {\r\n\r\n    \r\n    this.setState({ isPaymentModalOpen: false, selectedPlan: null });\r\n    \r\n    if (success && confirmationData) {\r\n      const { payment, coinsAwarded, newBalance } = confirmationData;\r\n      \r\n      // Show detailed success message\r\n      toast.success(\r\n        `ðŸŽ‰ Welcome to ${payment.subscriptionPlan.toUpperCase()} plan!\\n` +\r\n        `ðŸ’° ${coinsAwarded} coins added to your account\\n` +\r\n        `ðŸ“Š New balance: ${newBalance} coins\\n` +\r\n        `ðŸ“… Valid until: ${new Date(payment.subscriptionEndDate).toLocaleDateString()}`,\r\n        { duration: 8000 }\r\n      );\r\n      \r\n    \r\n    } else if (success) {\r\n      toast.success(\"Payment successful! Your subscription has been activated.\");\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { selectedCoinPlan, isPaymentModalOpen, selectedPlan, userId } = this.state;\r\n    return (\r\n      <Fragment>\r\n        <HeaderFour />\r\n        \r\n        <StripePaymentModal\r\n          isOpen={isPaymentModalOpen}\r\n          onClose={this.handlePaymentModalClose}\r\n          subscriptionPlan={selectedPlan}\r\n          userId={userId}\r\n        />\r\n\r\n        <div className=\"membership padding-top padding-bottom\">\r\n  <div className=\"container\" style={{maxWidth:'1358px'}}>\r\n    <div className=\"section__header style-2 text-center\">\r\n      <h2>{title}</h2>\r\n      <p>{subtitle}</p>\r\n    </div>\r\n    <div className=\"section__wrapper\">\r\n              <div className=\"row g-4 justify-content-center row-cols-xl-4 row-cols-lg-3 row-cols-sm-2 row-cols-1\">\r\n                {coinsPlan.map((val, i) => (\r\n                  <div\r\n                    className={`col ${\r\n                      selectedCoinPlan === i ? \"selected-coin-plan\" : \"\"\r\n                    }`}\r\n                    key={i}\r\n                    //    style={{ width: '35%' }}\r\n                    onClick={() => this.handleSelectPlan(i)}\r\n                  >\r\n                    <div className=\"membership__item\">\r\n                      <div className=\"membership__inner\">\r\n                        <div className=\"membership__head\">\r\n                          <h4>{val.daycount}</h4>\r\n                          <p>{val.perMonth}</p>\r\n                        </div>\r\n                        <div className=\"membership__body\">\r\n                          <ul>\r\n                            {val.faciList.map((val, i) => (\r\n                              <li key={i} className=\"pointer\" style={{paddingTop:'21px',paddingBottom:'21px'}}>\r\n                                <i className={val.iconName} ></i>\r\n                                <span className=\"px-2\">{val.text}</span>\r\n                                <span className=\"px-2\">{val.offer}</span>\r\n                                <img\r\n                                  src=\"https://png.pngtree.com/png-clipart/20220823/original/pngtree-flying-gold-coin-png-png-image_8447452.png\"\r\n                                  alt=\"\"\r\n                                  style={{ width: \"90px\", height: \"45px\" }}\r\n                                />\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                        <div className=\"membership__footer\">\r\n                          <button \r\n                            className=\"default-btn reverse\" \r\n                            style={{ border: 'none', width: '100%' }}\r\n                            onClick={() => toast.info(\"Please select a coin plan\")}\r\n                          >\r\n                            <span>{val.btnText}</span>\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {MembershipList.map((val, i) => (\r\n                  <div className=\"col\" key={i}>\r\n                    <div className=\"membership__item\">\r\n                      <div className=\"membership__inner\">\r\n                        <div className=\"membership__head\">\r\n                          <h4>{val.daycount}</h4>\r\n                          <p>{val.perMonth}</p>\r\n                        </div>\r\n                        <div className=\"membership__body\">\r\n                          <h4>{val.price}</h4>\r\n                          <ul>\r\n                            {val.faciList.map((val, i) => (\r\n                              <li key={i}>\r\n                                <i className={val.iconName}></i>{\" \"}\r\n                                <span>{val.text}</span>\r\n                              </li>\r\n                            ))}\r\n                          </ul>\r\n                        </div>\r\n                        <div className=\"membership__footer\">\r\n                          <button \r\n                            type=\"button\"\r\n                            className=\"default-btn reverse\" \r\n                            style={{ border: 'none', width: '100%' }}\r\n                            onClick={(e) => this.handleSubscriptionClick(val.daycount, e)}\r\n                          >\r\n                            <span>{val.btnText}</span>\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n  </div>\r\n\r\n<div className=\"purchase_history_wrap\">\r\n  \r\n</div>\r\n\r\n</div>\r\n\r\n        <FooterFour />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MembershipPage;\r\n"],"names":["stripePublishableKey","process","stripePromise","loadStripe","CheckoutForm","_ref","clientSecret","amount","onSuccess","onCancel","userId","stripe","useStripe","elements","useElements","isProcessing","setIsProcessing","useState","errorMessage","setErrorMessage","_jsxs","onSubmit","async","event","preventDefault","error","paymentIntent","confirmPayment","confirmParams","return_url","window","location","origin","redirect","message","toast","status","confirmResponse","id","isSuccess","payment","coinsAwarded","newBalance","data","success","duration","confirmError","console","err","className","children","_jsx","PaymentElement","style","color","marginTop","type","disabled","onClick","_ref2","isOpen","onClose","subscriptionPlan","setClientSecret","paymentData","setPaymentData","loading","setLoading","useEffect","initializePayment","response","createPaymentIntent","handleCancel","options","appearance","theme","variables","colorPrimary","colorBackground","colorText","colorDanger","fontFamily","spacingUnit","borderRadius","Elements","handleSuccess","confirmationData","setTimeout","MembershipList","daycount","perMonth","price","btnText","faciList","iconName","text","coinsPlan","offer","MembershipPage","Component","constructor","props","super","handleSelectPlan","index","this","setState","selectedCoinPlan","handleSubscriptionClick","planName","e","stopPropagation","state","isPaymentModalOpen","selectedPlan","toLowerCase","log","handlePaymentModalClose","toUpperCase","Date","subscriptionEndDate","toLocaleDateString","componentDidMount","localStorage","getItem","render","Fragment","HeaderFour","StripePaymentModal","maxWidth","map","val","i","paddingTop","paddingBottom","src","alt","width","height","border","info","FooterFour"],"sourceRoot":""}